<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Welcome Guide Setup</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Alex+Brush&family=Angkor&family=Architects+Daughter&family=Bebas+Neue&family=Boldonse&family=Cal+Sans&family=Carter+One&family=Faster+One&family=Gabarito:wght@400..900&family=Grand+Hotel&family=Grenze+Gotisch:wght@100..900&family=Libre+Bodoni:ital,wght@0,400..700;1,400..700&family=Lily+Script+One&family=Lobster&family=Manufacturing+Consent&family=Meow+Script&family=Monoton&family=Ms+Madi&family=New+Amsterdam&family=Niconne&family=Oleo+Script+Swash+Caps:wght@400;700&family=Pattaya&family=Patua+One&family=Permanent+Marker&family=Petit+Formal+Script&family=Pinyon+Script&family=Pirata+One&family=Rochester&family=Rouge+Script&family=Rozha+One&family=Sacramento&family=Sail&family=Special+Gothic+Condensed+One&family=Special+Gothic+Expanded+One&family=Staatliches&family=Style+Script&family=Sulphur+Point:wght@300;400;700&family=Trirong:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Twinkle+Star&family=Unbounded:wght@200..900&family=Vibur&family=Vidaloka&family=Yeseva+One&family=Zilla+Slab+Highlight:wght@400;700&family=Montserrat:wght@400;500;700&family=Inter:wght@400;500;700&family=Poppins:wght@400;500;700&family=DM+Sans:wght@400;500;700&family=Work+Sans:wght@400;500;700&family=Manrope:wght@400;500;700&family=Karla:wght@400;500;700&family=Roboto:wght@400;500;700&family=Open+Sans:wght@400;500;700&family=Lato:wght@400;500;700&family=Source+Sans+Pro:wght@400;500;700&family=PT+Sans:wght@400;500;700&family=Raleway:wght@400;500;700&family=Chivo:wght@400;500;700&family=Rubik:wght@400;500;700&family=Space+Grotesk:wght@400;500;700&family=Syne:wght@400;500;700&family=Libre+Franklin:wght@400;500;700&family=Fira+Sans:wght@400;500;700&family=Alegreya+Sans:wght@400;500;700&family=IBM+Plex+Sans:wght@400;500;700&family=Archivo+Narrow:wght@400;500;700&family=Proza+Libre:wght@400;500;700&family=Neuton:wght@400;500;700&family=Sora:wght@400;500;700&family=General+Sans:wght@400;500;700&family=Tenor+Sans:wght@400;500;700&family=Newsreader:wght@400;500;700&family=Faustina:wght@400;500;700&family=Lora:wght@400;500;700&family=Merriweather:wght@400;500;700&family=Source+Serif+Pro:wght@400;500;700&family=PT+Serif:wght@400;500;700&family=Libre+Baskerville:wght@400;500;700&family=Cormorant:wght@400;500;700&family=Alegreya:wght@400;500;700&family=Fraunces:wght@400;500;700&family=Cardo:wght@400;500;700&family=Tinos:wght@400;500;700&family=David+Libre:wght@400;500;700&family=Licorice:wght@400&family=Kristi:wght@400&family=Cedarville+Cursive:wght@400&family=Homemade+Apple:wght@400&family=Gochi+Hand:wght@400&family=Dancing+Script:wght@400;700&family=Pacifico:wght@400&family=Caveat:wght@400;500;600;700&family=Shadows+Into+Light:wght@400&family=Satisfy:wght@400&family=Indie+Flower:wght@400&family=Zeyada:wght@400&family=Great+Vibes:wght@400&family=Courgette:wght@400&display=swap"
      rel="stylesheet"
    />
    <!-- QRCode.js Library for Wi-Fi QR Code Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
      :root {
        --primary: #4071f4;
        --primary-dark: #3461e8;
        --primary-light: #6b94f7;
        --secondary: #64748b;
        --success: #059669;
        --danger: #dc2626;
        --warning: #d97706;
        --bg: #fafbff;
        --white: #ffffff;
        --gray-50: #f8fafc;
        --gray-100: #f1f5f9;
        --gray-200: #e2e8f0;
        --gray-300: #cbd5e1;
        --gray-400: #94a3b8;
        --gray-500: #64748b;
        --gray-600: #475569;
        --gray-700: #334155;
        --gray-800: #1e293b;
        --gray-900: #0f172a;
        --border: #e2e8f0;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -2px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1),
          0 4px 6px -4px rgb(0 0 0 / 0.1);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: var(--bg);
        color: var(--gray-900);
        line-height: 1.6;
      }

      .container {
        display: flex;
        min-height: 100vh;
        overflow: hidden;
      }

      .sidebar {
        width: 420px;
        background: var(--white);
        border-right: 1px solid var(--border);
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
        height: 100vh;
        overflow: hidden;
        box-shadow: var(--shadow-lg);
      }

      .sidebar-header {
        padding: 1rem 2.5rem;
        border-bottom: 1px solid rgba(64, 113, 244, 0.08);
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.98) 0%,
          rgba(248, 250, 252, 0.95) 100%
        );
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        color: var(--gray-800);
        flex-shrink: 0;
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 24px rgba(64, 113, 244, 0.06);
      }

      .header-content {
        display: flex;
        align-items: center;
        gap: 1.75rem;
        position: relative;
        z-index: 2;
      }

      .header-logo {
        width: 100px;
        height: 100px;
        object-fit: contain;
        flex-shrink: 0;
        border-radius: 16px;
        background: linear-gradient(
          135deg,
          rgba(64, 113, 244, 0.05) 0%,
          rgba(107, 148, 247, 0.03) 100%
        );
        padding: 1px;
        box-shadow: 0 8px 32px rgba(64, 113, 244, 0.12);
        border: 1px solid rgba(64, 113, 244, 0.08);
        transition: all 0.3s ease;
      }

      .header-logo:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 40px rgba(64, 113, 244, 0.18);
      }

      .header-content::after {
        content: "";
        position: absolute;
        bottom: -1rem;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(
          90deg,
          transparent 0%,
          rgba(64, 113, 244, 0.2) 20%,
          rgba(64, 113, 244, 0.4) 50%,
          rgba(64, 113, 244, 0.2) 80%,
          transparent 100%
        );
      }

      .header-text {
        flex: 1;
        min-width: 0;
        animation: fadeInUp 0.8s ease-out;
        line-height: 1.2;
      }

      /* Save/Load Controls Styles */
      .save-load-btn {
        padding: 0.5rem 0.75rem;
        border: none;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: var(--shadow-sm);
        font-family: inherit;
        outline: none;
      }

      .save-btn {
        background: linear-gradient(135deg, var(--success) 0%, #047857 100%);
        color: white;
      }

      .save-btn:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
        background: linear-gradient(135deg, #047857 0%, #065f46 100%);
      }

      .load-btn {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: white;
      }

      .load-btn:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
        background: linear-gradient(
          135deg,
          var(--primary-dark) 0%,
          #2563eb 100%
        );
      }

      .save-load-btn:active {
        transform: translateY(0);
        box-shadow: var(--shadow-sm);
      }

      .save-load-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .auto-save-status {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        opacity: 0.8;
      }

      .auto-save-status.saving {
        color: var(--warning);
      }

      .auto-save-status.saved {
        color: var(--success);
      }

      .auto-save-status.error {
        color: var(--danger);
      }

      /* Loading Spinner for Save/Load */
      .spinner {
        width: 12px;
        height: 12px;
        border: 2px solid transparent;
        border-top: 2px solid currentColor;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Unified Actions Section */
      .unified-actions-section {
        flex-shrink: 0;
      }

      .action-btn {
        flex: 1;
        padding: 0.75rem 1rem;
        border: none;
        border-radius: 0.5rem;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        box-shadow: var(--shadow-sm);
        font-family: inherit;
        outline: none;
      }

      .action-btn:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
      }

      .action-btn:active {
        transform: translateY(0);
        box-shadow: var(--shadow-sm);
      }

      .save-btn {
        background: linear-gradient(135deg, var(--success) 0%, #047857 100%);
        color: white;
      }

      .save-btn:hover {
        background: linear-gradient(135deg, #047857 0%, #065f46 100%);
      }

      .load-btn {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: white;
      }

      .load-btn:hover {
        background: linear-gradient(
          135deg,
          var(--primary-dark) 0%,
          #2563eb 100%
        );
      }

      .reset-btn {
        background: linear-gradient(
          135deg,
          var(--gray-200) 0%,
          var(--gray-300) 100%
        );
        color: var(--gray-700);
      }

      .reset-btn:hover {
        background: linear-gradient(
          135deg,
          var(--gray-300) 0%,
          var(--gray-400) 100%
        );
        color: var(--gray-800);
      }

      .download-btn {
        background: linear-gradient(135deg, var(--success) 0%, #16a34a 100%);
        color: white;
        font-weight: 600;
      }

      .download-btn:hover {
        background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
        box-shadow: 0 8px 25px rgba(34, 197, 94, 0.3);
      }

      .download-btn-large {
        background: linear-gradient(135deg, var(--success) 0%, #16a34a 100%);
        color: white;
        font-weight: 600;
        font-size: 1.05rem;
        padding: 1rem 1.5rem;
        box-shadow: 0 4px 15px rgba(34, 197, 94, 0.2);
      }

      .download-btn-large:hover {
        background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
        box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4);
        transform: translateY(-2px);
      }

      .download-btn-large i {
        opacity: 0.9;
      }

      .auto-save-status-unified {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 48px;
      }

      @media (max-width: 768px) {
        .unified-actions-section {
          padding: 1rem !important;
        }

        .actions-row {
          gap: 0.5rem !important;
          margin-bottom: 0.5rem !important;
        }

        .action-btn {
          padding: 0.6rem 0.5rem;
          font-size: 0.8rem;
        }

        .action-btn span {
          display: none;
        }

        .action-btn i {
          margin: 0;
          font-size: 1rem;
        }

        .download-btn-large {
          font-size: 0.8rem !important;
          padding: 0.6rem 0.5rem !important;
        }

        .download-btn-large i {
          font-size: 1.2rem !important;
        }

        .auto-save-status-unified {
          font-size: 0.7rem !important;
          padding: 0.6rem !important;
          min-height: 40px;
        }
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .sidebar-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 30% 60%,
            rgba(64, 113, 244, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 70% 20%,
            rgba(107, 148, 247, 0.02) 0%,
            transparent 50%
          );
        animation: float 30s ease-in-out infinite;
      }

      .sidebar-header::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 1rem;
        right: 1rem;
        height: 2px;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(64, 113, 244, 0.15),
          transparent
        );
        border-radius: 1px;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .sidebar-header h1 {
        font-size: 2.25rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        letter-spacing: 0em;
        position: relative;
        z-index: 1;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 70%,
          #2563eb 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        line-height: 1.1;
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
      }

      .sidebar-content {
        flex: 1;
        overflow-y: auto;
        overflow-x: hidden;
        padding: 0.75rem;
        background: var(--gray-50);
      }

      /* Accordion Styles */
      .accordion-section {
        background: var(--white);
        border-radius: 0.75rem;
        margin-bottom: 0.75rem;
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--border);
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .accordion-section:hover {
        box-shadow: var(--shadow-md);
        transform: translateY(-1px);
      }

      .accordion-section:last-child {
        margin-bottom: 0;
      }

      .accordion-header {
        padding: 1.125rem 1.5rem;
        background: var(--white);
        border: none;
        width: 100%;
        text-align: left;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
        font-weight: 600;
        overflow: hidden;
      }

      .accordion-number {
        position: absolute;
        left: 0.75rem;
        top: 50%;
        transform: translateY(-50%);
        font-size: 4rem;
        font-weight: 900;
        line-height: 1;
        opacity: 0.3;
        color: var(--primary);
        z-index: 0;
        pointer-events: none;
        user-select: none;
        width: auto;
        height: auto;
        font-family: system-ui, -apple-system, sans-serif;
      }

      .accordion-header.active .accordion-number {
        opacity: 0.4;
        color: white;
      }

      .accordion-content-wrapper {
        position: relative;
        z-index: 1;
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        margin-left: 2.75rem;
      }

      .accordion-header::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-light)
        );
        transform: scaleY(0);
        transition: transform 0.3s ease;
        border-radius: 0 2px 2px 0;
      }

      .accordion-header:hover {
        background: linear-gradient(
          135deg,
          var(--gray-50) 0%,
          rgba(64, 113, 244, 0.05) 100%
        );
      }

      .accordion-header:hover::before {
        transform: scaleY(1);
      }

      .accordion-header.active {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: white;
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
      }

      .accordion-header.active::before {
        transform: scaleY(1);
        background: rgba(255, 255, 255, 0.3);
      }

      .accordion-title {
        font-size: 1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .accordion-title i {
        font-size: 1.1rem;
        width: 20px;
        text-align: center;
        opacity: 0.8;
      }

      .accordion-header.active .accordion-title i {
        opacity: 1;
      }

      .accordion-arrow {
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: 0.875rem;
        opacity: 0.7;
      }

      .accordion-header.active .accordion-arrow {
        transform: rotate(180deg);
        opacity: 1;
      }

      .accordion-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .accordion-content.active {
        max-height: 2800px;
      }

      .accordion-body {
        padding: 1.25rem;
        background: linear-gradient(
          135deg,
          var(--gray-50) 0%,
          rgba(64, 113, 244, 0.02) 100%
        );
        border-top: 1px solid var(--gray-200);
        position: relative;
      }

      .accordion-body::before {
        content: "";
        position: absolute;
        top: 0;
        left: 2rem;
        right: 2rem;
        height: 1px;
        background: linear-gradient(
          90deg,
          transparent,
          var(--primary-light),
          transparent
        );
        opacity: 0.3;
      }

      .form-group {
        margin-bottom: 1rem;
      }

      .form-group:last-child {
        margin-bottom: 0;
      }

      .form-label {
        display: block;
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--gray-700);
        opacity: 0.9;
        margin-bottom: 0.5rem;
        letter-spacing: 0.01em;
        line-height: 1.4;
      }

      .form-input,
      .form-textarea {
        width: 100%;
        padding: 0.875rem 1rem;
        border: 2px solid var(--gray-200);
        border-radius: 0.75rem;
        font-size: 1.125rem;
        font-weight: 500;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        background: var(--white);
        box-shadow: var(--shadow-sm);
        color: var(--gray-900);
        line-height: 1.5;
      }

      .form-input:focus,
      .form-textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 4px rgba(64, 113, 244, 0.1), var(--shadow-md);
        transform: translateY(-1px);
      }

      .form-input:hover:not(:focus),
      .form-textarea:hover:not(:focus) {
        border-color: var(--gray-300);
        box-shadow: var(--shadow-md);
      }

      .form-input::placeholder,
      .form-textarea::placeholder {
        color: var(--gray-400);
        font-weight: 400;
        font-size: 1rem;
      }

      .form-select {
        width: 100%;
        padding: 0.875rem 2.5rem 0.875rem 1rem;
        border: 2px solid var(--gray-200);
        border-radius: 0.75rem;
        font-size: 1.125rem;
        font-weight: 500;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        background: var(--white);
        cursor: pointer;
        appearance: none;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.875rem center;
        background-repeat: no-repeat;
        background-size: 1.25em 1.25em;
        box-shadow: var(--shadow-sm);
        color: var(--gray-900);
      }

      .form-select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 4px rgba(64, 113, 244, 0.1), var(--shadow-md);
        transform: translateY(-1px);
      }

      .form-select:hover:not(:focus) {
        border-color: var(--gray-300);
        box-shadow: var(--shadow-md);
      }

      .form-textarea {
        resize: vertical;
        min-height: 80px;
        line-height: 1.6;
      }

      /* Social Links Styles */
      .social-links-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        padding: 0.75rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        background: var(--gray-50);
        transition: all 0.2s ease;
        margin-bottom: 0.5rem;
      }

      .social-links-header:hover {
        background: var(--gray-100);
        border-color: var(--gray-400);
      }

      .social-links-header .form-label {
        margin-bottom: 0;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .social-links-header .form-label small {
        font-weight: 400;
        color: var(--gray-500);
        text-transform: none;
        font-size: 0.75rem;
      }

      .social-links-arrow {
        transition: transform 0.2s ease;
        color: var(--gray-500);
      }

      .social-links-arrow.rotated {
        transform: rotate(180deg);
      }

      .social-links-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
      }

      .social-links-content.expanded {
        max-height: 2000px;
      }

      .social-icons-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 0.75rem;
        padding: 1rem;
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        margin-bottom: 1rem;
      }

      .social-icon-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .social-icon-btn {
        width: 3rem;
        height: 3rem;
        border: 2px solid var(--gray-300);
        border-radius: 0.75rem;
        background: var(--white);
        color: var(--gray-600);
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
      }

      .social-icon-btn:hover {
        border-color: var(--primary);
        color: var(--primary);
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(52, 97, 232, 0.15);
      }

      .social-icon-btn.active {
        border-color: var(--primary);
        background: var(--primary);
        color: white;
        box-shadow: 0 4px 12px rgba(52, 97, 232, 0.25);
      }

      .social-icon-item span {
        font-size: 0.75rem;
        color: var(--gray-600);
        text-align: center;
        font-weight: 500;
      }

      .social-link-inputs {
        padding-top: 0.5rem;
      }

      .social-input-group {
        margin-bottom: 1rem;
        padding: 1rem;
        background: var(--gray-50);
        border-radius: 0.5rem;
        border: 1px solid var(--gray-200);
      }

      .social-input-group .form-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        margin-bottom: 0.5rem;
      }

      /* Superhost Checkbox Styles */
      .checkbox-wrapper {
        margin-top: 0.5rem;
      }

      .superhost-checkbox {
        display: none;
      }

      .superhost-label {
        display: flex;
        align-items: center;
        gap: 1rem;
        cursor: pointer;
        padding: 1rem;
        border: 2px solid var(--gray-200);
        border-radius: 12px;
        background: var(--white);
        transition: all 0.3s ease;
      }

      .superhost-label:hover {
        border-color: var(--primary);
        background: var(--gray-50);
      }

      .superhost-checkbox:checked + .superhost-label {
        border-color: var(--primary);
        background: linear-gradient(
          135deg,
          rgba(52, 97, 232, 0.05),
          rgba(147, 51, 234, 0.05)
        );
      }

      .checkbox-indicator {
        width: 24px;
        height: 24px;
        border: 2px solid var(--gray-300);
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--white);
        transition: all 0.3s ease;
        flex-shrink: 0;
      }

      .superhost-checkbox:checked + .superhost-label .checkbox-indicator {
        background: var(--primary);
        border-color: var(--primary);
        color: white;
      }

      .checkbox-indicator i {
        font-size: 12px;
        opacity: 0;
        transform: scale(0);
        transition: all 0.2s ease;
      }

      .superhost-checkbox:checked + .superhost-label .checkbox-indicator i {
        opacity: 1;
        transform: scale(1);
      }

      .superhost-text {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .superhost-title {
        font-weight: 600;
        color: var(--gray-800);
        font-size: 0.875rem;
      }

      .superhost-description {
        font-size: 0.75rem;
        color: var(--gray-600);
        font-weight: 400;
      }

      .color-input-group {
        display: flex;
        gap: 0.75rem;
        align-items: center;
      }

      .color-input {
        width: 3.5rem;
        height: 3rem;
        border: 2px solid var(--gray-300);
        border-radius: 0.5rem;
        cursor: pointer;
        padding: 0;
        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.05);
        transition: all 0.2s ease;
      }

      .color-input:hover {
        border-color: var(--primary);
        transform: scale(1.05);
      }

      .color-preview {
        flex: 1;
        padding: 0.75rem 1rem;
        background: var(--white);
        border: 2px solid var(--gray-300);
        border-radius: 0.5rem;
        font-family: "Courier New", monospace;
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--gray-700);
        text-align: center;
        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.05);
      }

      /* Color Presets Styles */
      .color-presets {
        margin-top: 1rem;
      }

      .color-preset-grid {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 0.15rem;
        margin-top: 0.25rem;
      }

      .color-preset {
        cursor: pointer;
        transition: all 0.2s ease;
        border-radius: 0.5rem;
        overflow: hidden;
        position: relative;
      }

      .color-preset:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .color-swatch {
        width: 100%;
        height: 1.5rem;
        border: 2px solid var(--gray-200);
        border-radius: 0.5rem;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
      }

      .color-preset:hover .color-swatch {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.25),
          0 2px 12px rgba(0, 0, 0, 0.18);
        transform: scale(1.08);
        z-index: 2;
      }

      .color-preset::after {
        content: attr(title);
        position: absolute;
        bottom: -2rem;
        left: 50%;
        transform: translateX(-50%);
        background: var(--gray-800);
        color: white;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.75rem;
        font-weight: 500;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: all 0.2s ease;
        z-index: 10;
      }

      .color-preset:hover::after {
        opacity: 1;
        bottom: -1.5rem;
      }

      .color-preset.selected .color-swatch {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.2);
      }

      .color-preset.selected::before {
        content: "✓";
        position: absolute;
        top: 0.25rem;
        right: 0.25rem;
        background: var(--primary);
        color: white;
        width: 1.25rem;
        height: 1.25rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        font-weight: bold;
        z-index: 2;
      }

      /* Overlay Style Selector Styles */
      .overlay-style-selector {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin-top: 0.5rem;
      }

      .overlay-style-option {
        display: grid;
        grid-template-columns: auto 1fr auto;
        gap: 1rem;
        padding: 1rem;
        background: var(--white);
        border: 2px solid var(--gray-200);
        border-radius: 0.75rem;
        cursor: pointer;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .overlay-style-option:hover {
        border-color: var(--primary);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .overlay-style-option.active {
        border-color: var(--primary);
        background: linear-gradient(
          135deg,
          rgba(52, 97, 232, 0.05) 0%,
          rgba(64, 113, 244, 0.02) 100%
        );
        box-shadow: 0 4px 16px rgba(52, 97, 232, 0.15);
      }

      .overlay-style-preview {
        flex-shrink: 0;
        width: 80px;
        height: 60px;
        border-radius: 0.5rem;
        overflow: hidden;
        position: relative;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .overlay-style-bg {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }

      .transparent-bg {
        background: linear-gradient(
          135deg,
          rgba(52, 97, 232, 0.15) 0%,
          rgba(99, 102, 241, 0.08) 100%
        );
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
        border: 1px solid rgba(52, 97, 232, 0.25);
      }

      .solid-bg {
        background: linear-gradient(
          135deg,
          rgba(30, 30, 35, 0.95) 0%,
          rgba(20, 20, 25, 0.98) 100%
        );
        color: white;
      }

      .overlay-style-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.75rem;
        font-weight: 500;
        text-align: center;
      }

      .overlay-style-content i {
        font-size: 1rem;
        opacity: 0.8;
      }

      .overlay-style-content span {
        font-size: 0.625rem;
        line-height: 1.2;
      }

      .overlay-style-info {
        flex: 1;
        min-width: 0;
      }

      .overlay-style-info h4 {
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--gray-800);
        margin: 0 0 0.25rem 0;
        line-height: 1.3;
      }

      .overlay-style-info p {
        font-size: 0.75rem;
        color: var(--gray-600);
        margin: 0;
        line-height: 1.4;
      }

      .overlay-style-check {
        flex-shrink: 0;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: var(--gray-200);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
      }

      .overlay-style-check i {
        font-size: 0.75rem;
        color: var(--gray-400);
        opacity: 0;
        transition: all 0.2s ease;
      }

      .overlay-style-option.active .overlay-style-check {
        background: var(--primary);
        box-shadow: 0 2px 8px rgba(52, 97, 232, 0.3);
      }

      .overlay-style-option.active .overlay-style-check i {
        color: white;
        opacity: 1;
      }

      .overlay-style-option.active .overlay-style-info h4 {
        color: var(--primary);
      }

      .overlay-style-note {
        display: none;
        align-items: center;
        gap: 0.5rem;
        margin-top: 0.75rem;
        padding: 0.75rem;
        background: rgba(255, 193, 7, 0.1);
        border: 1px solid rgba(255, 193, 7, 0.3);
        border-radius: 0.5rem;
        font-size: 0.75rem;
        color: #856404;
        width: 100%;
        grid-column: 1 / -1;
      }

      .overlay-style-note i {
        color: #ffc107;
        font-size: 0.875rem;
        flex-shrink: 0;
      }

      .overlay-style-option.active .overlay-style-note {
        display: flex;
      }

      .grid-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem;
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: 0.75rem;
        margin-bottom: 0.75rem;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
        transition: all 0.2s ease;
        cursor: pointer;
      }

      .grid-item:hover {
        border-color: var(--primary);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
      }

      .grid-item-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        flex: 1;
        pointer-events: none;
      }

      .grid-item-icon {
        width: 2.5rem;
        height: 2.5rem;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: white;
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .grid-item-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--gray-700);
        flex: 1;
      }

      .grid-item-controls {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        pointer-events: auto;
      }

      .edit-btn {
        padding: 0.25rem 0.5rem;
        background: var(--gray-100);
        border: none;
        border-radius: 0.25rem;
        font-size: 0.75rem;
        cursor: pointer;
        transition: all 0.2s ease;
        pointer-events: auto;
      }

      .edit-btn:hover {
        background: var(--gray-200);
      }

      .toggle-switch {
        position: relative;
        width: 3rem;
        height: 1.5rem;
        background: var(--gray-300);
        border-radius: 0.75rem;
        cursor: pointer;
        transition: background-color 0.2s ease;
        pointer-events: auto;
      }

      .toggle-switch.active {
        background: var(--primary);
      }

      .toggle-switch::after {
        content: "";
        position: absolute;
        top: 0.125rem;
        left: 0.125rem;
        width: 1.25rem;
        height: 1.25rem;
        background: white;
        border-radius: 50%;
        transition: transform 0.2s ease;
      }

      .toggle-switch.active::after {
        transform: translateX(1.5rem);
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        padding: 0.875rem 1.5rem;
        font-size: 0.9rem;
        font-weight: 600;
        border-radius: 1rem;
        border: none;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: var(--shadow-sm);
        text-transform: none;
        letter-spacing: 0.01em;
        line-height: 1.4;
        min-height: 44px;
        flex: 1;
      }

      .btn-secondary {
        background: var(--white);
        color: var(--gray-700);
        border: 2px solid var(--gray-300);
        box-shadow: var(--shadow-sm);
      }

      .btn-secondary:hover {
        background: var(--gray-50);
        border-color: var(--gray-400);
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
        color: var(--gray-800);
      }

      .btn-success {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: white;
        border: 2px solid var(--primary);
        box-shadow: 0 4px 14px 0 rgba(99, 102, 241, 0.25);
        position: relative;
        overflow: hidden;
      }

      .btn-success::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      .btn-success:hover::before {
        left: 100%;
      }

      .btn-success:hover {
        background: linear-gradient(
          135deg,
          var(--primary-dark) 0%,
          #3730a3 100%
        );
        border-color: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
      }

      .action-buttons {
        padding: 1.25rem;
        border-top: 1px solid var(--border);
        background: linear-gradient(
          135deg,
          var(--white) 0%,
          var(--gray-50) 100%
        );
        display: flex;
        gap: 0.75rem;
        flex-shrink: 0;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
      }

      .preview-section {
        flex: 1;
        background: var(--gray-100);
        position: relative;
        overflow: hidden;
        height: 100vh;
      }

      .preview-header {
        padding: 0.8rem 2rem;
        background: var(--white);
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-shrink: 0;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
      }

      .preview-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--gray-900);
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .preview-title::before {
        content: "";
        width: 4px;
        height: 1.5rem;
        background: var(--primary);
        border-radius: 2px;
      }

      .device-toggle {
        display: flex;
        background: var(--gray-100);
        border-radius: 0.75rem;
        padding: 0.25rem;
        margin-right: 1rem;
        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.05);
      }

      .device-btn {
        padding: 0.625rem 1.25rem;
        font-size: 0.8rem;
        font-weight: 600;
        border: none;
        background: transparent;
        color: var(--gray-600);
        border-radius: 0.5rem;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 0.375rem;
      }

      .device-btn:hover {
        color: var(--gray-800);
        background: var(--gray-200);
      }

      .device-btn.active {
        background: var(--white);
        color: var(--gray-900);
        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
      }

      .device-btn i {
        font-size: 0.875rem;
      }

      .preview-container {
        padding: 2rem;
        height: calc(100vh - 90px);
        overflow: auto;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(
          135deg,
          var(--gray-50) 0%,
          var(--gray-100) 100%
        );
      }

      .preview-frame {
        background: var(--white);
        border-radius: 1.5rem;
        box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1),
          0 10px 10px -5px rgb(0 0 0 / 0.04);
        overflow: hidden;
        transition: all 0.3s ease;
        position: relative;
        border: 1px solid var(--gray-200);
      }

      .preview-frame.desktop {
        width: 100%;
        max-width: 1200px;
        height: 88vh;
      }

      .preview-frame.mobile {
        width: 375px;
        height: 667px;
      }

      .preview-iframe {
        width: 100%;
        height: 100%;
        border: none;
        border-radius: 1.5rem;
      }

      .loading-overlay {
        position: absolute;
        inset: 0;
        background: rgba(255, 255, 255, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 1rem;
        transition: opacity 0.3s ease;
      }

      .loading-overlay.hidden {
        opacity: 0;
        pointer-events: none;
      }

      .spinner {
        width: 2rem;
        height: 2rem;
        border: 2px solid var(--gray-200);
        border-top: 2px solid var(--primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
        backdrop-filter: blur(4px);
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        background: var(--white);
        border-radius: 1.25rem;
        width: 90%;
        max-width: 600px;
        box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
        border: 1px solid var(--border);
      }

      .rich-editor-modal {
        max-width: 800px;
        width: 95%;
        display: flex;
        flex-direction: column;
        max-height: 90vh;
      }

      .rich-editor-modal .modal-body {
        padding: 2rem;
        overflow-y: auto;
        flex: 1;
        min-height: 0; /* Important for flexbox scrolling */
      }

      .modal-header {
        padding: 1.75rem 2rem;
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: var(--gray-50);
        border-radius: 1.25rem 1.25rem 0 0;
      }

      .modal-title {
        font-size: 1.375rem;
        font-weight: 600;
        color: var(--gray-900);
      }

      .close-btn {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--gray-400);
        padding: 0.5rem;
        border-radius: 0.5rem;
        transition: all 0.2s ease;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .close-btn:hover {
        color: var(--gray-600);
        background: var(--gray-100);
      }

      .modal-body {
        padding: 2rem;
        overflow-y: auto;
      }

      .modal-body::-webkit-scrollbar {
        width: 8px;
      }

      .modal-body::-webkit-scrollbar-track {
        background: var(--gray-100);
        border-radius: 8px;
      }

      .modal-body::-webkit-scrollbar-thumb {
        background-color: var(--gray-400);
        border-radius: 8px;
        border: 2px solid var(--gray-100);
      }

      .modal-body::-webkit-scrollbar-thumb:hover {
        background-color: var(--gray-500);
      }

      .rich-editor-modal .modal-footer {
        padding: 1.5rem 2rem;
        border-top: 1px solid var(--border);
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
        background: var(--gray-50);
        border-radius: 0 0 1.25rem 1.25rem;
        flex-shrink: 0; /* Prevent footer from shrinking */
      }

      .modal-footer {
        padding: 1.5rem 2rem;
        border-top: 1px solid var(--border);
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
        background: var(--gray-50);
        border-radius: 0 0 1.25rem 1.25rem;
      }

      /* Rich Editor Styles */
      .rich-editor-toolbar {
        display: flex;
        gap: 0.75rem;
        padding: 1.25rem;
        background: var(--gray-50);
        border: 1px solid var(--border);
        border-radius: 0.75rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
      }

      .toolbar-btn {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        background: var(--white);
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--gray-700);
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .toolbar-btn:hover {
        background: var(--primary);
        color: var(--white);
        border-color: var(--primary);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(52, 97, 232, 0.2);
      }

      .toolbar-btn i {
        font-size: 0.875rem;
      }

      .rich-editor-content {
        min-height: 300px;
        border: 1px solid var(--border);
        border-radius: 0.75rem;
        padding: 1.5rem;
        background: var(--white);
        position: relative;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      }

      .rich-editor-placeholder {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 300px;
        color: var(--gray-400);
        text-align: center;
        background: var(--gray-50);
        border-radius: 0.75rem;
        border: 2px dashed var(--gray-300);
      }

      .rich-editor-placeholder i {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        color: var(--gray-300);
      }

      .rich-editor-placeholder p {
        font-size: 1rem;
        font-weight: 500;
      }

      .rich-editor-placeholder.hidden {
        display: none;
      }

      /* Enhanced Placeholder Styles */
      .placeholder-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
      }

      .placeholder-add-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        justify-content: center;
        max-width: 600px;
      }

      .placeholder-add-btn {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        background: var(--white);
        border: 1px solid var(--border);
        border-radius: 0.75rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--gray-700);
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .placeholder-add-btn:hover {
        background: var(--primary);
        color: var(--white);
        border-color: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(52, 97, 232, 0.2);
      }

      .placeholder-add-btn i {
        font-size: 0.875rem;
      }

      /* Block Add Buttons */
      .block-add-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 1rem;
        padding: 1rem;
        background: var(--gray-50);
        border-radius: 0.75rem;
        border: 1px dashed var(--gray-300);
        opacity: 0;
        transform: translateY(-10px);
        transition: all 0.3s ease;
      }

      .content-block:hover .block-add-buttons {
        opacity: 1;
        transform: translateY(0);
      }

      .block-add-btn {
        display: flex;
        align-items: center;
        gap: 0.375rem;
        padding: 0.5rem 0.75rem;
        background: var(--white);
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        font-size: 0.75rem;
        font-weight: 500;
        color: var(--gray-600);
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .block-add-btn:hover {
        background: var(--primary);
        color: var(--white);
        border-color: var(--primary);
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(52, 97, 232, 0.15);
      }

      .block-add-btn i {
        font-size: 0.75rem;
      }

      /* Block Add Container */
      .block-add-container {
        margin: 1rem 0;
        padding: 0.5rem;
        border-radius: 0.75rem;
        transition: all 0.2s ease;
      }

      .block-add-container:hover {
        background: var(--gray-50);
      }

      /* Compact Add Block Button */
      .block-add-trigger {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        background: var(--white);
        border: 1px dashed var(--gray-300);
        border-radius: 0.75rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--gray-600);
        cursor: pointer;
        transition: all 0.2s ease;
        width: 100%;
        justify-content: center;
      }

      .block-add-trigger:hover {
        background: var(--gray-50);
        border-color: var(--primary);
        color: var(--primary);
      }

      .block-add-trigger i {
        font-size: 0.875rem;
        transition: transform 0.2s ease;
      }

      .block-add-trigger.expanded i {
        transform: rotate(45deg);
      }

      .block-add-options {
        display: none;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.75rem;
        padding: 0.75rem;
        background: var(--gray-50);
        border-radius: 0.5rem;
        border: 1px solid var(--gray-200);
      }

      .block-add-options.show {
        display: flex;
      }

      .block-add-option {
        display: flex;
        align-items: center;
        gap: 0.375rem;
        padding: 0.5rem 0.75rem;
        background: var(--white);
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        font-size: 0.75rem;
        font-weight: 500;
        color: var(--gray-600);
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .block-add-option:hover {
        background: var(--primary);
        color: var(--white);
        border-color: var(--primary);
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(52, 97, 232, 0.15);
      }

      .block-add-option i {
        font-size: 0.75rem;
      }

      /* Floating Add Button */
      .floating-add-btn {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        width: 60px;
        height: 60px;
        background: var(--primary);
        border: none;
        border-radius: 50%;
        color: var(--white);
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: 0 4px 16px rgba(52, 97, 232, 0.3);
        transition: all 0.3s ease;
        z-index: 1000;
        display: none;
      }

      .floating-add-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(52, 97, 232, 0.4);
      }

      .floating-add-btn.show {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Add Block Dropdown */
      .add-block-dropdown {
        position: absolute;
        bottom: 100%;
        right: 0;
        margin-bottom: 0.5rem;
        background: var(--white);
        border: 1px solid var(--border);
        border-radius: 0.75rem;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        padding: 0.75rem;
        display: none;
        flex-direction: column;
        gap: 0.25rem;
        min-width: 200px;
        z-index: 1001;
      }

      .add-block-dropdown.show {
        display: flex;
      }

      .add-block-option {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem;
        border: none;
        background: none;
        border-radius: 0.5rem;
        cursor: pointer;
        font-size: 0.875rem;
        color: var(--gray-700);
        transition: all 0.2s ease;
        text-align: left;
      }

      .add-block-option:hover {
        background: var(--gray-50);
        color: var(--primary);
      }

      .add-block-option i {
        font-size: 0.875rem;
        width: 16px;
        text-align: center;
      }

      /* Content Block Styles */
      .content-block {
        position: relative;
        margin-bottom: 0.75rem;
        padding: 0.75rem;
        border: 1px solid var(--border);
        border-radius: 0.75rem;
        background: var(--white);
        transition: all 0.3s ease;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
      }

      .content-block:hover {
        border-color: var(--primary);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.07);
        transform: translateY(-1px);
      }

      .content-block.selected {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .block-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 0.5rem;
        padding-bottom: 0.375rem;
        border-bottom: 1px solid var(--gray-100);
        opacity: 0.7;
        transition: opacity 0.2s ease;
      }

      .content-block:hover .block-header {
        opacity: 1;
      }

      .block-type {
        font-size: 0.7rem;
        font-weight: 600;
        color: var(--gray-500);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        padding: 0.2rem 0.5rem;
        background: var(--gray-50);
        border-radius: 0.375rem;
      }

      .block-actions {
        display: flex;
        gap: 0.25rem;
      }

      .block-btn {
        width: 24px;
        height: 24px;
        border: none;
        background: var(--gray-100);
        border-radius: 0.375rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        color: var(--gray-600);
        transition: all 0.2s ease;
      }

      .block-btn:hover {
        background: var(--gray-200);
        color: var(--gray-800);
        transform: scale(1.05);
      }

      .block-btn.delete:hover {
        background: #fee2e2;
        color: #dc2626;
      }

      .block-btn.move-up:hover,
      .block-btn.move-down:hover {
        background: var(--primary);
        color: var(--white);
      }

      /* Text Block */
      .text-block textarea {
        width: 100%;
        min-height: 80px;
        padding: 0.75rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-family: inherit;
        font-size: 0.875rem;
        line-height: 1.6;
        resize: vertical;
        transition: all 0.2s ease;
        background: var(--gray-50);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .text-block textarea:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      /* Icon Box Block */
      .icon-box-block {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .icon-box-content {
        display: flex;
        gap: 1rem;
        align-items: flex-start;
      }

      .icon-selector {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        flex-shrink: 0;
        width: 80px;
      }

      .icon-preview {
        width: 48px;
        height: 48px;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--white);
        font-size: 1.25rem;
        box-shadow: 0 2px 8px rgba(52, 97, 232, 0.2);
        transition: all 0.2s ease;
        margin: 0 auto;
        cursor: pointer;
      }

      .icon-preview:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(52, 97, 232, 0.3);
      }

      .icon-picker-btn {
        width: 100%;
        padding: 0.5rem 0.75rem;
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.25rem;
        color: var(--gray-600);
        font-size: 0.75rem;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .icon-picker-btn:hover {
        background: var(--gray-100);
        color: var(--gray-800);
        border-color: var(--gray-300);
      }

      .icon-fields {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        flex: 1;
      }

      .icon-fields .form-group {
        margin-bottom: 0;
      }

      .icon-fields input,
      .icon-fields textarea {
        width: 100%;
        padding: 0.5rem 0.75rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        transition: all 0.2s ease;
        background: var(--gray-50);
        font-family: inherit;
        resize: vertical;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .icon-fields input:focus,
      .icon-fields textarea:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .icon-fields input::placeholder,
      .icon-fields textarea::placeholder {
        color: var(--gray-400);
      }

      .icon-fields .form-label {
        font-size: 0.75rem;
        margin-bottom: 0.25rem;
      }

      /* Compact icon box improvements */
      .icon-box-block .block-header {
        margin-bottom: 0.5rem;
        padding-bottom: 0.25rem;
      }

      .icon-box-block .icon-preview {
        position: relative;
        overflow: hidden;
      }

      .icon-box-block .icon-preview::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.1);
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      .icon-box-block .icon-preview:hover::after {
        opacity: 1;
      }

      .icon-box-block .icon-picker-btn {
        min-height: 32px;
      }

      .icon-box-block .icon-fields textarea {
        min-height: 60px;
        max-height: 120px;
      }

      /* Feature Block */
      .feature-block {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      /* Feature Editor Styles */
      .feature-editor {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin: 0.75rem 0;
      }

      .feature-editor-item {
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        padding: 0.75rem;
        transition: all 0.2s ease;
      }

      .feature-editor-item:hover {
        border-color: var(--gray-300);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }

      .feature-editor-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.75rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid var(--gray-200);
      }

      .feature-number {
        font-weight: 600;
        color: var(--white);
        font-size: 0.8rem;
        background: var(--primary);
        padding: 0.25rem 0.5rem;
        border-radius: 0.375rem;
        min-width: 1.75rem;
        text-align: center;
      }

      .feature-remove-btn {
        background: #dc3545;
        color: white;
        border: none;
        border-radius: 0.375rem;
        padding: 0.25rem;
        font-size: 0.7rem;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
      }

      .feature-remove-btn:hover {
        background: #c82333;
        transform: scale(1.05);
      }

      .feature-editor-content {
        display: flex;
        gap: 0.75rem;
        align-items: flex-start;
      }

      .feature-icon-selector {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        flex-shrink: 0;
        width: 80px;
      }

      .feature-icon-preview {
        width: 48px;
        height: 48px;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--white);
        font-size: 1.25rem;
        box-shadow: 0 2px 8px rgba(52, 97, 232, 0.2);
        transition: all 0.2s ease;
        margin: 0 auto;
        cursor: pointer;
      }

      .feature-icon-preview:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(52, 97, 232, 0.3);
      }

      .feature-icon-picker-btn {
        width: 100%;
        padding: 0.5rem 0.75rem;
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.25rem;
        color: var(--gray-600);
        font-size: 0.75rem;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .feature-icon-picker-btn:hover {
        background: var(--gray-100);
        color: var(--gray-800);
        border-color: var(--gray-300);
      }

      .feature-editor-fields {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        flex: 1;
      }

      .feature-editor-field {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .feature-editor-field label {
        font-size: 0.7rem;
        font-weight: 600;
        color: var(--gray-700);
        text-transform: uppercase;
        letter-spacing: 0.025em;
      }

      .feature-editor-field input,
      .feature-editor-field textarea {
        padding: 0.5rem 0.75rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-family: inherit;
        background: var(--white);
        transition: all 0.2s ease;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .feature-editor-field input:focus,
      .feature-editor-field textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .feature-editor-field input::placeholder,
      .feature-editor-field textarea::placeholder {
        color: var(--gray-400);
      }

      .feature-editor-field textarea {
        min-height: 50px;
        max-height: 100px;
        resize: vertical;
      }

      .add-feature-btn {
        background: var(--primary);
        color: var(--white);
        border: none;
        border-radius: 0.75rem;
        padding: 0.75rem 1rem;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        margin-top: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        box-shadow: 0 2px 4px rgba(52, 97, 232, 0.2);
      }

      .add-feature-btn:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(52, 97, 232, 0.3);
      }

      .add-feature-btn:active {
        transform: translateY(0);
      }

      /* Feature Style Toggle */
      .feature-style-toggle {
        margin: 0.75rem 0;
        padding: 0.75rem;
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
      }

      .toggle-label {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        cursor: pointer;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--gray-700);
      }

      .toggle-label input[type="checkbox"] {
        width: 1.25rem;
        height: 1.25rem;
        accent-color: var(--primary);
        cursor: pointer;
      }

      .toggle-text {
        user-select: none;
      }

      /* Compact Image Block */
      .image-block-compact {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .image-block-content {
        display: flex;
        gap: 1rem;
        align-items: flex-start;
      }

      .image-preview-compact {
        position: relative;
        width: 100px;
        height: 70px;
        border: 2px dashed var(--gray-300);
        border-radius: 0.5rem;
        overflow: hidden;
        flex-shrink: 0;
        background: var(--gray-50);
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .image-preview-compact:hover {
        border-color: var(--primary);
        background: var(--gray-100);
      }

      .image-preview-compact img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .image-preview-compact.empty {
        color: var(--gray-400);
        font-size: 0.75rem;
        text-align: center;
      }

      .image-preview-compact.empty i {
        font-size: 1.5rem;
        margin-bottom: 0.25rem;
        display: block;
      }

      .image-preview-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      .image-preview-compact:hover .image-preview-overlay {
        opacity: 1;
      }

      .image-preview-actions {
        display: flex;
        gap: 0.25rem;
      }

      .image-action-btn {
        width: 28px;
        height: 28px;
        border: none;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        color: var(--primary);
        transition: all 0.2s ease;
      }

      .image-action-btn:hover {
        background: white;
        transform: scale(1.1);
      }

      .image-block-info {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      /* Legacy Image Block (keeping for backward compatibility) */
      .image-block {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .image-preview {
        width: 100%;
        max-width: 240px;
        height: 140px;
        border: 2px dashed var(--gray-300);
        border-radius: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--gray-50);
        overflow: hidden;
        transition: all 0.2s ease;
      }

      .image-preview:hover {
        border-color: var(--primary);
        background: var(--gray-100);
      }

      .image-preview img {
        max-width: 100%;
        max-height: 100%;
        object-fit: cover;
        border-radius: 0.5rem;
      }

      .image-preview.empty {
        color: var(--gray-400);
        font-size: 0.875rem;
      }

      /* Cover Image Block */
      .cover-image-block {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        border: 2px solid var(--primary);
        border-radius: 0.75rem;
        padding: 0.75rem;
        background: linear-gradient(
          135deg,
          rgba(52, 97, 232, 0.05) 0%,
          rgba(52, 97, 232, 0.02) 100%
        );
      }

      .cover-image-preview {
        width: 100%;
        max-width: 300px;
        height: 160px;
        border: 2px dashed var(--primary);
        border-radius: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(52, 97, 232, 0.05);
        overflow: hidden;
        transition: all 0.2s ease;
      }

      .cover-image-preview:hover {
        border-color: var(--primary-dark);
        background: rgba(52, 97, 232, 0.1);
      }

      .cover-image-preview img {
        max-width: 100%;
        max-height: 100%;
        object-fit: cover;
        border-radius: 0.5rem;
      }

      .cover-image-preview.empty {
        color: var(--primary);
        font-size: 0.875rem;
        font-weight: 500;
      }

      /* Compact Cover Image Editor in Modal */
      .cover-image-editor-compact {
        border: 2px solid var(--primary);
        border-radius: 0.75rem;
        padding: 1rem;
        background: linear-gradient(
          135deg,
          rgba(52, 97, 232, 0.05) 0%,
          rgba(52, 97, 232, 0.02) 100%
        );
      }

      .cover-preview-section {
        display: flex;
        gap: 1rem;
        align-items: flex-start;
      }

      .cover-image-preview-compact {
        position: relative;
        width: 120px;
        height: 80px;
        border: 2px dashed var(--primary);
        border-radius: 0.5rem;
        overflow: hidden;
        flex-shrink: 0;
        background: rgba(52, 97, 232, 0.05);
        transition: all 0.2s ease;
      }

      .cover-image-preview-compact:hover {
        border-color: var(--primary-dark);
        background: rgba(52, 97, 232, 0.1);
      }

      .cover-image-preview-compact img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .cover-preview-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      .cover-image-preview-compact:hover .cover-preview-overlay {
        opacity: 1;
      }

      .cover-preview-actions {
        display: flex;
        gap: 0.5rem;
      }

      .cover-action-btn {
        width: 32px;
        height: 32px;
        border: none;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        color: var(--primary);
        transition: all 0.2s ease;
      }

      .cover-action-btn:hover {
        background: white;
        transform: scale(1.1);
      }

      .upload-status {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(52, 97, 232, 0.9);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 0.75rem;
        font-weight: 500;
      }

      .upload-spinner {
        width: 20px;
        height: 20px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-top: 2px solid white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 0.25rem;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .cover-image-info {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .image-input-compact {
        width: 100%;
        padding: 0.5rem 0.75rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        transition: all 0.2s ease;
        background: var(--gray-50);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .image-input-compact:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      /* Legacy Cover Image Editor (keeping for backward compatibility) */
      .cover-image-editor {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        border: 2px solid var(--primary);
        border-radius: 0.75rem;
        padding: 0.75rem;
        background: linear-gradient(
          135deg,
          rgba(52, 97, 232, 0.05) 0%,
          rgba(52, 97, 232, 0.02) 100%
        );
      }

      .cover-image-editor .cover-image-preview {
        width: 100%;
        max-width: 300px;
        height: 160px;
        border: 2px dashed var(--primary);
        border-radius: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(52, 97, 232, 0.05);
        overflow: hidden;
        transition: all 0.2s ease;
      }

      .cover-image-editor .cover-image-preview:hover {
        border-color: var(--primary-dark);
        background: rgba(52, 97, 232, 0.1);
      }

      .cover-image-editor .cover-image-preview img {
        max-width: 100%;
        max-height: 100%;
        object-fit: cover;
        border-radius: 0.5rem;
      }

      .cover-image-editor .cover-preview-container {
        position: relative;
        width: 100%;
        height: 100%;
      }

      .cover-image-editor .cover-preview-title-overlay {
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        padding: 0.5rem 1rem;
        border-radius: 8px 8px 0 0;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-bottom: none;
        margin-bottom: -1px;
        width: 90%;
      }

      .cover-image-editor .cover-preview-title {
        margin: 0;
        font-size: 0.875rem;
        font-weight: 600;
        color: #1a202c;
        font-family: var(--primary-font);
        text-align: center;
        line-height: 1.2;
        letter-spacing: 0.01em;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }

      .image-input {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        transition: all 0.2s ease;
        background: var(--gray-50);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .image-input:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      /* List Block */
      .list-block {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .list-items {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .list-item {
        display: flex;
        gap: 0.5rem;
        align-items: center;
        padding: 0.5rem;
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 0.75rem;
        transition: all 0.2s ease;
      }

      .list-item:hover {
        background: var(--gray-100);
        border-color: var(--gray-300);
      }

      .list-item input {
        flex: 1;
        padding: 0.5rem 0.75rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        background: var(--gray-50);
        transition: all 0.2s ease;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .list-item input:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .list-item-btn {
        width: 32px;
        height: 32px;
        border: none;
        background: var(--gray-200);
        border-radius: 0.5rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        color: var(--gray-600);
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .list-item-btn:hover {
        background: #fee2e2;
        color: #dc2626;
        transform: scale(1.05);
      }

      /* Wi-Fi QR Block */
      .wifi-qr-block {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .wifi-qr-content {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .wifi-qr-preview {
        margin-top: 0.5rem;
        min-height: 80px;
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        background: var(--gray-50);
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transition: all 0.2s ease;
      }

      .wifi-qr-preview:hover {
        border-color: var(--primary);
        background: var(--gray-100);
      }

      .wifi-qr-placeholder {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        color: var(--gray-400);
        font-size: 0.875rem;
        padding: 1rem;
        text-align: center;
      }

      .wifi-qr-placeholder i {
        font-size: 1.5rem;
        opacity: 0.7;
      }

      .wifi-qr-preview-container {
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        transition: all 0.2s ease;
      }

      .wifi-qr-preview-container:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
      }

      .wifi-qr-preview-container canvas {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        border-radius: 6px;
      }

      /* Export HTML QR code styling */
      .qr-code {
        width: 240px;
        height: 240px;
        background: #ffffff;
        margin: 0 auto;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid #f0f0f0;
        overflow: hidden;
      }

      .qr-code canvas {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
      }

      .qr-code img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }

      .wifi-qr-content .form-group {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .wifi-qr-content .form-label {
        font-size: 0.75rem;
        font-weight: 600;
        color: var(--gray-700);
        margin-bottom: 0.25rem;
      }

      .wifi-qr-content .form-input {
        width: 100%;
        padding: 0.5rem 0.75rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        transition: all 0.2s ease;
        background: var(--gray-50);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .wifi-qr-content .form-input:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .wifi-qr-content .form-input::placeholder {
        color: var(--gray-400);
      }

      .wifi-qr-content .checkbox-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        color: var(--gray-700);
        cursor: pointer;
        user-select: none;
        padding: 0.25rem;
        margin-top: 0.25rem;
      }

      .wifi-qr-content .checkbox-label input[type="checkbox"] {
        width: 1rem;
        height: 1rem;
        accent-color: var(--primary);
        cursor: pointer;
        margin: 0;
      }

      .wifi-qr-content .checkbox-label:hover {
        color: var(--gray-800);
      }

      .add-list-item-btn {
        padding: 0.875rem 1rem;
        background: var(--gray-50);
        border: 2px dashed var(--gray-300);
        border-radius: 0.75rem;
        color: var(--gray-500);
        cursor: pointer;
        text-align: center;
        font-size: 0.875rem;
        font-weight: 500;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .add-list-item-btn:hover {
        background: var(--gray-100);
        color: var(--gray-700);
        border-color: var(--gray-400);
      }

      /* Section Block */
      .section-block {
        padding: 0.5rem;
      }

      .section-block input {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 1.125rem;
        font-weight: 600;
        transition: all 0.2s ease;
        background: var(--gray-50);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .section-block input:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      /* Heading Block */
      .heading-block {
        padding: 0.5rem;
      }

      .heading-type-selector {
        display: flex;
        gap: 0.25rem;
        margin-bottom: 0.75rem;
        flex-wrap: wrap;
      }

      .heading-type-btn {
        padding: 0.25rem 0.5rem;
        border: 1px solid var(--gray-200);
        background: var(--gray-50);
        border-radius: 0.375rem;
        font-size: 0.7rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        color: var(--gray-600);
      }

      .heading-type-btn:hover {
        background: var(--gray-100);
        border-color: var(--gray-300);
      }

      .heading-type-btn.active {
        background: var(--primary);
        color: var(--white);
        border-color: var(--primary);
      }

      .heading-alignment-selector {
        display: flex;
        gap: 0.25rem;
        margin-bottom: 0.75rem;
        flex-wrap: wrap;
      }

      .alignment-btn {
        padding: 0.25rem 0.5rem;
        border: 1px solid var(--gray-200);
        background: var(--gray-50);
        border-radius: 0.375rem;
        font-size: 0.7rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        color: var(--gray-600);
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 32px;
      }

      .alignment-btn:hover {
        background: var(--gray-100);
        border-color: var(--gray-300);
      }

      .alignment-btn.active {
        background: var(--primary);
        color: var(--white);
        border-color: var(--primary);
      }

      .heading-input {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.2s ease;
        background: var(--gray-50);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .heading-input:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      /* Accordion Block */
      .accordion-block {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .accordion-items {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .accordion-item {
        border: 1px solid var(--gray-200);
        border-radius: 0.75rem;
        overflow: hidden;
        background: var(--white);
        transition: all 0.2s ease;
      }

      .accordion-item:hover {
        border-color: var(--gray-300);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }

      .accordion-item-header {
        background: var(--gray-50);
        padding: 0.75rem;
        border-bottom: 1px solid var(--gray-200);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.5rem;
      }

      .accordion-item-title {
        flex: 1;
        padding: 0.5rem 0.75rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        background: var(--gray-50);
        transition: all 0.2s ease;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .accordion-item-title:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .accordion-item-actions {
        display: flex;
        gap: 0.375rem;
      }

      .accordion-item-btn {
        width: 32px;
        height: 32px;
        border: none;
        background: var(--gray-200);
        border-radius: 0.5rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        color: var(--gray-600);
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .accordion-item-btn:hover {
        background: #fee2e2;
        color: #dc2626;
        transform: scale(1.05);
      }

      .accordion-item-content {
        padding: 1rem;
        background: var(--white);
      }

      .accordion-item-textarea {
        width: 100%;
        min-height: 100px;
        padding: 0.875rem 1rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-family: inherit;
        font-size: 0.875rem;
        line-height: 1.6;
        resize: vertical;
        background: var(--gray-50);
        transition: all 0.2s ease;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .accordion-item-textarea:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .add-accordion-item-btn {
        padding: 0.875rem 1rem;
        background: var(--gray-50);
        border: 2px dashed var(--gray-300);
        border-radius: 0.75rem;
        color: var(--gray-500);
        cursor: pointer;
        text-align: center;
        font-size: 0.875rem;
        font-weight: 500;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .add-accordion-item-btn:hover {
        background: var(--gray-100);
        color: var(--gray-700);
        border-color: var(--gray-400);
      }

      /* HTML Block */
      .html-block {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .html-toggle {
        display: flex;
        gap: 0.5rem;
        padding: 0.75rem;
        background: var(--gray-50);
        border-radius: 0.75rem;
      }

      .html-toggle-btn {
        padding: 0.625rem 1rem;
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        background: var(--white);
        cursor: pointer;
        font-size: 0.875rem;
        font-weight: 500;
        transition: all 0.2s ease;
        min-width: 80px;
        text-align: center;
      }

      .html-toggle-btn.active {
        background: var(--primary);
        color: var(--white);
        border-color: var(--primary);
        box-shadow: 0 2px 4px rgba(52, 97, 232, 0.2);
      }

      .html-toggle-btn:hover {
        background: var(--gray-100);
        transform: translateY(-1px);
      }

      .html-toggle-btn.active:hover {
        background: var(--primary);
      }

      .html-textarea {
        width: 100%;
        min-height: 200px;
        padding: 1rem 1.25rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.75rem;
        font-family: "Courier New", monospace;
        font-size: 0.875rem;
        line-height: 1.6;
        resize: vertical;
        background: var(--gray-50);
        transition: all 0.2s ease;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .html-textarea:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .html-preview {
        width: 100%;
        min-height: 200px;
        padding: 1rem 1.25rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.75rem;
        background: var(--white);
        overflow: auto;
      }

      .html-preview.empty {
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--gray-400);
        font-style: italic;
        background: var(--gray-50);
      }

      /* Icon Picker Styles */
      .icon-picker-btn {
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 0.375rem;
        padding: 0.5rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--gray-600);
        font-size: 0.875rem;
        transition: all 0.2s ease;
      }

      .icon-picker-btn:hover {
        background: var(--gray-100);
        color: var(--gray-800);
      }

      .icon-picker-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 2000;
        justify-content: center;
        align-items: center;
        backdrop-filter: blur(4px);
      }

      .icon-picker-modal.active {
        display: flex;
      }

      .icon-picker-content {
        background: var(--white);
        border-radius: 1.25rem;
        width: 90%;
        max-width: 600px;
        max-height: 80vh;
        overflow: hidden;
        box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
        border: 1px solid var(--border);
        display: flex;
        flex-direction: column;
      }

      .icon-picker-header {
        padding: 1rem 1.5rem 0.75rem 1.5rem;
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: var(--gray-50);
        border-radius: 1.25rem 1.25rem 0 0;
      }

      .icon-picker-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--gray-900);
      }

      .icon-picker-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--gray-400);
        padding: 0.5rem;
        border-radius: 0.5rem;
        transition: all 0.2s ease;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .icon-picker-close:hover {
        color: var(--gray-600);
        background: var(--gray-100);
      }

      .icon-picker-search {
        padding: 0.75rem 1.5rem;
        border-bottom: 1px solid var(--border);
        background: var(--white);
      }

      .icon-picker-search input {
        width: 100%;
        padding: 0.625rem 0.875rem;
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        background: var(--gray-50);
        transition: all 0.2s ease;
      }

      .icon-picker-search input:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .icon-picker-search-row {
        display: flex;
        gap: 0.75rem;
        align-items: center;
        margin-bottom: 0.5rem;
      }

      .icon-picker-search-row input {
        flex: 1;
        margin: 0;
      }

      .browse-more-icons-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 0.625rem 0.875rem;
        border-radius: 0.5rem;
        font-size: 0.8rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 0.375rem;
        white-space: nowrap;
        box-shadow: 0 2px 4px rgba(52, 97, 232, 0.2);
      }

      .browse-more-icons-btn:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(52, 97, 232, 0.3);
      }

      .browse-more-icons-btn:active {
        transform: translateY(0);
      }

      .icon-browse-help {
        color: var(--gray-600);
        font-size: 0.75rem;
        text-align: center;
        padding: 0.375rem;
        background: var(--gray-50);
        border-radius: 0.375rem;
        border: 1px solid var(--gray-200);
      }

      .icon-browse-help strong {
        color: var(--primary);
        font-weight: 600;
      }

      .custom-icon-section {
        margin-top: 0.75rem;
        padding: 0.75rem;
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .custom-icon-input-row {
        display: flex;
        gap: 0.5rem;
        align-items: center;
        margin-bottom: 0.5rem;
      }

      .custom-icon-input-row input {
        flex: 1;
        padding: 0.875rem 1rem;
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-family: "Courier New", monospace;
        background: var(--gray-50);
        transition: all 0.2s ease;
      }

      .custom-icon-input-row input:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .add-custom-icon-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 0.875rem 1rem;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        white-space: nowrap;
        box-shadow: 0 2px 4px rgba(52, 97, 232, 0.2);
      }

      .add-custom-icon-btn:disabled {
        background: var(--gray-300);
        cursor: not-allowed;
        box-shadow: none;
      }

      .add-custom-icon-btn:not(:disabled):hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(52, 97, 232, 0.3);
      }

      .custom-icon-preview {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem;
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        color: var(--gray-600);
      }

      .custom-icon-preview i {
        font-size: 1.25rem;
        color: var(--primary);
        width: 20px;
        text-align: center;
      }

      .custom-icon-preview.valid {
        background: rgba(34, 197, 94, 0.1);
        border-color: #22c55e;
        color: #166534;
      }

      .custom-icon-preview.invalid {
        background: rgba(239, 68, 68, 0.1);
        border-color: #ef4444;
        color: #991b1b;
      }

      .icon-picker-body {
        flex: 1;
        overflow-y: auto;
        padding: 0.75rem 1.5rem 1rem 1.5rem;
        background: var(--white);
      }

      .icon-categories {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 0.75rem;
        flex-wrap: wrap;
      }

      .icon-category {
        padding: 0.5rem 0.875rem;
        background: var(--gray-100);
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        cursor: pointer;
        font-size: 0.8rem;
        font-weight: 500;
        color: var(--gray-700);
        transition: all 0.2s ease;
      }

      .icon-category.active {
        background: var(--primary);
        color: var(--white);
        border-color: var(--primary);
        box-shadow: 0 2px 4px rgba(52, 97, 232, 0.2);
      }

      .icon-category:hover {
        background: var(--gray-200);
        transform: translateY(-1px);
      }

      .icon-category.active:hover {
        background: var(--primary);
      }

      .icon-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(85px, 1fr));
        gap: 0.5rem;
        margin-top: 0.75rem;
      }

      .icon-option {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1rem 0.5rem;
        border: 1px solid var(--gray-200);
        border-radius: 0.5rem;
        cursor: pointer;
        transition: all 0.2s ease;
        background: var(--white);
      }

      .icon-option:hover {
        border-color: var(--primary);
        background: var(--gray-50);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .icon-option.selected {
        border-color: var(--primary);
        background: var(--primary);
        color: var(--white);
        box-shadow: 0 4px 12px rgba(52, 97, 232, 0.3);
      }

      .icon-option i {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
      }

      .icon-option span {
        font-size: 0.75rem;
        text-align: center;
        line-height: 1.2;
        word-break: break-word;
        font-weight: 500;
      }

      .icon-picker-footer {
        padding: 1rem 1.5rem;
        border-top: 1px solid var(--border);
        display: flex;
        gap: 0.75rem;
        justify-content: flex-end;
        background: var(--gray-50);
        border-radius: 0 0 1.25rem 1.25rem;
      }

      @media (max-width: 768px) {
        .icon-picker-content {
          width: 95%;
          max-height: 90vh;
        }

        .icon-picker-search-row {
          flex-direction: column;
          gap: 0.75rem;
        }

        .browse-more-icons-btn {
          width: 100%;
          justify-content: center;
          padding: 1rem 1.25rem;
          font-size: 0.9rem;
        }

        .icon-browse-help {
          font-size: 0.75rem;
          padding: 0.75rem;
        }

        .icon-grid {
          grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
          gap: 0.25rem;
        }

        .icon-option {
          padding: 0.75rem 0.25rem;
        }

        .icon-option i {
          font-size: 1.25rem;
        }

        .icon-option span {
          font-size: 0.7rem;
        }

        .custom-icon-input-row {
          flex-direction: column;
          gap: 0.75rem;
        }

        .add-custom-icon-btn {
          width: 100%;
          justify-content: center;
        }

        .custom-icon-preview {
          font-size: 0.8rem;
          padding: 0.875rem;
        }
      }

      /* Responsive Editor Improvements */

      /* Slightly compact sidebar for screens just below the main size */
      @media (max-width: 1400px) and (min-width: 1281px) {
        .sidebar {
          width: 380px; /* Slightly reduced from 420px */
        }

        .sidebar-header {
          padding: 0.875rem 2rem; /* Slightly reduced padding */
        }
      }

      /* Compact sidebar for mid-range screens (1280x626 down to tablets) */
      @media (max-width: 1280px) and (max-height: 626px) and (min-width: 769px) {
        .sidebar {
          width: 320px; /* Reduced from 420px */
        }

        .sidebar-header {
          padding: 0.75rem 1.5rem; /* Reduced from 1rem 2.5rem */
        }

        .sidebar-header h1 {
          font-size: 1.75rem; /* Reduced from 2.25rem */
          margin-bottom: 0.25rem; /* Reduced from 0.5rem */
        }

        .header-logo {
          width: 70px; /* Reduced from 100px */
          height: 70px; /* Reduced from 100px */
        }

        .header-content {
          gap: 1rem; /* Reduced from 1.75rem */
        }

        .accordion-header {
          padding: 0.875rem 1rem; /* Reduced padding */
        }

        .accordion-title {
          font-size: 0.9rem; /* Slightly smaller */
        }

        .form-input,
        .form-textarea {
          padding: 0.6rem 0.75rem; /* Compact form elements */
          font-size: 0.85rem;
        }

        .form-group {
          margin-bottom: 1rem; /* Reduced spacing */
        }

        .image-upload-preview {
          height: 100px; /* Reduced from 140px */
        }

        .sidebar-content {
          padding: 0.5rem; /* Reduced from 0.75rem */
        }

        .accordion-section {
          margin-bottom: 0.5rem; /* Reduced spacing */
        }

        .btn {
          padding: 0.5rem 1rem; /* Compact buttons */
          font-size: 0.85rem;
        }

        .device-btn {
          padding: 0.5rem 0.875rem; /* Compact device buttons */
          font-size: 0.75rem;
        }

        .form-label {
          font-size: 0.85rem; /* Compact labels */
          margin-bottom: 0.375rem;
        }

        .form-help {
          font-size: 0.8rem; /* Compact help text */
        }

        .grid-item {
          padding: 0.75rem; /* Compact grid items */
          margin-bottom: 0.5rem;
        }

        .grid-item-icon {
          width: 2rem; /* Smaller icons */
          height: 2rem;
          font-size: 0.875rem;
        }

        .accordion-content {
          padding: 1rem; /* Compact accordion content */
        }

        .accordion-number {
          width: 2rem; /* Smaller accordion numbers */
          height: 2rem;
          font-size: 0.75rem;
        }

        .action-buttons {
          padding: 1rem; /* Compact action buttons area */
          gap: 0.75rem;
        }

        .action-buttons .btn {
          flex: 1; /* Make buttons equal width */
        }
      }

      /* Hide preview on mobile and show professional message */
      @media (max-width: 768px) {
        .container {
          flex-direction: row; /* Keep normal layout, not stacked */
        }

        .sidebar {
          width: 100%;
          height: 100vh; /* Full height */
          border-right: none;
        }

        .preview-section {
          display: none !important; /* Hide bottom preview completely */
        }

        .mobile-preview-toggle {
          display: block !important;
        }

        /* Reduce padding to fix accordion spacing issues */
        .sidebar-content {
          padding-right: 1rem; /* Reduced from 7rem */
          padding-left: 1rem;
          padding-top: 1rem;
          padding-bottom: 1rem;
        }

        /* Optimize action buttons spacing for mobile */
        .action-buttons {
          padding: 1rem !important;
          gap: 0.75rem !important;
          margin-bottom: 0 !important;
        }

        .action-buttons .btn {
          flex: 1;
          padding: 0.875rem 1rem;
          font-size: 0.9rem;
        }

        /* Fix accordion content spacing */
        .accordion-content {
          padding: 1rem !important;
        }

        /* Adjust mobile preview toggle position to avoid sidebar content overlap */
        .mobile-preview-toggle {
          top: 1rem;
          right: 1rem;
          z-index: 1600;
        }

        /* Fix form and accordion spacing */
        .form-group {
          margin-bottom: 1rem !important;
        }

        .accordion-section {
          margin-bottom: 0.5rem !important;
        }

        /* Ensure sidebar scrolls properly without content cutoff */
        .sidebar {
          overflow-y: auto;
        }
      }

      /* Mobile notice styling */
      .mobile-preview-notice {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
        color: white;
        padding: 1.25rem 1.5rem;
        text-align: center;
        font-size: 0.9rem;
        font-weight: 500;
        box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        animation: slideUpNotice 0.5s ease-out;
        display: none;
        transition: transform 0.3s ease, opacity 0.3s ease;
      }

      .mobile-preview-notice.dismissed {
        transform: translateY(100%);
        opacity: 0;
      }

      .notice-content {
        margin-bottom: 1rem;
      }

      .notice-dismiss-btn {
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 0.625rem 1.5rem;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      .notice-dismiss-btn:hover {
        background: rgba(255, 255, 255, 0.25);
        border-color: rgba(255, 255, 255, 0.5);
        transform: translateY(-1px);
      }

      .notice-dismiss-btn:active {
        transform: translateY(0);
      }

      @media (max-width: 768px) {
        .mobile-preview-notice {
          display: block;
        }
      }

      @keyframes slideUpNotice {
        from {
          transform: translateY(100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .mobile-preview-notice .notice-icon {
        display: inline-block;
        margin-right: 0.5rem;
        font-size: 1.1rem;
      }

      .mobile-preview-notice .notice-title {
        font-weight: 600;
        margin-bottom: 0.25rem;
        display: block;
      }

      .mobile-preview-notice .notice-text {
        opacity: 0.9;
        line-height: 1.4;
      }

      /* Overlay Preview System for Tablets */
      .preview-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        z-index: 2000;
        display: none;
        justify-content: center;
        align-items: center;
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
        animation: fadeIn 0.3s ease;
      }

      .preview-overlay.active {
        display: flex;
      }

      .preview-overlay-content {
        width: 95%;
        height: 95%;
        background: var(--white);
        border-radius: 1rem;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        position: relative;
        overflow: hidden;
      }

      .preview-overlay-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem 1.5rem;
        background: var(--gray-50);
        border-bottom: 1px solid var(--border);
      }

      .preview-overlay-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--gray-900);
      }

      .preview-overlay-close {
        background: var(--gray-200);
        border: none;
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .preview-overlay-close:hover {
        background: var(--gray-300);
        transform: scale(1.05);
      }

      .preview-overlay-iframe {
        width: 100%;
        height: calc(100% - 70px);
        border: none;
      }

      .tablet-preview-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        background: var(--primary);
        color: white;
        border: none;
        padding: 0.75rem 1rem;
        border-radius: 0.75rem;
        font-size: 0.875rem;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 1500;
        transition: all 0.2s ease;
        display: none;
      }

      .tablet-preview-toggle:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
      }

      /* Mobile Preview Toggle */
      .mobile-preview-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        background: var(--primary);
        color: white;
        border: none;
        padding: 0.625rem 0.875rem;
        border-radius: 0.75rem;
        font-size: 0.8rem;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 1500;
        transition: all 0.2s ease;
        display: none;
      }

      .mobile-preview-toggle:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
      }

      /* Mobile Preview Overlay */
      .mobile-preview-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.9);
        z-index: 2000;
        display: none;
        justify-content: center;
        align-items: center;
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
        animation: fadeIn 0.3s ease;
      }

      .mobile-preview-overlay.active {
        display: flex;
      }

      .mobile-preview-overlay-content {
        width: 375px; /* Mobile width */
        height: 90%;
        background: var(--white);
        border-radius: 1.5rem;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        position: relative;
        overflow: hidden;
        border: 8px solid var(--gray-800); /* Mobile frame */
      }

      .mobile-preview-overlay-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.75rem 1rem;
        background: var(--gray-50);
        border-bottom: 1px solid var(--border);
      }

      .mobile-preview-overlay-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--gray-900);
      }

      .mobile-preview-overlay-close {
        background: var(--gray-200);
        border: none;
        width: 2rem;
        height: 2rem;
        border-radius: 0.375rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .mobile-preview-overlay-close:hover {
        background: var(--gray-300);
        transform: scale(1.05);
      }

      .mobile-preview-overlay-iframe {
        width: 100%;
        height: calc(100% - 60px);
        border: none;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @media (max-width: 1024px) and (min-width: 769px) {
        .container {
          flex-direction: row; /* Keep normal layout, not stacked */
        }

        .sidebar {
          width: 100%;
          height: 100vh; /* Full height instead of 50vh */
          border-right: none;
          border-bottom: none; /* Remove bottom border since no bottom section */
        }

        .preview-section {
          display: none !important; /* Hide bottom preview completely */
        }

        .tablet-preview-toggle {
          display: block;
        }

        /* Add some padding to sidebar to account for toggle button */
        .sidebar-content {
          padding-right: 7rem;
        }

        /* Adjust toggle button for smaller tablet screens */
        @media (max-width: 900px) {
          .tablet-preview-toggle {
            top: 0.75rem;
            right: 0.75rem;
            padding: 0.625rem 0.875rem;
            font-size: 0.8rem;
          }

          .sidebar-content {
            padding-right: 6rem;
          }
        }
      }

      .form-help {
        color: var(--gray-500);
        font-size: 0.875rem;
        margin-top: 0.25rem;
      }

      /* Image Upload Styles */
      .image-upload-container {
        position: relative;
        width: 100%;
      }

      .image-upload-input {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
        z-index: 2;
      }

      .image-upload-preview {
        width: 100%;
        height: 140px;
        border: 2px dashed var(--gray-300);
        border-radius: 0.75rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: var(--gray-50);
        color: var(--gray-500);
        font-size: 0.875rem;
        transition: all 0.2s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
      }

      .image-upload-preview::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          transparent 30%,
          rgba(255, 255, 255, 0.1) 50%,
          transparent 70%
        );
        transform: translateX(-100%);
        transition: transform 0.6s ease;
      }

      .image-upload-preview:hover::before {
        transform: translateX(100%);
      }

      .image-upload-preview:hover {
        border-color: var(--primary);
        background: var(--gray-100);
        color: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
      }

      .image-upload-preview.has-image {
        border-style: solid;
        border-color: var(--primary);
        background: var(--white);
        padding: 0.5rem;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .image-upload-preview i {
        font-size: 2rem;
        margin-bottom: 0.75rem;
        opacity: 0.7;
      }

      /* Enhanced Font Select */
      .font-select-display {
        width: 100%;
        padding: 0.875rem 1rem;
        border: 2px solid var(--gray-300);
        border-radius: 0.75rem;
        font-size: 0.875rem;
        transition: all 0.2s ease;
        background: var(--white);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.05);
      }

      .font-select-display:hover {
        border-color: var(--primary);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .font-select-display:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgb(79 70 229 / 0.1), 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      /* Active state when dropdown is open */
      .font-select-container:has(.font-dropdown.active) .font-select-display {
        border-color: var(--primary);
        background: var(--gray-50);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      /* Custom Scrollbar for Sidebar */
      .sidebar-content::-webkit-scrollbar {
        width: 6px;
      }

      .sidebar-content::-webkit-scrollbar-track {
        background: var(--gray-100);
      }

      .sidebar-content::-webkit-scrollbar-thumb {
        background: var(--gray-300);
        border-radius: 3px;
      }

      .sidebar-content::-webkit-scrollbar-thumb:hover {
        background: var(--gray-400);
      }

      /* Enhanced Form Styling */
      .form-input::placeholder,
      .form-textarea::placeholder {
        color: var(--gray-400);
        font-style: italic;
      }

      /* Improved Guide Pages */
      .grid-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem;
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: 0.75rem;
        margin-bottom: 0.75rem;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
        transition: all 0.2s ease;
      }

      .grid-item:hover {
        border-color: var(--primary);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
      }

      .grid-item-icon {
        width: 2.5rem;
        height: 2.5rem;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: white;
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      /* Font Select Styles */
      .font-select-container {
        position: relative;
        width: 100%;
        z-index: 100;
      }

      .font-preview {
        font-weight: 500;
        color: var(--gray-900);
      }

      .font-dropdown {
        position: static;
        background: var(--white);
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -1px rgb(0 0 0 / 0.06);
        z-index: 1000;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease, opacity 0.3s ease, margin 0.3s ease;
        margin-top: 0;
        opacity: 0;
        border: none;
        box-shadow: none;
      }

      .font-dropdown.active {
        display: block;
        max-height: 400px;
        margin-top: 0.5rem;
        opacity: 1;
        border: 1px solid var(--gray-300);
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -1px rgb(0 0 0 / 0.06);
        overflow-y: auto;
      }

      /* Custom scrollbar for font dropdown */
      .font-dropdown::-webkit-scrollbar {
        width: 6px;
      }

      .font-dropdown::-webkit-scrollbar-track {
        background: var(--gray-100);
        border-radius: 3px;
      }

      .font-dropdown::-webkit-scrollbar-thumb {
        background: var(--gray-300);
        border-radius: 3px;
      }

      .font-dropdown::-webkit-scrollbar-thumb:hover {
        background: var(--gray-400);
      }

      .font-option {
        padding: 0.75rem 1rem;
        cursor: pointer;
        transition: all 0.15s ease;
        border-bottom: 1px solid var(--gray-100);
        display: flex;
        align-items: center;
      }

      .font-option:last-child {
        border-bottom: none;
      }

      .font-option:hover {
        background-color: var(--primary);
        color: var(--white);
        transform: translateX(4px);
      }

      .font-option:active {
        background-color: var(--primary-dark);
        transform: translateX(4px);
      }

      .font-sample {
        font-size: 0.875rem;
        font-weight: 500;
        color: inherit;
        display: block;
        transition: color 0.15s ease;
      }

      /* Image Upload Additional Styles */
      .image-upload-preview img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        border-radius: 0.25rem;
      }

      .image-upload-preview span {
        text-align: center;
        line-height: 1.4;
      }

      .image-upload-preview.has-image span {
        display: none;
      }

      /* Add Font Button Styles */
      .add-font-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 0.5rem 0.875rem;
        border-radius: 0.5rem;
        font-size: 0.75rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 0.375rem;
        margin-left: auto;
      }

      .add-font-btn:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(64, 113, 244, 0.3);
      }

      .add-font-btn:active {
        transform: translateY(0);
      }

      /* Font Size Controls Styles */
      .font-size-controls {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        margin-top: 0.5rem;
      }

      .font-size-control {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .font-size-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--gray-700);
        margin: 0;
      }

      .font-size-slider-container {
        display: flex;
        align-items: center;
        gap: 1rem;
        background: var(--gray-50);
        padding: 0.875rem 1rem;
        border-radius: 0.75rem;
        border: 1px solid var(--gray-200);
      }

      .font-size-slider {
        flex: 1;
        height: 6px;
        -webkit-appearance: none;
        appearance: none;
        background: var(--gray-300);
        border-radius: 3px;
        outline: none;
        cursor: pointer;
      }

      .font-size-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        background: var(--primary);
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease;
      }

      .font-size-slider::-webkit-slider-thumb:hover {
        background: var(--primary-dark);
        transform: scale(1.1);
      }

      .font-size-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: var(--primary);
        border-radius: 50%;
        cursor: pointer;
        border: none;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease;
      }

      .font-size-slider::-moz-range-thumb:hover {
        background: var(--primary-dark);
        transform: scale(1.1);
      }

      .font-size-value {
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--primary);
        min-width: 3rem;
        text-align: center;
        background: white;
        padding: 0.375rem 0.75rem;
        border-radius: 0.5rem;
        border: 1px solid var(--gray-300);
      }

      /* Add Font Modal Styles */
      .add-font-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 2000;
        justify-content: center;
        align-items: center;
      }

      .add-font-modal.active {
        display: flex;
      }

      .add-font-modal-content {
        background: white;
        border-radius: 0.75rem;
        width: 90%;
        max-width: 500px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }

      .add-font-modal-header {
        padding: 1.5rem;
        border-bottom: 1px solid var(--gray-200);
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .add-font-modal-header h3 {
        margin: 0;
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--gray-900);
      }

      .add-font-modal-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--gray-500);
        cursor: pointer;
        padding: 0.25rem;
        border-radius: 0.25rem;
        transition: all 0.2s ease;
      }

      .add-font-modal-close:hover {
        background: var(--gray-100);
        color: var(--gray-700);
      }

      .add-font-modal-body {
        padding: 1.5rem;
      }

      .font-input-group {
        margin-bottom: 1rem;
      }

      .font-input-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: var(--gray-700);
      }

      .font-input-group input {
        width: 100%;
        padding: 0.75rem;
        border: 2px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        transition: all 0.2s ease;
      }

      .font-input-group input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(64, 113, 244, 0.1);
      }

      .font-help-text {
        font-size: 0.75rem;
        color: var(--gray-500);
        margin-top: 0.25rem;
        line-height: 1.4;
      }

      .font-preview-box {
        margin: 1rem 0;
        padding: 1rem;
        border: 2px solid var(--gray-200);
        border-radius: 0.5rem;
        background: var(--gray-50);
        min-height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .font-preview-text {
        font-size: 1.125rem;
        color: var(--gray-700);
        text-align: center;
      }

      .font-modal-actions {
        display: flex;
        gap: 0.75rem;
        justify-content: flex-end;
        margin-top: 1.5rem;
      }

      .font-modal-btn {
        padding: 0.625rem 1.25rem;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        border: none;
      }

      .font-modal-btn.secondary {
        background: var(--gray-100);
        color: var(--gray-700);
      }

      .font-modal-btn.secondary:hover {
        background: var(--gray-200);
      }

      .font-modal-btn.primary {
        background: var(--primary);
        color: white;
      }

      .font-modal-btn.primary:hover {
        background: var(--primary-dark);
      }

      .font-modal-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Success Message Animations */
      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      .image-upload-preview.has-image i {
        display: none;
      }

      /* Logo Type Selector */
      .logo-type-selector {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
      }

      .logo-type-btn {
        flex: 1;
        padding: 0.875rem 1rem;
        border: 2px solid var(--gray-300);
        border-radius: 0.75rem;
        background: var(--white);
        color: var(--gray-700);
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-weight: 600;
        font-size: 0.875rem;
        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.05);
      }

      .logo-type-btn.active {
        border-color: var(--primary);
        background: var(--primary);
        color: var(--white);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .logo-type-btn:hover:not(.active) {
        background: var(--gray-50);
        border-color: var(--gray-400);
        transform: translateY(-1px);
      }

      .logo-type-btn i {
        font-size: 1rem;
      }

      /* Logo Section */
      .logo-section {
        display: none;
        margin-bottom: 1.5rem;
      }

      .logo-section.active {
        display: block;
      }

      /* Profile Preview */
      .profile-preview {
        border-radius: 50% !important;
        overflow: hidden;
        width: 140px !important;
        height: 140px !important;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .profile-preview img {
        border-radius: 50%;
        object-fit: cover;
        width: 100%;
        height: 100%;
      }

      .profile-preview i {
        font-size: 2.5rem;
      }

      /* Size Control */
      .logo-size-control {
        margin-top: 1.5rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--gray-200);
      }

      .size-slider-container {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 0.5rem;
      }

      .size-slider {
        flex: 1;
        height: 8px;
        background: var(--gray-200);
        border-radius: 4px;
        appearance: none;
        cursor: pointer;
        outline: none;
        transition: all 0.2s ease;
      }

      .size-slider::-webkit-slider-thumb {
        appearance: none;
        width: 20px;
        height: 20px;
        background: var(--primary);
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease;
      }

      .size-slider::-webkit-slider-thumb:hover {
        background: var(--primary-dark);
        transform: scale(1.1);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }

      .size-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: var(--primary);
        border-radius: 50%;
        cursor: pointer;
        border: none;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .size-display {
        min-width: 60px;
        padding: 0.5rem 0.75rem;
        background: var(--gray-100);
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        text-align: center;
        font-weight: 600;
        color: var(--gray-700);
        font-size: 0.875rem;
      }

      /* Customization Section Styling */
      .customization-section {
        margin-bottom: 2rem;
        padding: 1.5rem;
        background: var(--white);
        border-radius: 0.75rem;
        border: 1px solid var(--gray-200);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        position: relative;
      }

      .customization-section:last-child {
        margin-bottom: 0;
      }

      .customization-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        border-radius: 0.75rem 0.75rem 0 0;
      }

      .section-header {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid var(--gray-100);
      }

      .section-header i {
        font-size: 1.25rem;
        color: var(--primary);
        width: 24px;
        text-align: center;
      }

      .section-header h4 {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--gray-900);
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 0.025em;
      }

      /* Enhanced form group spacing within sections */
      .customization-section .form-group {
        margin-bottom: 1.5rem;
      }

      .customization-section .form-group:last-child {
        margin-bottom: 0;
      }

      /* Section-specific styling */
      .customization-section:nth-child(1)::before {
        background: linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%);
      }

      .customization-section:nth-child(2)::before {
        background: linear-gradient(90deg, #10b981 0%, #059669 100%);
      }

      .customization-section:nth-child(3)::before {
        background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);
      }

      .customization-section:nth-child(4)::before {
        background: linear-gradient(90deg, #8b5cf6 0%, #7c3aed 100%);
      }

      /* Section header icon colors */
      .customization-section:nth-child(1) .section-header i {
        color: #3b82f6;
      }

      .customization-section:nth-child(2) .section-header i {
        color: #10b981;
      }

      .customization-section:nth-child(3) .section-header i {
        color: #f59e0b;
      }

      .customization-section:nth-child(4) .section-header i {
        color: #8b5cf6;
      }

      /* Image Upload Interface */
      .image-upload-container {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .image-upload-area {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2rem 1.5rem;
        border: 2px dashed var(--gray-300);
        border-radius: 0.75rem;
        background: var(--gray-50);
        cursor: pointer;
        transition: all 0.3s ease;
        min-height: 120px;
        position: relative;
        overflow: hidden;
      }

      .image-upload-area:hover {
        border-color: var(--primary);
        background: var(--gray-100);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .image-upload-area.drag-over {
        border-color: var(--primary);
        background: rgba(52, 97, 232, 0.05);
        transform: scale(1.02);
        box-shadow: 0 8px 24px rgba(52, 97, 232, 0.15);
      }

      .image-upload-area i {
        font-size: 2rem;
        color: var(--gray-400);
        margin-bottom: 0.75rem;
        transition: all 0.3s ease;
      }

      .image-upload-area:hover i {
        color: var(--primary);
        transform: scale(1.1);
      }

      .image-upload-area p {
        margin: 0 0 0.5rem 0;
        font-size: 1rem;
        font-weight: 500;
        color: var(--gray-700);
        text-align: center;
      }

      .upload-hint {
        font-size: 0.75rem;
        color: var(--gray-500);
        text-align: center;
      }

      .image-url-fallback {
        position: relative;
      }

      .image-url-fallback::before {
        content: "OR";
        position: absolute;
        top: -0.5rem;
        left: 50%;
        transform: translateX(-50%);
        background: var(--white);
        padding: 0 0.75rem;
        font-size: 0.75rem;
        color: var(--gray-500);
        font-weight: 500;
        z-index: 1;
      }

      .image-url-fallback .image-input {
        border-top: 1px solid var(--gray-200);
        border-radius: 0.75rem;
        background: var(--white);
      }

      .image-preview {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 1.5rem;
        border: 1px solid var(--gray-200);
        border-radius: 0.75rem;
        background: var(--gray-50);
        min-height: 120px;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
      }

      .image-preview.empty {
        color: var(--gray-400);
        font-size: 0.875rem;
        text-align: center;
      }

      .image-preview.empty i {
        font-size: 2rem;
        margin-bottom: 0.5rem;
        opacity: 0.5;
      }

      .image-preview.empty p {
        margin: 0;
        font-size: 0.875rem;
        color: var(--gray-500);
      }

      .image-preview img {
        max-width: 100%;
        max-height: 200px;
        border-radius: 0.5rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }

      .image-preview img:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      }

      /* Responsive design for icon box */
      @media (max-width: 768px) {
        .icon-box-content {
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        .icon-selector {
          align-items: center;
        }
      }

      /* Maps Section Styles */
      .maps-status {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px;
        background: var(--gray-50);
        border-radius: 8px;
        border: 1px solid var(--border);
        font-size: 0.9rem;
      }

      .maps-status i {
        font-size: 0.8rem;
      }

      .maps-status .text-gray {
        color: var(--gray-500);
      }

      .maps-status .text-success {
        color: var(--success);
      }

      /* Maps Customizer Modal */
      .maps-customizer-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 10000;
        display: none;
        align-items: center;
        justify-content: center;
      }

      .maps-customizer-content {
        width: 95%;
        height: 95%;
        background: white;
        border-radius: 12px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
      }

      .maps-customizer-header {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: white;
        padding: 1rem 1.5rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .maps-customizer-header h3 {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .maps-customizer-close {
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0.25rem;
        border-radius: 4px;
        transition: background-color 0.2s;
      }

      .maps-customizer-close:hover {
        background: rgba(255, 255, 255, 0.1);
      }

      .maps-customizer-iframe {
        width: 100%;
        height: calc(100% - 60px);
        border: none;
      }

      /* Info Block Styles */
      .info-block-editor {
        background: var(--white);
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .info-block-items {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .info-block-items .info-block-item {
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 1rem;
        background: var(--gray-50);
        max-height: 320px;
        min-height: 220px;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .info-block-items .info-block-item-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        align-items: center;
        max-height: 320px;
      }

      .info-block-items .info-block-image-section {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        max-height: 320px;
        min-width: 180px;
        align-items: center;
        justify-content: center;
      }

      .info-block-items .info-block-image-preview {
        position: relative;
        width: 100%;
        height: 150px;
        border: 2px dashed var(--border);
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: var(--white);
        overflow: hidden;
        cursor: pointer;
        transition: all 0.2s ease;
        max-height: 320px;
      }

      .info-block-items .info-block-image-preview img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        max-height: 320px;
        min-height: 180px;
      }

      .info-block-items .info-block-text-section {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        align-items: center;
        justify-content: center;
        text-align: center;
        max-height: 320px;
        overflow: auto;
      }

      .info-block-items .info-block-field input,
      .info-block-items .info-block-field textarea {
        text-align: center;
      }

      @media (max-width: 768px) {
        .info-block-items .info-block-item,
        .info-block-items .info-block-item-content {
          max-height: 420px;
        }
        .info-block-items .info-block-image-section {
          height: 200px;
          max-height: 200px;
          min-width: 0;
        }
        .info-block-items .info-block-image-preview img {
          max-height: 200px;
          min-height: 100px;
        }
        .info-block-items .info-block-text-section {
          max-height: 220px;
        }
      }

      /* Info Block Editor Modern UI */
      .info-block-items .info-block-item {
        display: flex;
        flex-direction: row;
        align-items: stretch;
        background: #fff;
        border-radius: 16px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.07);
        border: 1.5px solid var(--border);
        padding: 0;
        overflow: hidden;
        transition: box-shadow 0.2s, border-color 0.2s;
        position: relative;
        min-height: 160px;
        margin-bottom: 0.5rem;
      }
      .info-block-items .info-block-item:hover {
        box-shadow: 0 8px 32px rgba(52, 97, 232, 0.1);
        border-color: var(--primary);
      }
      .info-block-items .info-block-item-header {
        position: absolute;
        top: 16px;
        left: 16px;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        z-index: 2;
      }
      .info-block-items .info-block-number {
        background: var(--primary);
        color: #fff;
        font-weight: 700;
        font-size: 1rem;
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px rgba(52, 97, 232, 0.1);
        border: 2px solid #fff;
      }
      .info-block-items .info-block-item-actions {
        display: flex;
        gap: 0.25rem;
      }
      .info-block-items .info-block-reverse-btn,
      .info-block-items .info-block-remove-btn {
        background: var(--gray-100);
        border: none;
        border-radius: 6px;
        padding: 0.4rem 0.6rem;
        cursor: pointer;
        font-size: 1rem;
        color: var(--gray-700);
        transition: background 0.2s, color 0.2s;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
      }
      .info-block-items .info-block-reverse-btn.active {
        background: var(--primary);
        color: #fff;
      }
      .info-block-items .info-block-reverse-btn:hover,
      .info-block-items .info-block-remove-btn:hover {
        background: var(--primary);
        color: #fff;
      }
      .info-block-items .info-block-item-content {
        display: flex;
        flex-direction: row;
        align-items: stretch;
        width: 100%;
        gap: 0;
        padding: 0;
      }
      .info-block-items .info-block-image-section {
        flex: 0 0 180px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: var(--gray-50);
        border-right: 1.5px solid var(--border);
        min-width: 140px;
        max-width: 220px;
        padding: 1.5rem 1rem;
        position: relative;
      }
      .info-block-items .info-block-image-preview {
        width: 120px;
        height: 120px;
        border-radius: 12px;
        border: 2px dashed var(--primary);
        background: #f3f4f6;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        margin-bottom: 0.5rem;
        position: relative;
        transition: border-color 0.2s;
        cursor: pointer;
      }
      .info-block-items .info-block-image-preview.empty {
        color: var(--gray-400);
        background: #f3f4f6;
      }
      .info-block-items .info-block-image-preview img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }
      .info-block-items .info-block-image-preview:hover {
        border-color: var(--primary-dark);
      }
      .info-block-items .info-block-image-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(52, 97, 232, 0.08);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.2s;
      }
      .info-block-items
        .info-block-image-preview:hover
        .info-block-image-overlay {
        opacity: 1;
      }
      .info-block-items .info-block-image-actions {
        display: flex;
        gap: 0.5rem;
      }
      .info-block-items .info-block-image-action-btn {
        background: var(--primary);
        color: #fff;
        border: none;
        border-radius: 6px;
        padding: 0.4rem 0.6rem;
        cursor: pointer;
        font-size: 1rem;
        transition: background 0.2s;
      }
      .info-block-items .info-block-image-action-btn:hover {
        background: var(--primary-dark);
      }
      .info-block-items .info-block-upload-status {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.85);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-size: 0.9rem;
        color: var(--gray-600);
        z-index: 2;
      }
      .info-block-items .info-block-image-info {
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }
      .info-block-items .info-block-image-input {
        padding: 0.4rem 0.6rem;
        border: 1px solid var(--border);
        border-radius: 6px;
        font-size: 0.85rem;
        background: #fff;
        margin-bottom: 0.25rem;
        transition: border-color 0.2s;
      }
      .info-block-items .info-block-image-input:focus {
        outline: none;
        border-color: var(--primary);
      }
      .info-block-items .info-block-text-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
        padding: 1.5rem 2rem;
        gap: 1rem;
        min-width: 0;
        background: transparent;
      }
      .info-block-items .info-block-field {
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }
      .info-block-items .info-block-field label {
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--gray-700);
        margin-bottom: 0.15rem;
        text-transform: uppercase;
        letter-spacing: 0.02em;
      }
      .info-block-items .info-block-field input,
      .info-block-items .info-block-field textarea {
        padding: 0.5rem 0.75rem;
        border: 1.5px solid var(--border);
        border-radius: 6px;
        font-size: 1rem;
        background: #fff;
        transition: border-color 0.2s;
        text-align: left;
        font-family: inherit;
      }
      .info-block-items .info-block-field input:focus,
      .info-block-items .info-block-field textarea:focus {
        outline: none;
        border-color: var(--primary);
      }
      .info-block-items .info-block-field textarea {
        min-height: 60px;
        resize: vertical;
      }
      .info-block-items .add-info-block-btn {
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 8px;
        padding: 0.75rem 1rem;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-weight: 500;
        margin-top: 1rem;
        font-size: 1rem;
        box-shadow: 0 2px 8px rgba(52, 97, 232, 0.08);
      }
      .info-block-items .add-info-block-btn:hover {
        background: var(--primary-dark);
      }
      @media (max-width: 900px) {
        .info-block-items .info-block-item-content {
          flex-direction: column;
        }
        .info-block-items .info-block-image-section {
          border-right: none;
          border-bottom: 1.5px solid var(--border);
          min-width: 0;
          max-width: 100%;
          padding: 1rem 0.5rem;
        }
        .info-block-items .info-block-text-section {
          padding: 1rem 1rem;
        }
      }

      /* Info Block Editor Modern UI - Toggle Button Top Center */
      .info-block-items .info-block-item-header {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        display: flex;
        align-items: flex-start;
        justify-content: center;
        z-index: 2;
        pointer-events: none;
        height: 48px;
      }
      .info-block-items .info-block-reverse-btn {
        pointer-events: auto;
        position: relative;
        top: 8px;
        background: var(--primary);
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        box-shadow: 0 2px 8px rgba(52, 97, 232, 0.1);
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        margin: 0 auto;
        cursor: pointer;
      }
      .info-block-items .info-block-reverse-btn:hover,
      .info-block-items .info-block-reverse-btn.active {
        background: var(--primary-dark);
        color: #fff;
        box-shadow: 0 4px 16px rgba(52, 97, 232, 0.15);
      }
      .info-block-items .info-block-reverse-btn:after {
        content: attr(title);
        position: absolute;
        left: 50%;
        top: 110%;
        transform: translateX(-50%);
        background: #222;
        color: #fff;
        font-size: 0.75rem;
        padding: 2px 8px;
        border-radius: 4px;
        opacity: 0;
        pointer-events: none;
        white-space: nowrap;
        transition: opacity 0.2s;
      }
      .info-block-items .info-block-reverse-btn:hover:after {
        opacity: 1;
      }
      .info-block-items .info-block-remove-btn {
        pointer-events: auto;
        position: absolute;
        top: 8px;
        right: 16px;
        background: var(--gray-100);
        color: var(--gray-700);
        border: none;
        border-radius: 6px;
        padding: 0.4rem 0.6rem;
        cursor: pointer;
        font-size: 1rem;
        transition: background 0.2s, color 0.2s;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
      }
      .info-block-items .info-block-remove-btn:hover {
        background: var(--danger);
        color: #fff;
      }
      /* Remove reverse from left cluster */
      .info-block-items .info-block-item-header .info-block-number {
        margin-right: auto;
        margin-left: 16px;
      }
      .info-block-items .info-block-item-header .info-block-item-actions {
        display: none;
      }
      @media (max-width: 900px) {
        .info-block-items .info-block-item-header {
          height: 40px;
        }
        .info-block-items .info-block-reverse-btn {
          width: 36px;
          height: 36px;
          font-size: 1.1rem;
        }
        .info-block-items .info-block-remove-btn {
          top: 4px;
          right: 8px;
        }
      }

      /* Tile Set Block Styles */
      .tile-set-block {
        background: var(--white);
        border-radius: 16px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.07);
        padding: 1rem;
        margin-bottom: 1rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }
      .tile-set-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 0.5rem;
      }
      .tile-set-title-input {
        font-size: 1.1rem;
        font-weight: 600;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        padding: 0.5rem 1rem;
        background: var(--gray-50);
        color: var(--gray-900);
        flex: 1;
      }
      .tile-set-title-input:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }
      .tile-set-alignment {
        display: flex;
        gap: 0.25rem;
        background: var(--gray-100);
        border-radius: 0.5rem;
        padding: 0.25rem;
      }
      .alignment-btn {
        padding: 0.5rem;
        background: transparent;
        border: none;
        border-radius: 0.25rem;
        color: var(--gray-600);
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
      }
      .alignment-btn:hover {
        background: var(--gray-200);
        color: var(--gray-800);
      }
      .alignment-btn.active {
        background: var(--primary);
        color: var(--white);
      }
      .tile-set-title {
        font-size: 1.2rem;
        font-weight: 700;
        margin: 0;
        color: var(--primary-dark);
        font-family: inherit;
      }
      .tile-set-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 22px;
        margin-top: 0;
      }
      .tile-set-tile {
        background: var(--gray-50);
        border-radius: 12px;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
        padding: 1.1rem 0.5rem 0.9rem 0.5rem;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        min-height: 90px;
      }
      .tile-icon-selector {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 0.5rem;
      }
      .tile-set-icon {
        font-size: 2.1rem;
        display: block;
        cursor: pointer;
        transition: transform 0.15s;
        margin-bottom: 0.25rem;
      }
      .tile-set-icon:hover {
        transform: scale(1.15);
      }
      .tile-icon-change-btn {
        background: var(--primary);
        color: var(--white);
        border: none;
        border-radius: 0.25rem;
        padding: 0.25rem 0.5rem;
        font-size: 0.7rem;
        cursor: pointer;
        opacity: 0.8;
        transition: opacity 0.2s;
      }
      .tile-icon-change-btn:hover {
        opacity: 1;
      }
      .tile-set-label {
        font-size: 1rem;
        font-family: inherit;
        color: var(--gray-800);
        background: transparent;
        border: none;
        text-align: center;
        margin-bottom: 0.2rem;
        outline: none;
        width: 100%;
      }
      .tile-set-label:focus {
        background: var(--white);
        border-bottom: 1.5px solid var(--primary);
      }
      .tile-set-add-btn {
        grid-column: 1/-1;
        background: var(--primary);
        color: var(--white);
        border-radius: 8px;
        padding: 0.7rem 0;
        text-align: center;
        font-weight: 600;
        cursor: pointer;
        margin-top: 0.5rem;
        transition: background 0.2s;
      }
      .tile-set-add-btn:hover {
        background: var(--primary-dark);
      }
      .tile-set-remove-btn {
        position: absolute;
        top: 8px;
        right: 8px;
        background: var(--danger);
        color: var(--white);
        border: none;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.9rem;
        cursor: pointer;
        transition: background 0.2s;
      }
      .tile-set-remove-btn:hover {
        background: #b91c1c;
      }

      /* Tile Set Grid Editor Styles */
      .tile-set-grid-editor {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }

      .tile-set-tile-editor {
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 0.75rem;
        padding: 1rem;
        transition: all 0.2s ease;
        position: relative;
        min-height: 140px;
        display: flex;
        flex-direction: column;
      }

      .tile-set-tile-editor:hover {
        border-color: var(--gray-300);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        transform: translateY(-1px);
      }

      .tile-set-tile-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.75rem;
      }

      .tile-set-tile-number {
        font-weight: 600;
        color: var(--white);
        font-size: 0.7rem;
        background: var(--primary);
        padding: 0.25rem 0.4rem;
        border-radius: 0.375rem;
        min-width: 1.5rem;
        text-align: center;
      }

      .tile-set-tile-remove-btn {
        background: #dc3545;
        color: white;
        border: none;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .tile-set-tile-remove-btn:hover {
        background: #c82333;
        transform: scale(1.1);
      }

      .tile-set-tile-content {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        flex: 1;
      }

      .tile-set-tile-icon-area {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .tile-set-tile-icon-preview {
        width: 52px;
        height: 52px;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        border-radius: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--white);
        font-size: 1.5rem;
        box-shadow: 0 2px 8px rgba(52, 97, 232, 0.2);
        transition: all 0.2s ease;
        cursor: pointer;
      }

      .tile-set-tile-icon-preview:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 16px rgba(52, 97, 232, 0.3);
      }

      .tile-set-tile-icon-btn {
        background: var(--gray-200);
        color: var(--gray-600);
        border: none;
        border-radius: 0.375rem;
        padding: 0.25rem 0.5rem;
        font-size: 0.7rem;
        cursor: pointer;
        transition: all 0.2s ease;
        opacity: 0.8;
      }

      .tile-set-tile-icon-btn:hover {
        background: var(--gray-300);
        color: var(--gray-800);
        opacity: 1;
      }

      .tile-set-tile-label-area {
        flex: 1;
        display: flex;
        align-items: flex-end;
      }

      .tile-set-tile-label-input {
        width: 100%;
        padding: 0.5rem 0.75rem;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-family: inherit;
        background: var(--white);
        transition: all 0.2s ease;
        text-align: center;
        font-weight: 500;
      }

      .tile-set-tile-label-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .tile-set-tile-label-input::placeholder {
        color: var(--gray-400);
        font-weight: normal;
      }

      .tile-set-add-tile-btn {
        grid-column: 1 / -1;
        background: var(--primary);
        color: var(--white);
        border: none;
        border-radius: 0.75rem;
        padding: 1rem;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        margin-top: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        box-shadow: 0 2px 4px rgba(52, 97, 232, 0.2);
        min-height: 60px;
        border: 2px dashed transparent;
      }

      .tile-set-add-tile-btn:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(52, 97, 232, 0.3);
      }

      .tile-set-add-tile-btn:active {
        transform: translateY(0);
      }

      @media (max-height: 740px) {
        .hero-overlay {
          padding: 1.8rem 1.5rem 1.5rem 1.5rem; /* Reduced from 2.5rem */
          width: 420px; /* Reduced from 470px */
        }

        .hero-title {
          font-size: 2rem; /* Reduced from 2.5rem */
          margin-bottom: 0.6rem; /* Reduced from 0.8rem */
        }

        /* Compact contact buttons and spacing */
      }

      @media (max-height: 600px) {
        .hero-overlay {
          padding: 1.4rem 1.2rem 1.2rem 1.2rem; /* Even more compact */
          width: 380px; /* Smaller width */
        }

        .hero-title {
          font-size: 1.8rem; /* Further reduced */
          margin-bottom: 0.5rem; /* Tighter spacing */
        }

        /* Ultra-compact layout for very short screens */
      }

      .icon-browse-help strong {
        color: var(--primary);
        font-weight: 600;
      }

      .show-custom-icon-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 0.5rem 0.75rem;
        border-radius: 0.5rem;
        font-size: 0.8rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
        margin-top: 0.5rem;
        box-shadow: 0 2px 4px rgba(52, 97, 232, 0.2);
      }

      .show-custom-icon-btn:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(52, 97, 232, 0.3);
      }

      .custom-icon-actions {
        display: flex;
        justify-content: flex-end;
        margin-top: 0.75rem;
        padding-top: 0.75rem;
        border-top: 1px solid var(--gray-200);
      }

      .cancel-custom-icon-btn {
        background: var(--gray-100);
        color: var(--gray-700);
        border: none;
        padding: 0.5rem 0.75rem;
        border-radius: 0.5rem;
        font-size: 0.8rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 0.375rem;
      }

      .cancel-custom-icon-btn:hover {
        background: var(--gray-200);
        color: var(--gray-800);
      }

      .custom-icon-preview {
        font-size: 0.8rem;
        padding: 0.875rem;
      }

      .show-custom-icon-btn {
        width: 100%;
        justify-content: center;
        margin-top: 0.75rem;
        padding: 0.75rem;
      }

      .custom-icon-actions {
        justify-content: center;
      }

      .cancel-custom-icon-btn {
        padding: 0.625rem 1rem;
      }

      /* Rich Text Editor Styles */
      .rich-text-editor {
        display: flex;
        flex-direction: column;
        border: 1px solid var(--gray-300);
        border-radius: 0.5rem;
        overflow: hidden;
        background: var(--white);
        transition: all 0.2s ease;
      }

      .rich-text-editor:focus-within {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(52, 97, 232, 0.1);
      }

      .rich-text-toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 0.25rem;
        padding: 0.5rem;
        background: var(--gray-50);
        border-bottom: 1px solid var(--gray-200);
        align-items: center;
      }

      .toolbar-btn {
        width: 32px;
        height: 32px;
        border: none;
        background: transparent;
        border-radius: 0.375rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.875rem;
        color: var(--gray-600);
        transition: all 0.2s ease;
        position: relative;
      }

      .toolbar-btn:hover {
        background: var(--gray-200);
        color: var(--gray-800);
        transform: scale(1.05);
      }

      .toolbar-btn.active {
        background: var(--primary);
        color: var(--white);
        box-shadow: 0 2px 4px rgba(52, 97, 232, 0.2);
      }

      .toolbar-btn.active:hover {
        background: var(--primary-dark);
      }

      .toolbar-separator {
        width: 1px;
        height: 24px;
        background: var(--gray-300);
        margin: 0 0.25rem;
      }

      .rich-text-content {
        min-height: 120px;
        max-height: 400px;
        padding: 0.75rem;
        font-family: inherit;
        font-size: calc(0.875rem * var(--secondary-font-scale));
        line-height: 1.6;
        overflow-y: auto;
        outline: none;
        background: var(--white);
        color: var(--gray-900);
        resize: vertical;
      }

      .rich-text-content:empty::before {
        content: attr(data-placeholder);
        color: var(--gray-400);
        pointer-events: none;
        font-style: italic;
      }

      .rich-text-content:focus {
        outline: none;
      }

      /* Rich text formatting styles */
      .rich-text-content strong,
      .rich-text-content b {
        font-weight: 700;
      }

      .rich-text-content em,
      .rich-text-content i {
        font-style: italic;
      }

      .rich-text-content u {
        text-decoration: underline;
      }

      .rich-text-content strike {
        text-decoration: line-through;
      }

      .rich-text-content a {
        color: var(--primary);
        text-decoration: underline;
        transition: color 0.2s ease;
      }

      .rich-text-content a:hover {
        color: var(--primary-dark);
      }

      .rich-text-content ul,
      .rich-text-content ol {
        margin: 0.5rem 0;
        padding-left: 1.5rem;
      }

      .rich-text-content li {
        margin: 0.25rem 0;
      }

      .rich-text-content p {
        margin: 0.5rem 0;
      }

      .rich-text-content p:first-child {
        margin-top: 0;
      }

      .rich-text-content p:last-child {
        margin-bottom: 0;
      }

      /* Text alignment */
      .rich-text-content [style*="text-align: left"] {
        text-align: left;
      }

      .rich-text-content [style*="text-align: center"] {
        text-align: center;
      }

      .rich-text-content [style*="text-align: right"] {
        text-align: right;
      }

      /* Highlight styling */
      .rich-text-content [style*="background-color: rgb(255, 255, 0)"],
      .rich-text-content [style*="background-color: #ffff00"],
      .rich-text-content [style*="background-color: yellow"] {
        background-color: #fff3cd !important;
        padding: 0.125rem 0.25rem;
        border-radius: 0.25rem;
        color: #856404;
      }

      /* Responsive toolbar */
      @media (max-width: 768px) {
        .rich-text-toolbar {
          gap: 0.125rem;
          padding: 0.375rem;
        }

        .toolbar-btn {
          width: 28px;
          height: 28px;
          font-size: 0.8rem;
        }

        .toolbar-separator {
          height: 20px;
        }
      }

      /* Status Box Compact UI Styles */
      .status-box-block .block-header-left {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .status-box-block .block-icon {
        color: var(--primary);
        font-size: 1rem;
      }

      .status-box-main-controls {
        background: var(--gray-50);
        border-radius: 0.75rem;
        padding: 1rem;
        margin-bottom: 1rem;
        border: 1px solid var(--gray-200);
      }

      .status-box-input-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.75rem;
        margin-bottom: 0.75rem;
      }

      .status-box-input-group {
        display: flex;
        flex-direction: column;
        gap: 0.375rem;
      }

      .compact-label {
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--gray-700);
        letter-spacing: 0.01em;
        margin: 0;
      }

      .compact-input {
        padding: 0.5rem 0.75rem;
        border: 1.5px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.9rem;
        font-weight: 500;
        transition: all 0.2s ease;
        background: var(--white);
        color: var(--gray-900);
      }

      .compact-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(64, 113, 244, 0.1);
      }

      .status-box-variant-section {
        display: flex;
        flex-direction: column;
        gap: 0.375rem;
      }

      .variant-select {
        padding: 0.5rem 0.75rem;
        border: 1.5px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.9rem;
        font-weight: 500;
        background: var(--white);
        color: var(--gray-900);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .variant-select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(64, 113, 244, 0.1);
      }

      .status-box-customization {
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: 0.75rem;
        margin-bottom: 1rem;
        overflow: hidden;
      }

      .customization-header,
      .preview-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        background: var(--gray-50);
        border-bottom: 1px solid var(--gray-200);
        font-weight: 600;
        color: var(--gray-700);
        font-size: 0.875rem;
      }

      .customization-header i,
      .preview-header i {
        color: var(--primary);
        font-size: 0.875rem;
      }

      .status-box-custom-options {
        padding: 1rem;
      }

      /* Color Controls */
      .color-controls-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.75rem;
      }

      .color-controls-single {
        display: flex;
        justify-content: center;
      }

      .color-control {
        display: flex;
        flex-direction: column;
        gap: 0.375rem;
        align-items: center;
      }

      .color-label {
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--gray-600);
        text-align: center;
        margin: 0;
      }

      .color-input-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.25rem;
      }

      .color-picker {
        width: 3rem;
        height: 3rem;
        border: 2px solid var(--gray-300);
        border-radius: 0.5rem;
        cursor: pointer;
        transition: all 0.2s ease;
        padding: 0;
        background: none;
      }

      .color-picker:hover {
        border-color: var(--primary);
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .color-hex {
        font-size: 0.7rem;
        font-family: "Courier New", monospace;
        color: var(--gray-500);
        background: var(--gray-100);
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        border: 1px solid var(--gray-300);
        min-width: 4.5rem;
        text-align: center;
      }

      /* Gradient Controls */
      .gradient-controls {
        margin-bottom: 1rem;
      }

      .gradient-controls:last-child {
        margin-bottom: 0;
      }

      .gradient-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--gray-700);
        margin-bottom: 0.75rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid var(--gray-200);
      }

      /* Neon Controls */
      .neon-controls {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      /* Image Controls */
      .image-controls {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .url-control {
        display: flex;
        flex-direction: column;
        gap: 0.375rem;
      }

      .url-input {
        padding: 0.5rem 0.75rem;
        border: 1.5px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.9rem;
        transition: all 0.2s ease;
        background: var(--white);
        color: var(--gray-900);
      }

      .url-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(64, 113, 244, 0.1);
      }

      .overlay-controls {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.75rem;
        align-items: end;
      }

      .opacity-control {
        display: flex;
        flex-direction: column;
        gap: 0.375rem;
      }

      .opacity-label {
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--gray-600);
        margin: 0;
      }

      .opacity-slider-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.25rem;
      }

      .opacity-slider {
        width: 100%;
        height: 0.25rem;
        border-radius: 0.125rem;
        background: var(--gray-300);
        outline: none;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .opacity-slider::-webkit-slider-thumb {
        appearance: none;
        width: 1rem;
        height: 1rem;
        border-radius: 50%;
        background: var(--primary);
        cursor: pointer;
        border: 2px solid var(--white);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease;
      }

      .opacity-slider::-webkit-slider-thumb:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }

      .opacity-value {
        font-size: 0.7rem;
        font-weight: 600;
        color: var(--gray-600);
        background: var(--gray-100);
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        border: 1px solid var(--gray-300);
        min-width: 2.5rem;
        text-align: center;
      }

      /* Preview Section */
      .status-box-preview-section {
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: 0.75rem;
        overflow: hidden;
      }

      .status-box-preview {
        padding: 1rem;
        background: var(--gray-50);
        min-height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .status-box-preview-wrapper {
        width: 100%;
        max-width: 300px;
      }

      /* Mobile Responsive */
      @media (max-width: 768px) {
        .status-box-input-row {
          grid-template-columns: 1fr;
          gap: 0.5rem;
        }

        .color-controls-grid {
          grid-template-columns: 1fr;
          gap: 0.5rem;
        }

        .overlay-controls {
          grid-template-columns: 1fr;
          gap: 0.5rem;
        }

        .color-picker {
          width: 2.5rem;
          height: 2.5rem;
        }

        .neon-controls {
          gap: 0.75rem;
        }
      }

      /* Compact Status Box Layout */
      .status-box-content-compact {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .status-box-top-row {
        display: grid;

        gap: 1rem;
        align-items: start;
      }

      .status-box-inputs-side {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .input-pair {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.75rem;
      }

      .input-group-inline {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .inline-label {
        font-size: 0.75rem;
        font-weight: 600;
        color: var(--gray-600);
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .inline-input {
        padding: 0.5rem 0.75rem;
        border: 1.5px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.9rem;
        font-weight: 500;
        transition: all 0.2s ease;
        background: var(--white);
        color: var(--gray-900);
      }

      .inline-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(64, 113, 244, 0.1);
      }

      .variant-group {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .variant-select-compact {
        padding: 0.5rem 0.75rem;
        border: 1.5px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.85rem;
        font-weight: 500;
        background: var(--white);
        color: var(--gray-900);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .variant-select-compact:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(64, 113, 244, 0.1);
      }

      .status-box-preview-side {
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 0.75rem;
        overflow: hidden;
      }

      .preview-label-inline {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 0.75rem;
        background: var(--gray-100);
        border-bottom: 1px solid var(--gray-200);
        font-weight: 600;
        color: var(--gray-700);
        font-size: 0.8rem;
      }

      .preview-label-inline i {
        color: var(--primary);
        font-size: 0.8rem;
      }

      .status-box-preview-compact {
        padding: 1rem;
        min-height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--white);
      }

      .status-box-custom-options-compact {
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: 0.75rem;
        padding: 1rem;
      }

      .status-box-custom-options-compact:empty {
        display: none;
      }

      /* Image Upload Controls */
      .image-upload-controls {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .image-preview-area {
        position: relative;
        width: 100%;
        height: 120px;
        border: 2px dashed var(--gray-300);
        border-radius: 0.75rem;
        background: var(--gray-50);
        overflow: hidden;
        transition: all 0.2s ease;
        cursor: pointer;
      }

      .image-preview-area:hover {
        border-color: var(--primary);
        background: var(--gray-100);
      }

      .image-preview-area.has-image {
        border-style: solid;
        cursor: default;
      }

      .preview-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 0.5rem;
      }

      .image-overlay {
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      .image-preview-area:hover .image-overlay {
        opacity: 1;
      }

      .image-action-btn {
        width: 2.5rem;
        height: 2.5rem;
        border: none;
        border-radius: 0.5rem;
        background: var(--white);
        color: var(--gray-700);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .image-action-btn:hover {
        background: var(--primary);
        color: var(--white);
        transform: scale(1.05);
      }

      .empty-image-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: var(--gray-500);
        text-align: center;
        gap: 0.25rem;
      }

      .empty-image-placeholder i {
        font-size: 1.5rem;
        margin-bottom: 0.25rem;
      }

      .empty-image-placeholder span {
        font-weight: 600;
        font-size: 0.9rem;
      }

      .empty-image-placeholder small {
        font-size: 0.75rem;
        color: var(--gray-400);
      }

      .url-input-area {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .url-input-compact {
        padding: 0.5rem 0.75rem;
        border: 1.5px solid var(--gray-300);
        border-radius: 0.5rem;
        font-size: 0.85rem;
        transition: all 0.2s ease;
        background: var(--white);
        color: var(--gray-900);
      }

      .url-input-compact:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(64, 113, 244, 0.1);
      }

      .upload-status {
        position: absolute;
        inset: 0;
        background: rgba(255, 255, 255, 0.95);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        color: var(--primary);
        font-weight: 600;
        font-size: 0.9rem;
      }

      .upload-spinner {
        width: 1.5rem;
        height: 1.5rem;
        border: 2px solid var(--gray-300);
        border-top: 2px solid var(--primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* No Customization Message */
      .no-customization {
        display: flex;
        justify-content: center;
        padding: 1rem;
      }

      .no-custom-message {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--gray-500);
        font-size: 0.85rem;
        background: var(--gray-50);
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        border: 1px solid var(--gray-200);
      }

      .no-custom-message i {
        color: var(--primary);
        font-size: 1rem;
      }

      /* Mobile Responsive for Compact Layout */
      @media (max-width: 768px) {
        .status-box-top-row {
          grid-template-columns: 1fr;
          gap: 0.75rem;
        }

        .input-pair {
          grid-template-columns: 1fr;
          gap: 0.5rem;
        }

        .preview-label-inline {
          padding: 0.5rem;
          font-size: 0.75rem;
        }

        .status-box-preview-compact {
          padding: 0.75rem;
          min-height: 80px;
        }

        .image-preview-area {
          height: 100px;
        }

        .image-action-btn {
          width: 2rem;
          height: 2rem;
          font-size: 0.8rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="header-content">
            <img
              src="./_internal/assets/images/logo.png"
              alt="Logo"
              class="header-logo"
            />
            <div class="header-text">
              <h2>Welcome Digital Guide Creator</h2>
            </div>
          </div>
        </div>

        <div class="sidebar-content">
          <!-- About Property Section -->
          <div class="accordion-section">
            <button
              class="accordion-header active"
              onclick="toggleAccordion(this)"
            >
              <span class="accordion-number">1</span>
              <div class="accordion-content-wrapper">
                <div class="accordion-title">
                  <i class="fas fa-home"></i>
                  About Property
                </div>
                <i class="fas fa-chevron-down accordion-arrow"></i>
              </div>
            </button>
            <div class="accordion-content active">
              <div class="accordion-body">
                <div class="form-group">
                  <label class="form-label">Property Name</label>
                  <input
                    type="text"
                    class="form-input"
                    id="propertyName"
                    value="Sunset Lake House"
                    placeholder="Enter property name"
                  />
                </div>

                <div class="form-group">
                  <label class="form-label">Property Address</label>
                  <input
                    type="text"
                    class="form-input"
                    id="propertyAddress"
                    value="123 Lakeview Dr"
                    placeholder="Enter street address"
                  />
                </div>

                <div class="form-group">
                  <label class="form-label">City</label>
                  <input
                    type="text"
                    class="form-input"
                    id="propertyCity"
                    value="Springfield"
                    placeholder="Enter city name"
                  />
                </div>

                <div class="form-group">
                  <label class="form-label">Country</label>
                  <input
                    type="text"
                    class="form-input"
                    id="propertyCountry"
                    value="United States"
                    placeholder="Enter country name"
                  />
                </div>
              </div>
            </div>
          </div>

          <!-- About Host Section -->
          <div class="accordion-section">
            <button class="accordion-header" onclick="toggleAccordion(this)">
              <span class="accordion-number">2</span>
              <div class="accordion-content-wrapper">
                <div class="accordion-title">
                  <i class="fas fa-user"></i>
                  About Host
                </div>
                <i class="fas fa-chevron-down accordion-arrow"></i>
              </div>
            </button>
            <div class="accordion-content">
              <div class="accordion-body">
                <div class="form-group">
                  <label class="form-label">Host Name</label>
                  <input
                    type="text"
                    class="form-input"
                    id="hostName"
                    value="Jane Doe"
                    placeholder="Enter host name"
                  />
                </div>

                <div class="form-group">
                  <label class="form-label">Host Phone</label>
                  <input
                    type="tel"
                    class="form-input"
                    id="hostPhone"
                    value="+1 234 567 8901"
                    placeholder="Enter phone number"
                  />
                </div>

                <div class="form-group">
                  <label class="form-label">Host Email</label>
                  <input
                    type="email"
                    class="form-input"
                    id="hostEmail"
                    value="jane.doe@email.com"
                    placeholder="Enter email address"
                  />
                </div>

                <div class="form-group">
                  <label class="form-label">Host Bio</label>
                  <textarea
                    class="form-textarea"
                    id="hostBio"
                    placeholder="Enter host bio"
                  >
Hi! I'm Jane, a local resident who loves sharing the beauty of our lakeside community with travelers. I've been hosting for over 4 years and take pride in providing clean, comfortable accommodations with all the amenities you need for a perfect getaway.</textarea
                  >
                </div>

                <div class="form-group">
                  <label class="form-label">Languages Spoken</label>
                  <input
                    type="text"
                    class="form-input"
                    id="hostLanguages"
                    value="English, Spanish, French"
                    placeholder="Enter languages"
                  />
                </div>

                <div class="form-group">
                  <div class="checkbox-wrapper">
                    <input
                      type="checkbox"
                      id="hostSuperhost"
                      class="superhost-checkbox"
                    />
                    <label for="hostSuperhost" class="superhost-label">
                      <div class="checkbox-indicator">
                        <i class="fas fa-check"></i>
                      </div>
                      <div class="superhost-text">
                        <span class="superhost-title">⭐ Superhost Status</span>
                        <span class="superhost-description"
                          >Mark as verified superhost with special badge</span
                        >
                      </div>
                    </label>
                  </div>
                </div>

                <!-- Social Links Section -->
                <div class="form-group">
                  <div
                    class="social-links-header"
                    onclick="toggleSocialLinks()"
                  >
                    <label class="form-label">
                      <i class="fas fa-share-alt"></i>
                      Social Links & Contact
                      <small>(optional)</small>
                    </label>
                    <i
                      class="fas fa-chevron-down social-links-arrow"
                      id="socialLinksArrow"
                    ></i>
                  </div>

                  <div class="social-links-content" id="socialLinksContent">
                    <div class="social-icons-grid">
                      <div class="social-icon-item" data-platform="website">
                        <button
                          type="button"
                          class="social-icon-btn"
                          onclick="toggleSocialIcon('website')"
                        >
                          <i class="fas fa-globe"></i>
                        </button>
                        <span>Website</span>
                      </div>
                      <div class="social-icon-item" data-platform="airbnb">
                        <button
                          type="button"
                          class="social-icon-btn"
                          onclick="toggleSocialIcon('airbnb')"
                        >
                          <i class="fab fa-airbnb"></i>
                        </button>
                        <span>Airbnb</span>
                      </div>
                      <div class="social-icon-item" data-platform="facebook">
                        <button
                          type="button"
                          class="social-icon-btn"
                          onclick="toggleSocialIcon('facebook')"
                        >
                          <i class="fab fa-facebook"></i>
                        </button>
                        <span>Facebook</span>
                      </div>
                      <div class="social-icon-item" data-platform="instagram">
                        <button
                          type="button"
                          class="social-icon-btn"
                          onclick="toggleSocialIcon('instagram')"
                        >
                          <i class="fab fa-instagram"></i>
                        </button>
                        <span>Instagram</span>
                      </div>
                      <div class="social-icon-item" data-platform="twitter">
                        <button
                          type="button"
                          class="social-icon-btn"
                          onclick="toggleSocialIcon('twitter')"
                        >
                          <i class="fab fa-twitter"></i>
                        </button>
                        <span>Twitter</span>
                      </div>
                      <div class="social-icon-item" data-platform="whatsapp">
                        <button
                          type="button"
                          class="social-icon-btn"
                          onclick="toggleSocialIcon('whatsapp')"
                        >
                          <i class="fab fa-whatsapp"></i>
                        </button>
                        <span>WhatsApp</span>
                      </div>
                      <div class="social-icon-item" data-platform="youtube">
                        <button
                          type="button"
                          class="social-icon-btn"
                          onclick="toggleSocialIcon('youtube')"
                        >
                          <i class="fab fa-youtube"></i>
                        </button>
                        <span>YouTube</span>
                      </div>
                      <div class="social-icon-item" data-platform="tiktok">
                        <button
                          type="button"
                          class="social-icon-btn"
                          onclick="toggleSocialIcon('tiktok')"
                        >
                          <i class="fab fa-tiktok"></i>
                        </button>
                        <span>TikTok</span>
                      </div>
                    </div>

                    <!-- Social Link Inputs (initially hidden) -->
                    <div class="social-link-inputs" id="socialLinkInputs">
                      <!-- Website input -->
                      <div
                        class="form-group social-input-group"
                        id="websiteInput"
                        style="display: none"
                      >
                        <label class="form-label">
                          <i class="fas fa-globe"></i> Website URL
                        </label>
                        <input
                          type="url"
                          class="form-input"
                          id="hostWebsite"
                          placeholder="https://yourwebsite.com"
                        />
                      </div>

                      <!-- Airbnb input -->
                      <div
                        class="form-group social-input-group"
                        id="airbnbInput"
                        style="display: none"
                      >
                        <label class="form-label">
                          <i class="fab fa-airbnb"></i> Airbnb Profile
                        </label>
                        <input
                          type="url"
                          class="form-input"
                          id="hostAirbnb"
                          placeholder="https://airbnb.com/users/show/..."
                        />
                      </div>

                      <!-- Facebook input -->
                      <div
                        class="form-group social-input-group"
                        id="facebookInput"
                        style="display: none"
                      >
                        <label class="form-label">
                          <i class="fab fa-facebook"></i> Facebook
                        </label>
                        <input
                          type="url"
                          class="form-input"
                          id="hostFacebook"
                          placeholder="https://facebook.com/yourpage"
                        />
                      </div>

                      <!-- Instagram input -->
                      <div
                        class="form-group social-input-group"
                        id="instagramInput"
                        style="display: none"
                      >
                        <label class="form-label">
                          <i class="fab fa-instagram"></i> Instagram
                        </label>
                        <input
                          type="url"
                          class="form-input"
                          id="hostInstagram"
                          placeholder="https://instagram.com/yourusername"
                        />
                      </div>

                      <!-- Twitter input -->
                      <div
                        class="form-group social-input-group"
                        id="twitterInput"
                        style="display: none"
                      >
                        <label class="form-label">
                          <i class="fab fa-twitter"></i> Twitter
                        </label>
                        <input
                          type="url"
                          class="form-input"
                          id="hostTwitter"
                          placeholder="https://twitter.com/yourusername"
                        />
                      </div>

                      <!-- WhatsApp input -->
                      <div
                        class="form-group social-input-group"
                        id="whatsappInput"
                        style="display: none"
                      >
                        <label class="form-label">
                          <i class="fab fa-whatsapp"></i> WhatsApp
                        </label>
                        <input
                          type="tel"
                          class="form-input"
                          id="hostWhatsapp"
                          placeholder="+1234567890 or https://wa.me/1234567890"
                        />
                      </div>

                      <!-- YouTube input -->
                      <div
                        class="form-group social-input-group"
                        id="youtubeInput"
                        style="display: none"
                      >
                        <label class="form-label">
                          <i class="fab fa-youtube"></i> YouTube
                        </label>
                        <input
                          type="url"
                          class="form-input"
                          id="hostYoutube"
                          placeholder="https://youtube.com/c/yourchannel"
                        />
                      </div>

                      <!-- TikTok input -->
                      <div
                        class="form-group social-input-group"
                        id="tiktokInput"
                        style="display: none"
                      >
                        <label class="form-label">
                          <i class="fab fa-tiktok"></i> TikTok
                        </label>
                        <input
                          type="url"
                          class="form-input"
                          id="hostTiktok"
                          placeholder="https://tiktok.com/@yourusername"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Visual Customization Section -->
          <div class="accordion-section">
            <button class="accordion-header" onclick="toggleAccordion(this)">
              <span class="accordion-number">3</span>
              <div class="accordion-content-wrapper">
                <div class="accordion-title">
                  <i class="fas fa-palette"></i>
                  Visual Customization
                </div>
                <i class="fas fa-chevron-down accordion-arrow"></i>
              </div>
            </button>
            <div class="accordion-content">
              <div class="accordion-body">
                <!-- Logo Section -->
                <div class="customization-section">
                  <div class="section-header">
                    <i class="fas fa-image"></i>
                    <h4>Logo & Profile Photo</h4>
                  </div>

                  <div class="form-group">
                    <label class="form-label">Logo / Profile Photo</label>

                    <!-- Logo Type Selection -->
                    <div class="logo-type-selector">
                      <button
                        type="button"
                        class="logo-type-btn active"
                        data-type="logo"
                        onclick="switchLogoType('logo')"
                      >
                        <i class="fas fa-image"></i>
                        <span>Logo</span>
                      </button>
                      <button
                        type="button"
                        class="logo-type-btn"
                        data-type="profile"
                        onclick="switchLogoType('profile')"
                      >
                        <i class="fas fa-user-circle"></i>
                        <span>Profile Photo</span>
                      </button>
                    </div>

                    <!-- Logo Upload Section -->
                    <div id="logoUploadSection" class="logo-section active">
                      <div class="image-upload-container">
                        <input
                          type="file"
                          id="logoUpload"
                          accept="image/*"
                          class="image-upload-input"
                          onchange="handleLogoUpload(event)"
                        />
                        <div class="image-upload-preview" id="logoPreview">
                          <i class="fas fa-upload"></i>
                          <span>Click to upload logo</span>
                        </div>
                      </div>
                      <small class="form-help"
                        >Upload your logo (PNG, JPG, SVG recommended)</small
                      >
                    </div>

                    <!-- Profile Photo Section -->
                    <div id="profilePhotoSection" class="logo-section">
                      <div class="image-upload-container">
                        <input
                          type="file"
                          id="profilePhotoUpload"
                          accept="image/*"
                          class="image-upload-input"
                          onchange="handleProfilePhotoUpload(event)"
                        />
                        <div
                          class="image-upload-preview profile-preview"
                          id="profilePhotoPreview"
                        >
                          <i class="fas fa-user"></i>
                          <span>Click to upload profile photo</span>
                        </div>
                      </div>
                      <small class="form-help"
                        >Upload your profile photo (will be displayed as
                        circular)</small
                      >
                    </div>

                    <!-- Size Control -->
                    <div class="logo-size-control">
                      <label class="form-label">Size</label>
                      <div class="size-slider-container">
                        <input
                          type="range"
                          id="logoSizeSlider"
                          min="1"
                          max="10"
                          value="5"
                          class="size-slider"
                          oninput="updateLogoSize(this.value)"
                        />
                        <div class="size-display">
                          <span id="logoSizeValue">5x</span>
                        </div>
                      </div>
                      <small class="form-help"
                        >Adjust the size of your logo/profile photo (1x = small,
                        10x = large)</small
                      >
                    </div>
                  </div>
                </div>

                <!-- Background Section -->
                <div class="customization-section">
                  <div class="section-header">
                    <i class="fas fa-palette"></i>
                    <h4>Background Image</h4>
                  </div>

                  <div class="form-group">
                    <label class="form-label">Background Image</label>
                    <div class="image-upload-container">
                      <input
                        type="file"
                        id="bgUpload"
                        accept="image/*"
                        class="image-upload-input"
                        onchange="handleBgUpload(event)"
                      />
                      <div class="image-upload-preview" id="bgPreview">
                        <i class="fas fa-upload"></i>
                        <span>Click to upload background</span>
                      </div>
                    </div>
                    <small class="form-help"
                      >Upload your background image (JPG, PNG
                      recommended)</small
                    >
                  </div>
                </div>

                <!-- Colors Section -->
                <div class="customization-section">
                  <div class="section-header">
                    <i class="fas fa-paint-brush"></i>
                    <h4>Color Scheme</h4>
                  </div>

                  <div class="form-group">
                    <label class="form-label">Home Page Overlay Style</label>
                    <div class="overlay-style-selector">
                      <div class="overlay-style-option" data-mode="transparent">
                        <div class="overlay-style-preview">
                          <div class="overlay-style-bg transparent-bg">
                            <div class="overlay-style-content">
                              <i class="fas fa-eye"></i>
                              <span>Glass Effect</span>
                            </div>
                          </div>
                        </div>
                        <div class="overlay-style-info">
                          <h4>Transparent</h4>
                          <p>Modern transparent overlay with blur effect</p>
                        </div>
                        <div class="overlay-style-check">
                          <i class="fas fa-check"></i>
                        </div>
                      </div>

                      <div class="overlay-style-option" data-mode="solid">
                        <div class="overlay-style-preview">
                          <div class="overlay-style-bg solid-bg">
                            <div class="overlay-style-content">
                              <i class="fas fa-circle"></i>
                              <span>Solid Dark</span>
                            </div>
                          </div>
                        </div>
                        <div class="overlay-style-info">
                          <h4>Solid</h4>
                          <p>Classic solid dark overlay for high contrast</p>
                        </div>
                        <div class="overlay-style-check">
                          <i class="fas fa-check"></i>
                        </div>
                        <div class="overlay-style-note" id="solidOverlayNote">
                          <i class="fas fa-info-circle"></i>
                          <span
                            >Use this option only if your primary color is
                            dark</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="form-label">Primary Color</label>
                    <div class="color-input-group">
                      <input
                        type="color"
                        class="color-input"
                        id="primaryColor"
                        value="#002927"
                        onchange="updateColorText('primaryColor', this.value)"
                      />
                      <input
                        type="text"
                        class="color-preview"
                        id="primaryColorText"
                        value="#002927"
                        oninput="updateColorPicker('primaryColor', this.value)"
                        placeholder="#002927"
                      />
                    </div>
                    <div class="color-presets">
                      <div class="color-preset-grid">
                        <div
                          class="color-preset"
                          data-color="#001D51"
                          onclick="selectColorPreset('primaryColor', '#001D51')"
                          title="#001D51"
                        >
                          <div
                            class="color-swatch"
                            style="background: #001d51"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#002829"
                          onclick="selectColorPreset('primaryColor', '#002829')"
                          title="#002829"
                        >
                          <div
                            class="color-swatch"
                            style="background: #002829"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#003D13"
                          onclick="selectColorPreset('primaryColor', '#003D13')"
                          title="#003D13"
                        >
                          <div
                            class="color-swatch"
                            style="background: #003d13"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#00796B"
                          onclick="selectColorPreset('primaryColor', '#00796B')"
                          title="#00796B"
                        >
                          <div
                            class="color-swatch"
                            style="background: #00796b"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#021112"
                          onclick="selectColorPreset('primaryColor', '#021112')"
                          title="#021112"
                        >
                          <div
                            class="color-swatch"
                            style="background: #021112"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#021230"
                          onclick="selectColorPreset('primaryColor', '#021230')"
                          title="#021230"
                        >
                          <div
                            class="color-swatch"
                            style="background: #021230"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#052F77"
                          onclick="selectColorPreset('primaryColor', '#052F77')"
                          title="#052F77"
                        >
                          <div
                            class="color-swatch"
                            style="background: #052f77"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#0F1114"
                          onclick="selectColorPreset('primaryColor', '#0F1114')"
                          title="#0F1114"
                        >
                          <div
                            class="color-swatch"
                            style="background: #0f1114"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#182622"
                          onclick="selectColorPreset('primaryColor', '#182622')"
                          title="#182622"
                        >
                          <div
                            class="color-swatch"
                            style="background: #182622"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#183708"
                          onclick="selectColorPreset('primaryColor', '#183708')"
                          title="#183708"
                        >
                          <div
                            class="color-swatch"
                            style="background: #183708"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#242365"
                          onclick="selectColorPreset('primaryColor', '#242365')"
                          title="#242365"
                        >
                          <div
                            class="color-swatch"
                            style="background: #242365"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#242B1D"
                          onclick="selectColorPreset('primaryColor', '#242B1D')"
                          title="#242B1D"
                        >
                          <div
                            class="color-swatch"
                            style="background: #242b1d"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#270837"
                          onclick="selectColorPreset('primaryColor', '#270837')"
                          title="#270837"
                        >
                          <div
                            class="color-swatch"
                            style="background: #270837"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#2D000F"
                          onclick="selectColorPreset('primaryColor', '#2D000F')"
                          title="#2D000F"
                        >
                          <div
                            class="color-swatch"
                            style="background: #2d000f"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#317574"
                          onclick="selectColorPreset('primaryColor', '#317574')"
                          title="#317574"
                        >
                          <div
                            class="color-swatch"
                            style="background: #317574"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#3A260F"
                          onclick="selectColorPreset('primaryColor', '#3A260F')"
                          title="#3A260F"
                        >
                          <div
                            class="color-swatch"
                            style="background: #3a260f"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#3D1E6D"
                          onclick="selectColorPreset('primaryColor', '#3D1E6D')"
                          title="#3D1E6D"
                        >
                          <div
                            class="color-swatch"
                            style="background: #3d1e6d"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#3E4243"
                          onclick="selectColorPreset('primaryColor', '#3E4243')"
                          title="#3E4243"
                        >
                          <div
                            class="color-swatch"
                            style="background: #3e4243"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#532010"
                          onclick="selectColorPreset('primaryColor', '#532010')"
                          title="#532010"
                        >
                          <div
                            class="color-swatch"
                            style="background: #532010"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#576C0F"
                          onclick="selectColorPreset('primaryColor', '#576C0F')"
                          title="#576C0F"
                        >
                          <div
                            class="color-swatch"
                            style="background: #576c0f"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#587E3A"
                          onclick="selectColorPreset('primaryColor', '#587E3A')"
                          title="#587E3A"
                        >
                          <div
                            class="color-swatch"
                            style="background: #587e3a"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#650000"
                          onclick="selectColorPreset('primaryColor', '#650000')"
                          title="#650000"
                        >
                          <div
                            class="color-swatch"
                            style="background: #650000"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#693B5C"
                          onclick="selectColorPreset('primaryColor', '#693B5C')"
                          title="#693B5C"
                        >
                          <div
                            class="color-swatch"
                            style="background: #693b5c"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#69583C"
                          onclick="selectColorPreset('primaryColor', '#69583C')"
                          title="#69583C"
                        >
                          <div
                            class="color-swatch"
                            style="background: #69583c"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#6B4F3A"
                          onclick="selectColorPreset('primaryColor', '#6B4F3A')"
                          title="#6B4F3A"
                        >
                          <div
                            class="color-swatch"
                            style="background: #6b4f3a"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#742416"
                          onclick="selectColorPreset('primaryColor', '#742416')"
                          title="#742416"
                        >
                          <div
                            class="color-swatch"
                            style="background: #742416"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#793600"
                          onclick="selectColorPreset('primaryColor', '#793600')"
                          title="#793600"
                        >
                          <div
                            class="color-swatch"
                            style="background: #793600"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#794F13"
                          onclick="selectColorPreset('primaryColor', '#794F13')"
                          title="#794F13"
                        >
                          <div
                            class="color-swatch"
                            style="background: #794f13"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#7B002A"
                          onclick="selectColorPreset('primaryColor', '#7B002A')"
                          title="#7B002A"
                        >
                          <div
                            class="color-swatch"
                            style="background: #7b002a"
                          ></div>
                        </div>
                        <div
                          class="color-preset"
                          data-color="#BA8E23"
                          onclick="selectColorPreset('primaryColor', '#BA8E23')"
                          title="#BA8E23"
                        >
                          <div
                            class="color-swatch"
                            style="background: #ba8e23"
                          ></div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="form-label">Secondary Color</label>
                    <div class="color-input-group">
                      <input
                        type="color"
                        class="color-input"
                        id="secondaryColor"
                        value="#484848"
                        onchange="updateColorText('secondaryColor', this.value)"
                      />
                      <input
                        type="text"
                        class="color-preview"
                        id="secondaryColorText"
                        value="#484848"
                        oninput="updateColorPicker('secondaryColor', this.value)"
                        placeholder="#484848"
                      />
                    </div>
                  </div>
                </div>

                <!-- Fonts Section -->
                <div class="customization-section">
                  <div class="section-header">
                    <i class="fas fa-font"></i>
                    <h4>Typography</h4>
                    <button
                      class="add-font-btn"
                      onclick="openAddFontModal()"
                      title="Add custom Google Font"
                    >
                      <i class="fas fa-plus"></i>
                      Add Font
                    </button>
                  </div>

                  <div class="form-group">
                    <label class="form-label">Primary Font (Bigger Text)</label>
                    <div class="font-select-container">
                      <div
                        class="font-select-display"
                        onclick="toggleFontDropdown('primaryFont')"
                      >
                        <span
                          class="font-preview"
                          id="primaryFontPreview"
                          style="font-family: 'Montserrat', Arial, sans-serif"
                          >Montserrat</span
                        >
                        <i class="fas fa-chevron-down"></i>
                      </div>
                      <div class="font-dropdown" id="primaryFontDropdown">
                        <!-- Font options will be populated by existing HTML -->
                      </div>
                    </div>
                    <small class="form-help"
                      >Font for headings and larger text elements</small
                    >
                  </div>

                  <div class="form-group">
                    <label class="form-label"
                      >Secondary Font (Smaller Text)</label
                    >
                    <div class="font-select-container">
                      <div
                        class="font-select-display"
                        onclick="toggleFontDropdown('secondaryFont')"
                      >
                        <span
                          class="font-preview"
                          id="secondaryFontPreview"
                          style="font-family: 'Montserrat', Arial, sans-serif"
                          >Montserrat</span
                        >
                        <i class="fas fa-chevron-down"></i>
                      </div>
                      <div class="font-dropdown" id="secondaryFontDropdown">
                        <!-- Font options will be populated by existing HTML -->
                      </div>
                    </div>
                    <small class="form-help"
                      >Font for body text and smaller elements</small
                    >
                  </div>

                  <!-- Font Size Controls -->
                  <div class="form-group">
                    <label class="form-label">Font Sizes</label>
                    <!-- Hidden inputs to store font scale values for export -->
                    <input type="hidden" id="primaryFontScale" value="1.0" />
                    <input type="hidden" id="secondaryFontScale" value="1.0" />
                    <div class="font-size-controls">
                      <div class="font-size-control">
                        <label class="font-size-label">Primary Font Size</label>
                        <div class="font-size-slider-container">
                          <input
                            type="range"
                            id="primaryFontSize"
                            class="font-size-slider"
                            min="0.6"
                            max="1.8"
                            step="0.1"
                            value="1.0"
                            oninput="updateFontSize('primary', this.value)"
                          />
                          <span
                            class="font-size-value"
                            id="primaryFontSizeValue"
                            >1.0x</span
                          >
                        </div>
                        <small class="form-help"
                          >Scales headings and larger text</small
                        >
                      </div>

                      <div class="font-size-control">
                        <label class="font-size-label"
                          >Secondary Font Size</label
                        >
                        <div class="font-size-slider-container">
                          <input
                            type="range"
                            id="secondaryFontSize"
                            class="font-size-slider"
                            min="0.6"
                            max="1.8"
                            step="0.1"
                            value="1.0"
                            oninput="updateFontSize('secondary', this.value)"
                          />
                          <span
                            class="font-size-value"
                            id="secondaryFontSizeValue"
                            >1.0x</span
                          >
                        </div>
                        <small class="form-help"
                          >Scales body text and smaller elements</small
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Guidebook Pages Section -->
          <div class="accordion-section">
            <button class="accordion-header" onclick="toggleAccordion(this)">
              <span class="accordion-number">4</span>
              <div class="accordion-content-wrapper">
                <div class="accordion-title">
                  <i class="fas fa-book"></i>
                  Guidebook Pages
                </div>
                <i class="fas fa-chevron-down accordion-arrow"></i>
              </div>
            </button>
            <div class="accordion-content">
              <div class="accordion-body">
                <div id="gridItems">
                  <!-- Guide pages will be dynamically generated -->
                </div>
              </div>
            </div>
          </div>

          <!-- Nearby Places Section -->
          <div class="accordion-section">
            <button class="accordion-header" onclick="toggleAccordion(this)">
              <span class="accordion-number">5</span>
              <div class="accordion-content-wrapper">
                <div class="accordion-title">
                  <i class="fas fa-map-marker-alt"></i>
                  Nearby Places
                </div>
                <i class="fas fa-chevron-down accordion-arrow"></i>
              </div>
            </button>
            <div class="accordion-content">
              <div class="accordion-body">
                <div class="form-group">
                  <label class="form-label">Customize Places Guide</label>
                  <p class="form-help">
                    Create an interactive map with local recommendations for
                    your guests. Search for places, edit descriptions, add
                    custom locations, and export as a guest guide.
                  </p>
                  <button
                    type="button"
                    class="btn btn-primary"
                    onclick="openMapsCustomizer()"
                    style="width: 100%; margin-top: 10px"
                  >
                    <i class="fas fa-map-marker-alt"></i>
                    Open Maps Customizer
                  </button>
                </div>

                <div class="form-group">
                  <label class="form-label">Current Status</label>
                  <div id="mapsStatus" class="maps-status">
                    <i class="fas fa-circle text-gray"></i>
                    <span>No places configured yet</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            id="hero-guide-user"
            style="
              font-size: 12px;
              color: gray;
              text-align: center;
              margin-top: 20px;
            "
          ></div>
        </div>

        <!-- Unified Actions Section -->
        <div
          class="unified-actions-section"
          style="
            padding: 1.25rem;
            border-top: 1px solid var(--border);
            background: linear-gradient(
              135deg,
              var(--white) 0%,
              var(--gray-50) 100%
            );
          "
        >
          <!-- First Row: Save, Load, Reset -->
          <div
            class="actions-row"
            style="display: flex; gap: 0.75rem; margin-bottom: 0.75rem"
          >
            <button
              id="saveProject"
              class="action-btn save-btn"
              title="Save Project"
            >
              <span><i class="fas fa-save"></i> Save Progress</span>
            </button>
            <button
              id="loadProject"
              class="action-btn load-btn"
              title="Load Project"
            >
              <span><i class="fas fa-folder-open"></i> Load Progress</span>
            </button>
            <button
              class="action-btn reset-btn"
              onclick="resetToDefaults()"
              title="Reset all settings"
            >
              <i class="fas fa-undo"></i>
              <span>Reset</span>
            </button>
          </div>

          <!-- Second Row: Auto-save Status and Download -->
          <div
            class="actions-row"
            style="display: flex; gap: 0.75rem; align-items: center"
          >
            <div
              id="autoSaveStatus"
              class="auto-save-status-unified"
              style="
                flex: 1;
                font-size: 0.8rem;
                color: var(--gray-500);
                text-align: center;
                padding: 0.75rem;
                background: var(--gray-100);
                border-radius: 0.5rem;
                border: 1px solid var(--border);
                min-height: 48px;
                display: flex;
                align-items: center;
                justify-content: center;
              "
            >
              <span class="auto-save-text">⏳ Unsaved changes</span>
            </div>
            <button
              class="action-btn btn-success download-btn-large"
              onclick="generateHTML()"
              title="Generate and download your complete guide"
              style="flex: 2"
            >
              <i class="fas fa-download" style="font-size: 1.5rem"></i>
              <span>Download my GuideBook</span>
            </button>
          </div>
        </div>
      </div>

      <div class="preview-section">
        <div class="preview-header">
          <h2 class="preview-title">Live Preview</h2>
          <div class="preview-controls">
            <div class="device-toggle">
              <button
                class="device-btn active"
                onclick="setPreviewDevice('desktop')"
              >
                <i class="fas fa-desktop"></i> Desktop
              </button>
              <button class="device-btn" onclick="setPreviewDevice('mobile')">
                <i class="fas fa-mobile-alt"></i> Mobile
              </button>
            </div>
          </div>
        </div>

        <div class="preview-container">
          <div class="preview-frame desktop" id="previewFrame">
            <iframe
              class="preview-iframe"
              id="previewIframe"
              src="about:blank"
            ></iframe>
            <div class="loading-overlay" id="loadingOverlay">
              <div class="spinner"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Rich Content Editor Modal -->
    <div class="modal" id="contentModal">
      <div class="modal-content rich-editor-modal">
        <div class="modal-header">
          <h3 class="modal-title" id="modalTitle">Edit Content</h3>
          <button class="close-btn" onclick="closeContentModal()">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">Icon & Label</label>
            <div style="display: flex; align-items: center; gap: 1rem">
              <div
                id="modalIconPreview"
                style="
                  width: 2.5rem;
                  height: 2.5rem;
                  background: linear-gradient(
                    135deg,
                    var(--primary) 0%,
                    var(--primary-dark) 100%
                  );
                  color: white;
                  border-radius: 0.5rem;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  font-size: 1.5rem;
                  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                "
              >
                <!-- Icon will be inserted here by JS -->
              </div>
              <button
                type="button"
                class="btn btn-secondary"
                onclick="openModalIconPicker()"
              >
                Change Icon
              </button>
              <input
                type="text"
                class="form-input"
                id="modalItemLabel"
                placeholder="Enter label (text below icon)"
                style="flex: 1; margin-left: 1rem"
              />
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Title</label>
            <input
              type="text"
              class="form-input"
              id="modalItemTitle"
              placeholder="Enter title"
            />
          </div>

          <div class="form-group">
            <label class="form-label">Cover Image</label>
            <div class="cover-image-editor-compact">
              <div class="cover-preview-section">
                <div class="cover-image-preview-compact" id="coverImagePreview">
                  <img
                    src="https://raw.githubusercontent.com/faizux/rental_clickcrafts/refs/heads/main/background_CC.jpg"
                    alt="Cover Image"
                    id="coverImageDisplay"
                  />
                  <div class="cover-preview-overlay">
                    <div class="cover-preview-actions">
                      <button
                        class="cover-action-btn"
                        onclick="document.getElementById('coverImageFileInput').click()"
                        title="Upload Image"
                      >
                        <i class="fas fa-upload"></i>
                      </button>
                      <button
                        class="cover-action-btn"
                        onclick="removeCoverImage()"
                        title="Remove Image"
                      >
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </div>
                  <div
                    class="upload-status"
                    id="coverUploadStatus"
                    style="display: none"
                  >
                    <div class="upload-spinner"></div>
                    <span>Uploading...</span>
                  </div>
                </div>
                <div class="cover-image-info">
                  <input
                    type="url"
                    class="image-input-compact"
                    id="coverImageUrlInput"
                    placeholder="Image URL or paste link here"
                    value="https://raw.githubusercontent.com/faizux/rental_clickcrafts/refs/heads/main/background_CC.jpg"
                    onchange="updateCoverImageUrl(this.value)"
                  />
                  <input
                    type="text"
                    class="image-input-compact"
                    id="coverImageAltInput"
                    placeholder="Alt text for accessibility"
                    value="Cover Image"
                    onchange="updateCoverImageAlt(this.value)"
                  />
                </div>
              </div>
              <input
                type="file"
                class="image-file-input"
                id="coverImageFileInput"
                accept="image/*"
                style="display: none"
                onchange="handleCoverImageUpload(this)"
              />
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Content Editor</label>
            <div class="rich-editor-content" id="richEditorContent">
              <!-- Content blocks will be added here -->
            </div>

            <div class="rich-editor-placeholder" id="richEditorPlaceholder">
              <div class="placeholder-content">
                <i class="fas fa-plus-circle"></i>
                <p>Start building your content</p>
                <div class="placeholder-add-buttons">
                  <button class="placeholder-add-btn" onclick="addTextBlock()">
                    <i class="fas fa-font"></i> Text
                  </button>
                  <button
                    class="placeholder-add-btn"
                    onclick="addHeadingBlock()"
                  >
                    <i class="fas fa-heading"></i> Heading
                  </button>
                  <button class="placeholder-add-btn" onclick="addIconBox()">
                    <i class="fas fa-icons"></i> Icon Box
                  </button>
                  <button class="placeholder-add-btn" onclick="addFeature()">
                    <i class="fas fa-star"></i> Feature
                  </button>
                  <button class="placeholder-add-btn" onclick="addImage()">
                    <i class="fas fa-image"></i> Image
                  </button>
                  <button class="placeholder-add-btn" onclick="addList()">
                    <i class="fas fa-list"></i> List
                  </button>
                  <button class="placeholder-add-btn" onclick="addAccordion()">
                    <i class="fas fa-chevron-down"></i> Accordion
                  </button>
                  <button class="placeholder-add-btn" onclick="addSection()">
                    <i class="fas fa-layer-group"></i> Section
                  </button>
                  <button class="placeholder-add-btn" onclick="addHTMLBlock()">
                    <i class="fas fa-code"></i> HTML
                  </button>
                  <button
                    class="add-block-option"
                    onclick="addBlockAt('bottom', 'tile-set')"
                  >
                    <i class="fas fa-th-large"></i> Tile Set
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="closeContentModal()">
            Cancel
          </button>
          <button class="btn btn-success" onclick="saveContentModal()">
            Save
          </button>
        </div>
      </div>
    </div>

    <!-- Floating Add Button for Content Editor -->
    <button
      class="floating-add-btn"
      id="floatingAddBtn"
      onclick="showAddBlockDropdown()"
    >
      <i class="fas fa-plus"></i>
    </button>

    <div class="add-block-dropdown" id="addBlockDropdown">
      <button class="add-block-option" onclick="addTextBlock()">
        <i class="fas fa-font"></i> Text Block
      </button>
      <button class="add-block-option" onclick="addHeadingBlock()">
        <i class="fas fa-heading"></i> Heading
      </button>
      <button class="add-block-option" onclick="addIconBox()">
        <i class="fas fa-icons"></i> Icon Box
      </button>
      <button class="add-block-option" onclick="addFeature()">
        <i class="fas fa-star"></i> Feature
      </button>
      <button class="add-block-option" onclick="addInfoBlock()">
        <i class="fas fa-info-circle"></i> Info Block
      </button>
      <button class="add-block-option" onclick="addImage()">
        <i class="fas fa-image"></i> Image
      </button>
      <button class="add-block-option" onclick="addList()">
        <i class="fas fa-list"></i> List
      </button>
      <button class="add-block-option" onclick="addAccordion()">
        <i class="fas fa-chevron-down"></i> Accordion
      </button>
      <button class="add-block-option" onclick="addSection()">
        <i class="fas fa-layer-group"></i> Section
      </button>
      <button class="add-block-option" onclick="addHTMLBlock()">
        <i class="fas fa-code"></i> HTML
      </button>
      <button
        class="add-block-option"
        onclick="addBlockAt('bottom', 'tile-set')"
      >
        <i class="fas fa-th-large"></i> Tile Set
      </button>
    </div>

    <!-- Icon Picker Modal -->
    <div class="icon-picker-modal" id="iconPickerModal">
      <div class="icon-picker-content">
        <div class="icon-picker-header">
          <h3 class="icon-picker-title">Choose an Icon</h3>
          <button class="icon-picker-close" onclick="closeIconPicker()">
            &times;
          </button>
        </div>
        <div class="icon-picker-search">
          <div class="icon-picker-search-row">
            <input
              type="text"
              id="iconSearchInput"
              placeholder="Search icons..."
              oninput="filterIcons()"
            />
            <button
              class="browse-more-icons-btn"
              onclick="browseMoreIcons()"
              title="Browse thousands more FontAwesome icons"
            >
              <i class="fas fa-external-link-alt"></i>
              Browse More
            </button>
          </div>
          <div class="icon-browse-help">
            Can't find the perfect icon? Browse
            <strong>2000+ FontAwesome icons</strong> online and add them here!
            <button
              class="show-custom-icon-btn"
              id="showCustomIconBtn"
              onclick="toggleCustomIconSection()"
              title="Add a custom FontAwesome icon"
            >
              <i class="fas fa-plus-circle"></i>
              Add Custom Icon
            </button>
          </div>
          <div
            class="custom-icon-section"
            id="customIconSection"
            style="display: none"
          >
            <div class="custom-icon-input-row">
              <input
                type="text"
                id="customIconInput"
                placeholder="Class: fas fa-rocket or HTML: <i class='fa-solid fa-camera'></i>"
                oninput="validateCustomIcon()"
              />
              <button
                class="add-custom-icon-btn"
                id="addCustomIconBtn"
                onclick="addCustomIcon()"
                disabled
                title="Add this custom icon to your available icons"
              >
                <i class="fas fa-plus"></i>
                Add Icon
              </button>
            </div>
            <div class="custom-icon-preview" id="customIconPreview">
              <i class="fas fa-question"></i>
              <span>Enter an icon class to preview</span>
            </div>
            <div class="custom-icon-actions">
              <button
                class="cancel-custom-icon-btn"
                onclick="toggleCustomIconSection()"
              >
                <i class="fas fa-times"></i>
                Cancel
              </button>
            </div>
          </div>
        </div>
        <div class="icon-picker-body">
          <div class="icon-categories">
            <div class="icon-category active" onclick="filterByCategory('all')">
              All
            </div>
            <div class="icon-category" onclick="filterByCategory('common')">
              Common
            </div>
            <div class="icon-category" onclick="filterByCategory('home')">
              Home
            </div>
            <div class="icon-category" onclick="filterByCategory('travel')">
              Travel
            </div>
            <div class="icon-category" onclick="filterByCategory('food')">
              Food
            </div>
            <div class="icon-category" onclick="filterByCategory('tech')">
              Tech
            </div>
            <div class="icon-category" onclick="filterByCategory('business')">
              Business
            </div>
          </div>
          <div class="icon-grid" id="iconGrid">
            <!-- Icons will be populated by JavaScript -->
          </div>
        </div>
        <div class="icon-picker-footer">
          <button class="btn btn-secondary" onclick="closeIconPicker()">
            Cancel
          </button>
          <button class="btn btn-success" onclick="selectIcon()">
            Select Icon
          </button>
        </div>
      </div>
    </div>

    <!-- Maps Customizer Modal -->
    <div class="maps-customizer-modal" id="mapsCustomizerModal">
      <div class="maps-customizer-content">
        <div class="maps-customizer-header">
          <h3>
            <i class="fas fa-map-marked-alt"></i>
            Maps & Local Places Customizer
          </h3>
          <button class="maps-customizer-close" onclick="closeMapsCustomizer()">
            &times;
          </button>
        </div>
        <iframe
          class="maps-customizer-iframe"
          id="mapsCustomizerIframe"
          src="about:blank"
        ></iframe>
      </div>
    </div>

    <!-- Add Font Modal -->
    <div class="add-font-modal" id="addFontModal">
      <div class="add-font-modal-content">
        <div class="add-font-modal-header">
          <h3>
            <i class="fas fa-plus-circle"></i>
            Add Custom Google Font
          </h3>
          <button class="add-font-modal-close" onclick="closeAddFontModal()">
            &times;
          </button>
        </div>
        <div class="add-font-modal-body">
          <div class="font-input-group">
            <label for="customFontName">Enter Exact Font Name</label>
            <input
              type="text"
              id="customFontName"
              placeholder="e.g., Playfair Display, Oswald, Raleway"
              oninput="updateFontPreview()"
            />
            <div class="font-help-text">
              Enter the exact name of any Google Font. Visit
              <a
                href="https://fonts.google.com"
                target="_blank"
                style="color: var(--primary)"
                >fonts.google.com</a
              >
              to browse available fonts.
            </div>
          </div>

          <div class="font-preview-box">
            <div class="font-preview-text" id="fontPreviewText">
              Font preview will appear here
            </div>
          </div>

          <div class="font-modal-actions">
            <button
              class="font-modal-btn secondary"
              onclick="closeAddFontModal()"
            >
              Cancel
            </button>
            <button
              class="font-modal-btn primary"
              id="addFontBtn"
              onclick="addCustomFont()"
              disabled
            >
              Add Font
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      function updateOnlineStatus() {
        if (!navigator.onLine) {
          alert("You are offline. Please check your internet connection.");
        } else {
          checkConnectionSpeed(); // Only check speed if online
        }
      }

      function checkConnectionSpeed() {
        const image = new Image();
        const startTime = new Date().getTime();
        const cacheBuster = "?nn=" + startTime;
        image.src = "https://www.google.com/images/phd/px.gif" + cacheBuster;

        image.onload = function () {
          const endTime = new Date().getTime();
          const duration = endTime - startTime;
          if (duration > 1000) {
            alert(
              "Your internet connection is slow. Loading may take a little longer—please be patient. (" +
                duration +
                "ms)."
            );
          }
        };

        image.onerror = function () {
          alert("Could not test connection speed. Possibly offline.");
        };
      }

      // Attach event listeners
      window.addEventListener("online", updateOnlineStatus);
      window.addEventListener("offline", updateOnlineStatus);

      // Initial check
      updateOnlineStatus();

      let shouldWarn = false;

      // Trigger warning on file upload
      window.addEventListener("DOMContentLoaded", () => {
        // Activate warning on file input change
        document.querySelectorAll("input[type='file']").forEach((input) => {
          input.addEventListener("change", () => {
            if (input.files.length > 0) {
              shouldWarn = true;
            }
          });
        });

        // Optionally trigger warning on text input as well
        document
          .querySelectorAll("input[type='text'], textarea")
          .forEach((input) => {
            input.addEventListener("input", () => {
              shouldWarn = true;
            });
          });
      });

      // Prevent page unload if flagged
      window.addEventListener("beforeunload", function (e) {
        if (shouldWarn) {
          e.preventDefault(); // Required for Chrome
          e.returnValue = ""; // Shows default browser prompt
        }
      });
      (function () {
        const a = String.fromCharCode;
        const b = atob;
        const lines = [
          a(169) +
            " 2025 " +
            b("SGVsbG9HdWVzdEFwcA==") +
            " by " +
            b("UmVudGFsIENsaWNrY3JhZnRzLg=="),
          b("VW5hdXRob3JpemVkIGNvcGllcyBhcmUgcHJvaGliaXRlZC4="),
          b(
            "SWYgeW91IGRpZCBub3QgcHVyY2hhc2UgdGhpcyBmcm9tIG91ciBvZmZpY2lhbCBFc3R5IHN0b3JlLCB0aGlzIGlzIGFuIGlsbGVnYWwgdmVyc2lvbi4="
          ),
        ];
        document.getElementById("hero-guide-user").innerText = lines.join("\n");
      })();

      // Accordion functionality
      function toggleAccordion(header) {
        const content = header.nextElementSibling;
        const isActive = header.classList.contains("active");

        // If the clicked accordion is already active, close it
        if (isActive) {
          header.classList.remove("active");
          content.classList.remove("active");
        } else {
          // If it's not active, open it (don't close others)
          header.classList.add("active");
          content.classList.add("active");
        }
      }

      // Maps Customizer functionality
      let mapsData = null;

      function openMapsCustomizer() {
        const modal = document.getElementById("mapsCustomizerModal");
        const iframe = document.getElementById("mapsCustomizerIframe");

        // Get city and country from form
        const cityInput = document.getElementById("propertyCity");
        const countryInput = document.getElementById("propertyCountry");
        const city = cityInput ? cityInput.value.trim() : "";
        const country = countryInput ? countryInput.value.trim() : "";

        // Set iframe source to maps customizer with location parameters
        let iframeSrc = "./_internal/addon.html";
        const params = new URLSearchParams();

        if (city) {
          params.append("city", city);
        }
        if (country) {
          params.append("country", country);
        }

        if (params.toString()) {
          iframeSrc += `?${params.toString()}`;
        }

        iframe.src = iframeSrc;

        // Show modal
        modal.style.display = "flex";

        // Listen for messages from the customizer
        window.addEventListener("message", handleMapsCustomizerMessage);
      }

      function closeMapsCustomizer() {
        const modal = document.getElementById("mapsCustomizerModal");
        const iframe = document.getElementById("mapsCustomizerIframe");

        // Hide modal
        modal.style.display = "none";

        // Clear iframe
        iframe.src = "about:blank";

        // Remove message listener
        window.removeEventListener("message", handleMapsCustomizerMessage);
      }

      function handleMapsCustomizerMessage(event) {
        if (event.data && event.data.type === "mapsExport") {
          // Update maps data
          mapsData = event.data.data;

          // Update status
          updateMapsStatus();

          // Trigger main preview iframe refresh to show updated maps data
          if (typeof schedulePreviewUpdate === "function") {
            schedulePreviewUpdate();
          } else if (typeof updatePreview === "function") {
            updatePreview();
          } else {
            setTimeout(() => {
              if (typeof schedulePreviewUpdate === "function") {
                schedulePreviewUpdate();
              } else if (typeof updatePreview === "function") {
                updatePreview();
              }
            }, 100);
          }

          // Close customizer
          closeMapsCustomizer();

          // Show success message
          alert(
            "Maps configuration saved successfully! Preview should now show your custom places."
          );
        }
      }

      function updateMapsStatus() {
        const statusElement = document.getElementById("mapsStatus");

        if (mapsData && mapsData.places && mapsData.places.length > 0) {
          statusElement.innerHTML = `
            <i class="fas fa-check-circle text-success"></i>
            <span>${mapsData.places.length} places configured for ${
            mapsData.locationName || "selected location"
          }</span>
          `;
        } else {
          statusElement.innerHTML = `
            <i class="fas fa-circle text-gray"></i>
            <span>No places configured yet</span>
          `;
        }
      }

      // Close modal when clicking outside
      window.addEventListener("click", function (event) {
        const modal = document.getElementById("mapsCustomizerModal");
        if (event.target === modal) {
          closeMapsCustomizer();
        }
      });

      // Social Links functionality
      function toggleSocialLinks() {
        const content = document.getElementById("socialLinksContent");
        const arrow = document.getElementById("socialLinksArrow");

        if (content.classList.contains("expanded")) {
          content.classList.remove("expanded");
          arrow.classList.remove("rotated");
        } else {
          content.classList.add("expanded");
          arrow.classList.add("rotated");
        }
      }

      function toggleSocialIcon(platform) {
        const iconBtn = document.querySelector(
          `[data-platform="${platform}"] .social-icon-btn`
        );
        const inputSection = document.getElementById(`${platform}Input`);

        if (iconBtn.classList.contains("active")) {
          // Deactivate - hide input and clear value
          iconBtn.classList.remove("active");
          inputSection.style.display = "none";
          const input = inputSection.querySelector("input");
          if (input) input.value = "";
        } else {
          // Activate - show input
          iconBtn.classList.add("active");
          inputSection.style.display = "block";

          // Focus on the input field
          const input = inputSection.querySelector("input");
          if (input) {
            setTimeout(() => input.focus(), 100);
          }
        }
      }

      // Mobile notice functionality
      function dismissMobileNotice() {
        const notice = document.getElementById("mobileNotice");
        notice.classList.add("dismissed");

        // Remove from DOM after animation
        setTimeout(() => {
          notice.style.display = "none";
        }, 300);

        // Note: No localStorage - notice will appear on each visit
      }

      // Mobile overlay functionality
      function toggleMobilePreviewOverlay() {
        const overlay = document.getElementById("mobilePreviewOverlay");
        const overlayIframe = document.getElementById(
          "mobilePreviewOverlayIframe"
        );
        const toggleBtn = document.getElementById("mobilePreviewToggle");

        if (overlay.classList.contains("active")) {
          closeMobilePreviewOverlay();
        } else {
          // Open overlay
          overlay.classList.add("active");

          // Sync content with main preview iframe
          const mainIframe = document.getElementById("previewIframe");
          if (
            mainIframe &&
            mainIframe.src &&
            mainIframe.src !== "about:blank"
          ) {
            overlayIframe.src = mainIframe.src;
          } else {
            // Generate fresh preview for overlay
            if (typeof generateHTMLContent === "function") {
              const htmlContent = generateHTMLContent();
              const blob = new Blob([htmlContent], { type: "text/html" });
              const url = URL.createObjectURL(blob);
              overlayIframe.src = url;
            }
          }

          // Update toggle button
          toggleBtn.innerHTML = '<i class="fas fa-compress"></i> Exit Preview';

          // Prevent body scroll
          document.body.style.overflow = "hidden";
        }
      }

      function closeMobilePreviewOverlay() {
        const overlay = document.getElementById("mobilePreviewOverlay");
        const overlayIframe = document.getElementById(
          "mobilePreviewOverlayIframe"
        );
        const toggleBtn = document.getElementById("mobilePreviewToggle");

        overlay.classList.remove("active");
        overlayIframe.src = "about:blank";
        toggleBtn.innerHTML =
          '<i class="fas fa-mobile-alt"></i> Mobile Preview';

        // Restore body scroll
        document.body.style.overflow = "";
      }

      // Preview overlay functionality for tablets
      function togglePreviewOverlay() {
        const overlay = document.getElementById("previewOverlay");
        const overlayIframe = document.getElementById("previewOverlayIframe");
        const toggleBtn = document.getElementById("tabletPreviewToggle");

        if (overlay.classList.contains("active")) {
          closePreviewOverlay();
        } else {
          // Open overlay
          overlay.classList.add("active");

          // Sync content with main preview iframe
          const mainIframe = document.getElementById("previewIframe");
          if (
            mainIframe &&
            mainIframe.src &&
            mainIframe.src !== "about:blank"
          ) {
            overlayIframe.src = mainIframe.src;
          } else {
            // Generate fresh preview for overlay
            if (typeof generateHTMLContent === "function") {
              const htmlContent = generateHTMLContent();
              const blob = new Blob([htmlContent], { type: "text/html" });
              const url = URL.createObjectURL(blob);
              overlayIframe.src = url;
            }
          }

          // Update toggle button
          toggleBtn.innerHTML = '<i class="fas fa-compress"></i> Exit Preview';

          // Prevent body scroll
          document.body.style.overflow = "hidden";
        }
      }

      function closePreviewOverlay() {
        const overlay = document.getElementById("previewOverlay");
        const overlayIframe = document.getElementById("previewOverlayIframe");
        const toggleBtn = document.getElementById("tabletPreviewToggle");

        overlay.classList.remove("active");
        overlayIframe.src = "about:blank";
        toggleBtn.innerHTML = '<i class="fas fa-expand"></i> Full Preview';

        // Restore body scroll
        document.body.style.overflow = "";
      }

      // Close overlay when clicking outside content
      document.addEventListener("click", function (event) {
        // Handle tablet overlay
        const overlay = document.getElementById("previewOverlay");
        const overlayContent = overlay?.querySelector(
          ".preview-overlay-content"
        );

        if (
          overlay &&
          overlay.classList.contains("active") &&
          event.target === overlay &&
          !overlayContent?.contains(event.target)
        ) {
          closePreviewOverlay();
        }

        // Handle mobile overlay
        const mobileOverlay = document.getElementById("mobilePreviewOverlay");
        const mobileOverlayContent = mobileOverlay?.querySelector(
          ".mobile-preview-overlay-content"
        );

        if (
          mobileOverlay &&
          mobileOverlay.classList.contains("active") &&
          event.target === mobileOverlay &&
          !mobileOverlayContent?.contains(event.target)
        ) {
          closeMobilePreviewOverlay();
        }
      });

      // Sync overlay iframe with main iframe when preview updates
      function syncOverlayPreview() {
        // Sync tablet overlay
        const overlay = document.getElementById("previewOverlay");
        const overlayIframe = document.getElementById("previewOverlayIframe");
        const mainIframe = document.getElementById("previewIframe");

        if (
          overlay &&
          overlay.classList.contains("active") &&
          mainIframe &&
          mainIframe.src &&
          mainIframe.src !== "about:blank"
        ) {
          overlayIframe.src = mainIframe.src;
        }

        // Sync mobile overlay
        const mobileOverlay = document.getElementById("mobilePreviewOverlay");
        const mobileOverlayIframe = document.getElementById(
          "mobilePreviewOverlayIframe"
        );

        if (
          mobileOverlay &&
          mobileOverlay.classList.contains("active") &&
          mainIframe &&
          mainIframe.src &&
          mainIframe.src !== "about:blank"
        ) {
          mobileOverlayIframe.src = mainIframe.src;
        }
      }

      // Font size update function
      function updateFontSize(fontType, value) {
        // Update the display value
        const valueElement = document.getElementById(
          `${fontType}FontSizeValue`
        );
        if (valueElement) {
          valueElement.textContent = `${value}x`;
        }

        // Store the value in hidden input for export
        const hiddenInput = document.getElementById(`${fontType}FontScale`);
        if (hiddenInput) {
          hiddenInput.value = value;
        }

        // Store the value for window object (backward compatibility)
        if (fontType === "primary") {
          window.primaryFontScale = parseFloat(value);
        } else if (fontType === "secondary") {
          window.secondaryFontScale = parseFloat(value);
        }

        // Use targeted preview update instead of full reload
        if (typeof updatePreviewField === "function") {
          updatePreviewField(`${fontType}FontScale`, value);
        } else if (typeof schedulePreviewUpdate === "function") {
          schedulePreviewUpdate();
        } else if (typeof updatePreview === "function") {
          updatePreview();
        }
      }

      // Initialize font scale values
      window.primaryFontScale = 1.0;
      window.secondaryFontScale = 1.0;

      // Initialize font size sliders when page loads
      function initializeFontSizeSliders() {
        const primarySlider = document.getElementById("primaryFontSize");
        const secondarySlider = document.getElementById("secondaryFontSize");
        const primaryValue = document.getElementById("primaryFontSizeValue");
        const secondaryValue = document.getElementById(
          "secondaryFontSizeValue"
        );
        const primaryHidden = document.getElementById("primaryFontScale");
        const secondaryHidden = document.getElementById("secondaryFontScale");

        if (primarySlider && primaryValue && primaryHidden) {
          const primaryScale = parseFloat(primaryHidden.value) || 1.0;
          primarySlider.value = primaryScale;
          primaryValue.textContent = `${primaryScale}x`;
          window.primaryFontScale = primaryScale;
        }

        if (secondarySlider && secondaryValue && secondaryHidden) {
          const secondaryScale = parseFloat(secondaryHidden.value) || 1.0;
          secondarySlider.value = secondaryScale;
          secondaryValue.textContent = `${secondaryScale}x`;
          window.secondaryFontScale = secondaryScale;
        }
      }

      // Initialize on page load
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize font size sliders
        initializeFontSizeSliders();

        // Note: Mobile notice will show on each visit - no dismissal check

        // Listen for main iframe updates to sync with overlay
        const mainIframe = document.getElementById("previewIframe");
        if (mainIframe) {
          mainIframe.addEventListener("load", syncOverlayPreview);
        }
      });

      // Handle ESC key to close overlay
      document.addEventListener("keydown", function (event) {
        if (event.key === "Escape") {
          // Check tablet overlay first
          const overlay = document.getElementById("previewOverlay");
          if (overlay && overlay.classList.contains("active")) {
            closePreviewOverlay();
            return;
          }

          // Check mobile overlay
          const mobileOverlay = document.getElementById("mobilePreviewOverlay");
          if (mobileOverlay && mobileOverlay.classList.contains("active")) {
            closeMobilePreviewOverlay();
          }
        }
      });
    </script>

    <!-- IndexedDB Project Management -->
    <script>
      // IndexedDB Helper Class for Project Management
      class ProjectDB {
        constructor() {
          this.dbName = "WelcomeGuideDB";
          this.version = 1;
          this.db = null;
        }

        async init() {
          return new Promise((resolve, reject) => {
            const request = indexedDB.open(this.dbName, this.version);

            request.onerror = () => reject(request.error);
            request.onsuccess = () => {
              this.db = request.result;
              resolve(this.db);
            };

            request.onupgradeneeded = (event) => {
              const db = event.target.result;

              // Projects store
              if (!db.objectStoreNames.contains("projects")) {
                const projectStore = db.createObjectStore("projects", {
                  keyPath: "id",
                });
                projectStore.createIndex("timestamp", "lastModified");
                projectStore.createIndex("name", "projectName");
              }

              // Auto-save drafts store
              if (!db.objectStoreNames.contains("drafts")) {
                const draftStore = db.createObjectStore("drafts", {
                  keyPath: "id",
                });
                draftStore.createIndex("timestamp", "lastModified");
              }
            };
          });
        }

        async saveProject(projectData, isDraft = false) {
          const store = isDraft ? "drafts" : "projects";
          const transaction = this.db.transaction([store], "readwrite");
          const objectStore = transaction.objectStore(store);

          return new Promise((resolve, reject) => {
            const request = objectStore.put(projectData);
            request.onsuccess = () => resolve(request.result);
            request.onerror = () => reject(request.error);
          });
        }

        async loadProject(projectId, isDraft = false) {
          const store = isDraft ? "drafts" : "projects";
          const transaction = this.db.transaction([store], "readonly");
          const objectStore = transaction.objectStore(store);

          return new Promise((resolve, reject) => {
            const request = objectStore.get(projectId);
            request.onsuccess = () => resolve(request.result);
            request.onerror = () => reject(request.error);
          });
        }

        async listProjects(isDraft = false) {
          const store = isDraft ? "drafts" : "projects";

          const transaction = this.db.transaction([store], "readonly");
          const objectStore = transaction.objectStore(store);
          const index = objectStore.index("timestamp");

          return new Promise((resolve, reject) => {
            const request = index.getAll();
            request.onsuccess = () => {
              const results = request.result.reverse(); // Most recent first

              resolve(results);
            };
            request.onerror = () => {
              console.error(
                `Error retrieving projects from ${store}:`,
                request.error
              );
              reject(request.error);
            };
          });
        }

        async deleteProject(projectId, isDraft = false) {
          const store = isDraft ? "drafts" : "projects";
          const transaction = this.db.transaction([store], "readwrite");
          const objectStore = transaction.objectStore(store);

          return new Promise((resolve, reject) => {
            const request = objectStore.delete(projectId);
            request.onsuccess = () => resolve(request.result);
            request.onerror = () => reject(request.error);
          });
        }
      }

      // Global project database instance
      let projectDB = null;
      let autoSaveTimer = null;
      let hasUnsavedChanges = false;

      // Initialize database
      async function initializeProjectDB() {
        try {
          projectDB = new ProjectDB();
          await projectDB.init();

          // Check for auto-save draft on startup
          setTimeout(checkForAutoSaveDraft, 1000);

          // Enable auto-save
          enableAutoSave();
        } catch (error) {
          console.error("Failed to initialize project database:", error);
        }
      }

      // Check for existing auto-save draft
      async function checkForAutoSaveDraft() {
        if (!projectDB) return;

        try {
          const draft = await projectDB.loadProject("autosave_current", true);
          if (draft) {
            const shouldRestore = confirm(
              "Auto-saved progress found from " +
                new Date(draft.lastModified).toLocaleString() +
                "\n\nWould you like to restore your previous work?"
            );

            if (shouldRestore) {
              await restoreCompleteProjectData(draft);
            }
          }
        } catch (error) {}
      }
    </script>

    <!-- Data Collection and Restoration Functions -->
    <script>
      // Helper function to safely get element value
      function getValue(id) {
        const element = document.getElementById(id);
        return element ? element.value : "";
      }

      // Helper function to get checkbox value
      function getCheckedValue(id) {
        const element = document.getElementById(id);
        return element ? element.checked : false;
      }

      // Extract content blocks from all pages
      function extractAllContentBlocksFromDOM() {
        const pageBlocks = {};

        // For each grid item, extract its content blocks
        if (typeof currentGridItems !== "undefined") {
          currentGridItems.forEach((item) => {
            if (item.id && item.content) {
              // Parse content for embedded blocks
              const tempDiv = document.createElement("div");
              tempDiv.innerHTML = item.content;

              const blocks = [];
              // Extract different block types from the content
              tempDiv.querySelectorAll("[data-block-id]").forEach((blockEl) => {
                const blockData = extractBlockDataFromElement(blockEl);
                if (blockData) blocks.push(blockData);
              });

              pageBlocks[item.id] = blocks;
            }
          });
        }

        return pageBlocks;
      }

      // Extract block data from DOM element
      function extractBlockDataFromElement(element) {
        try {
          const blockId = element.getAttribute("data-block-id");
          const blockType =
            element.getAttribute("data-block-type") ||
            element.className.match(/block-(\w+)/)?.[1];

          if (!blockId || !blockType) return null;

          return {
            id: blockId,
            type: blockType,
            content: element.innerHTML,
            // Extract any data attributes
            data: Array.from(element.attributes)
              .filter((attr) => attr.name.startsWith("data-"))
              .reduce((acc, attr) => {
                acc[attr.name.replace("data-", "")] = attr.value;
                return acc;
              }, {}),
          };
        } catch (error) {
          console.warn("Failed to extract block data:", error);
          return null;
        }
      }

      // Extract social media toggle states
      function extractSocialToggleStates() {
        return {
          hostWebsite: !!getValue("hostWebsite"),
          hostAirbnb: !!getValue("hostAirbnb"),
          hostFacebook: !!getValue("hostFacebook"),
          hostInstagram: !!getValue("hostInstagram"),
          hostTwitter: !!getValue("hostTwitter"),
          hostWhatsapp: !!getValue("hostWhatsapp"),
          hostYoutube: !!getValue("hostYoutube"),
          hostTiktok: !!getValue("hostTiktok"),
        };
      }

      // Get complete project data for saving
      function getCompleteProjectData(projectName = "Untitled Project") {
        const timestamp = Date.now();

        return {
          id: "project_" + timestamp,
          projectName: projectName,
          lastModified: new Date().toISOString(),
          version: "1.0",

          // Core form data - using existing function if available, otherwise manual collection
          formData:
            typeof getFormData === "function"
              ? getFormData()
              : {
                  // Property Information
                  propertyName: getValue("propertyName"),
                  propertyAddress: getValue("propertyAddress"),
                  propertyCity: getValue("propertyCity"),
                  propertyCountry: getValue("propertyCountry"),

                  // Host Details
                  hostName: getValue("hostName"),
                  hostPhone: getValue("hostPhone"),
                  hostEmail: getValue("hostEmail"),
                  hostBio: getValue("hostBio"),
                  hostLanguages: getValue("hostLanguages"),
                  hostSuperhost: getCheckedValue("hostSuperhost"),

                  // Social Media Links
                  hostWebsite: getValue("hostWebsite"),
                  hostAirbnb: getValue("hostAirbnb"),
                  hostFacebook: getValue("hostFacebook"),
                  hostInstagram: getValue("hostInstagram"),
                  hostTwitter: getValue("hostTwitter"),
                  hostWhatsapp: getValue("hostWhatsapp"),
                  hostYoutube: getValue("hostYoutube"),
                  hostTiktok: getValue("hostTiktok"),

                  // Theme Colors
                  primaryColor: getValue("primaryColor"),
                  secondaryColor: getValue("secondaryColor"),

                  // Typography
                  primaryFont:
                    document.getElementById("primaryFontPreview")
                      ?.textContent ||
                    document.getElementById("primaryFont")?.value ||
                    "",
                  secondaryFont:
                    document.getElementById("secondaryFontPreview")
                      ?.textContent ||
                    document.getElementById("secondaryFont")?.value ||
                    "",
                },

          // Visual assets with all variants
          assets: {
            logoBase64: typeof logoBase64 !== "undefined" ? logoBase64 : null,
            backgroundBase64:
              typeof backgroundBase64 !== "undefined" ? backgroundBase64 : null,
            profilePhotoBase64:
              typeof profilePhotoBase64 !== "undefined"
                ? profilePhotoBase64
                : null,
            logoType: typeof logoType !== "undefined" ? logoType : "logo",
            logoSize: typeof logoSize !== "undefined" ? logoSize : 5,
            isProfilePhoto:
              typeof window.isProfilePhoto !== "undefined"
                ? window.isProfilePhoto
                : false,
            logoImageUrl:
              typeof window.logoImageUrl !== "undefined"
                ? window.logoImageUrl
                : null,
          },

          // Font scaling from window variables
          fontScaling: {
            primaryFontScale:
              typeof window.primaryFontScale !== "undefined"
                ? window.primaryFontScale
                : 1.0,
            secondaryFontScale:
              typeof window.secondaryFontScale !== "undefined"
                ? window.secondaryFontScale
                : 1.0,
          },

          // Display and overlay settings
          displaySettings: {
            overlayMode:
              typeof window.selectedOverlayMode !== "undefined"
                ? window.selectedOverlayMode
                : "transparent",
            currentDevice:
              typeof currentDevice !== "undefined" ? currentDevice : "desktop",
          },

          // Complete grid items structure
          gridItems:
            typeof currentGridItems !== "undefined"
              ? currentGridItems.map((item) => ({
                  id: item.id,
                  icon: item.icon,
                  label: item.label,
                  enabled: item.enabled,
                  title: item.title,
                  content: item.content,
                  coverImage: item.coverImage
                    ? {
                        src: item.coverImage.src,
                        alt: item.coverImage.alt,
                      }
                    : null,
                }))
              : [],

          // All content blocks (comprehensive)
          contentBlocks: {
            current:
              typeof contentBlocks !== "undefined" ? [...contentBlocks] : [],
            perPage: extractAllContentBlocksFromDOM(),
          },

          // Complete maps data
          mapsData: typeof mapsData !== "undefined" ? mapsData : null,

          // Custom fonts configuration
          customFonts:
            typeof customFonts !== "undefined" ? [...customFonts] : [],

          // UI state for perfect restoration
          uiState: {
            activeAccordion: document
              .querySelector(".accordion-header.active")
              ?.closest(".accordion-section")?.id,
            currentEditingItem:
              typeof currentEditingItem !== "undefined"
                ? currentEditingItem
                : null,
            blockCounter:
              typeof blockCounter !== "undefined" ? blockCounter : 0,
            openModals: Array.from(
              document.querySelectorAll(".modal.active")
            ).map((m) => m.id),
            socialToggleStates: extractSocialToggleStates(),
          },

          // Window-level variables
          windowState: {
            logoImageUrl:
              typeof window.logoImageUrl !== "undefined"
                ? window.logoImageUrl
                : null,
            primaryFontScale:
              typeof window.primaryFontScale !== "undefined"
                ? window.primaryFontScale
                : 1.0,
            secondaryFontScale:
              typeof window.secondaryFontScale !== "undefined"
                ? window.secondaryFontScale
                : 1.0,
            selectedOverlayMode:
              typeof window.selectedOverlayMode !== "undefined"
                ? window.selectedOverlayMode
                : "transparent",
          },
        };
      }
    </script>

    <!-- Project Restoration Functions -->
    <script>
      // Helper functions for UI updates
      function updateFontPreviews() {
        // Update font preview displays
        const primaryPreview = document.getElementById("primaryFontPreview");
        const secondaryPreview = document.getElementById(
          "secondaryFontPreview"
        );

        if (primaryPreview && primaryPreview.textContent) {
          primaryPreview.style.fontFamily = primaryPreview.textContent;

          // Also update any font select controls
          const primarySelect = document.getElementById("primaryFont");
          if (primarySelect) {
            primarySelect.value = primaryPreview.textContent;
          }
        }

        if (secondaryPreview && secondaryPreview.textContent) {
          secondaryPreview.style.fontFamily = secondaryPreview.textContent;

          // Also update any font select controls
          const secondarySelect = document.getElementById("secondaryFont");
          if (secondarySelect) {
            secondarySelect.value = secondaryPreview.textContent;
          }
        }
      }

      function updateColorDisplays() {
        // Update color picker displays
        const primaryColor = document.getElementById("primaryColor");
        const secondaryColor = document.getElementById("secondaryColor");
        const primaryColorText = document.getElementById("primaryColorText");
        const secondaryColorText =
          document.getElementById("secondaryColorText");

        if (primaryColor && primaryColorText) {
          primaryColorText.value = primaryColor.value;
        }
        if (secondaryColor && secondaryColorText) {
          secondaryColorText.value = secondaryColor.value;
        }
      }

      function restoreContentBlocksToPages(pageBlocks) {
        // Restore content blocks to their respective pages
        Object.entries(pageBlocks).forEach(([pageId, blocks]) => {
          // Find the page container and restore blocks
          const pageContainer = document.querySelector(
            `[data-page-id="${pageId}"]`
          );
          if (pageContainer && blocks.length > 0) {
            // Restore blocks to the page
            blocks.forEach((block) => {
              const blockElement = document.createElement("div");
              blockElement.innerHTML = block.content;
              blockElement.setAttribute("data-block-id", block.id);
              blockElement.setAttribute("data-block-type", block.type);

              // Apply any data attributes
              if (block.data) {
                Object.entries(block.data).forEach(([key, value]) => {
                  blockElement.setAttribute(`data-${key}`, value);
                });
              }

              pageContainer.appendChild(blockElement);
            });
          }
        });
      }

      // Complete project restoration function
      async function restoreCompleteProjectData(projectData) {
        try {
          // 1. RESTORE FORM DATA
          Object.entries(projectData.formData).forEach(([key, value]) => {
            const element = document.getElementById(key);
            if (element) {
              if (element.type === "checkbox") {
                element.checked = value;
              } else {
                element.value = value;
              }
            }
          });

          // 1.5. RESTORE FONT PREVIEWS SPECIFICALLY
          if (projectData.formData.primaryFont) {
            const primaryPreview =
              document.getElementById("primaryFontPreview");
            if (primaryPreview) {
              primaryPreview.textContent = projectData.formData.primaryFont;
              primaryPreview.style.fontFamily =
                projectData.formData.primaryFont;
            }

            const primarySelect = document.getElementById("primaryFont");
            if (primarySelect) {
              primarySelect.value = projectData.formData.primaryFont;
            }
          }

          if (projectData.formData.secondaryFont) {
            const secondaryPreview = document.getElementById(
              "secondaryFontPreview"
            );
            if (secondaryPreview) {
              secondaryPreview.textContent = projectData.formData.secondaryFont;
              secondaryPreview.style.fontFamily =
                projectData.formData.secondaryFont;
            }

            const secondarySelect = document.getElementById("secondaryFont");
            if (secondarySelect) {
              secondarySelect.value = projectData.formData.secondaryFont;
            }
          }

          // 2. RESTORE VISUAL ASSETS
          if (projectData.assets) {
            if (typeof logoBase64 !== "undefined")
              logoBase64 = projectData.assets.logoBase64;
            if (typeof backgroundBase64 !== "undefined")
              backgroundBase64 = projectData.assets.backgroundBase64;
            if (typeof profilePhotoBase64 !== "undefined")
              profilePhotoBase64 = projectData.assets.profilePhotoBase64;
            if (typeof logoType !== "undefined")
              logoType = projectData.assets.logoType;
            if (typeof logoSize !== "undefined")
              logoSize = projectData.assets.logoSize;

            // Restore window variables
            window.logoImageUrl = projectData.assets.logoImageUrl;
            window.isProfilePhoto = projectData.assets.isProfilePhoto;
          }

          // 3. RESTORE FONT SCALING
          if (projectData.fontScaling) {
            window.primaryFontScale = projectData.fontScaling.primaryFontScale;
            window.secondaryFontScale =
              projectData.fontScaling.secondaryFontScale;
          }

          // 4. RESTORE DISPLAY SETTINGS
          if (projectData.displaySettings) {
            window.selectedOverlayMode =
              projectData.displaySettings.overlayMode;
            if (typeof currentDevice !== "undefined") {
              currentDevice = projectData.displaySettings.currentDevice;
            }
          }

          // 5. RESTORE GRID ITEMS
          if (
            projectData.gridItems &&
            typeof currentGridItems !== "undefined"
          ) {
            currentGridItems.length = 0; // Clear existing
            currentGridItems.push(...projectData.gridItems);
          }

          // 6. RESTORE CONTENT BLOCKS
          if (projectData.contentBlocks) {
            if (typeof contentBlocks !== "undefined") {
              contentBlocks.length = 0; // Clear existing
              if (projectData.contentBlocks.current) {
                contentBlocks.push(...projectData.contentBlocks.current);
              }
            }

            // Restore per-page content blocks
            if (projectData.contentBlocks.perPage) {
              restoreContentBlocksToPages(projectData.contentBlocks.perPage);
            }
          }

          // 7. RESTORE MAPS DATA
          if (typeof mapsData !== "undefined") {
            mapsData = projectData.mapsData;
          }

          // 8. RESTORE CUSTOM FONTS
          if (projectData.customFonts && typeof customFonts !== "undefined") {
            customFonts.length = 0; // Clear existing
            customFonts.push(...projectData.customFonts);
          }

          // 9. RESTORE UI STATE
          if (projectData.uiState) {
            if (typeof currentEditingItem !== "undefined") {
              currentEditingItem = projectData.uiState.currentEditingItem;
            }
            if (typeof blockCounter !== "undefined") {
              blockCounter = projectData.uiState.blockCounter;
            }

            // Restore active accordion (delayed)
            setTimeout(() => {
              if (projectData.uiState.activeAccordion) {
                const accordion = document.getElementById(
                  projectData.uiState.activeAccordion
                );
                if (accordion) {
                  const header = accordion.querySelector(".accordion-header");
                  if (header && !header.classList.contains("active")) {
                    header.click();
                  }
                }
              }
            }, 100);
          }

          // 10. RESTORE WINDOW STATE
          if (projectData.windowState) {
            Object.entries(projectData.windowState).forEach(([key, value]) => {
              if (value !== undefined) {
                window[key] = value;
              }
            });
          }

          // 11. REFRESH UI COMPONENTS (delayed to ensure DOM is ready)
          setTimeout(() => {
            // Update font previews
            updateFontPreviews();

            // Update color displays
            updateColorDisplays();

            // Refresh grid items display
            if (typeof renderGridItems === "function") {
              renderGridItems();
            }

            // Update maps status
            if (typeof updateMapsStatus === "function") {
              updateMapsStatus();
            }

            // Restore overlay mode UI state
            if (
              window.selectedOverlayMode &&
              typeof selectOverlayMode === "function"
            ) {
              selectOverlayMode(window.selectedOverlayMode);
            }

            // Restore social links UI state
            const socialPlatforms = [
              "website",
              "airbnb",
              "facebook",
              "instagram",
              "twitter",
              "whatsapp",
              "youtube",
              "tiktok",
            ];
            socialPlatforms.forEach((platform) => {
              const fieldValue = document.getElementById(
                `host${platform.charAt(0).toUpperCase() + platform.slice(1)}`
              )?.value;
              if (fieldValue && fieldValue.trim()) {
                const iconBtn = document.querySelector(
                  `[data-platform="${platform}"] .social-icon-btn`
                );
                const inputSection = document.getElementById(
                  `${platform}Input`
                );
                if (iconBtn && inputSection) {
                  iconBtn.classList.add("active");
                  inputSection.style.display = "block";
                }
              }
            });

            // Refresh preview
            if (typeof updatePreview === "function") {
              updatePreview();
            } else if (typeof schedulePreviewUpdate === "function") {
              schedulePreviewUpdate();
            }
          }, 300);

          hasUnsavedChanges = false; // Reset unsaved changes flag
        } catch (error) {
          console.error("Project restoration failed:", error);
          alert("Failed to restore project: " + error.message);
        }
      }
    </script>

    <!-- Auto-Save and Change Detection -->
    <script>
      // Auto-save configuration
      const AUTO_SAVE_INTERVAL = 15000; // 15 seconds in milliseconds
      let autoSaveInterval = null;

      // Status update functions
      function updateAutoSaveStatus(status, message) {
        const statusElement = document.getElementById("autoSaveStatus");
        const textElement = statusElement?.querySelector(".auto-save-text");
        if (statusElement && textElement) {
          statusElement.className = `auto-save-status-unified ${status}`;
          textElement.innerHTML = message;
        }
      }

      // Enable auto-save functionality
      function enableAutoSave() {
        // Clear any existing interval
        if (autoSaveInterval) {
          clearInterval(autoSaveInterval);
        }

        // Set up auto-save interval
        autoSaveInterval = setInterval(async () => {
          if (hasUnsavedChanges && projectDB) {
            try {
              const projectData = getCompleteProjectData("Auto-save Draft");
              projectData.id = "autosave_current"; // Fixed ID for current draft

              await projectDB.saveProject(projectData, true);

              const timeString = new Date().toLocaleTimeString([], {
                hour: "2-digit",
                minute: "2-digit",
              });
              updateAutoSaveStatus("saved", "🕒 Autosaved: " + timeString);

              hasUnsavedChanges = false;
            } catch (error) {
              console.error("Auto-save failed:", error);
              // Keep showing unsaved changes status on error
            }
          }
        }, AUTO_SAVE_INTERVAL);

        updateAutoSaveStatus("", "⏳ Unsaved changes");
      }

      // Mark changes when user interacts with form elements
      function markUnsavedChanges() {
        hasUnsavedChanges = true;

        // Update status to show unsaved changes
        const statusElement = document.getElementById("autoSaveStatus");
        if (statusElement) {
          updateAutoSaveStatus("", "⏳ Unsaved changes");
        }
      }

      // Setup change detection for all form inputs
      function setupChangeDetection() {
        // Monitor all input elements
        const inputSelectors = [
          'input[type="text"]',
          'input[type="email"]',
          'input[type="tel"]',
          'input[type="url"]',
          'input[type="color"]',
          'input[type="checkbox"]',
          "textarea",
          "select",
        ];

        inputSelectors.forEach((selector) => {
          document.addEventListener("input", (e) => {
            if (e.target.matches(selector)) {
              markUnsavedChanges();
            }
          });

          document.addEventListener("change", (e) => {
            if (e.target.matches(selector)) {
              markUnsavedChanges();
            }
          });
        });

        // Monitor file uploads
        document.addEventListener("change", (e) => {
          if (e.target.type === "file") {
            markUnsavedChanges();
          }
        });

        // Monitor dynamic content changes (like rich text editors, block modifications)
        const observer = new MutationObserver((mutations) => {
          let hasRelevantChanges = false;

          mutations.forEach((mutation) => {
            // Check if the mutation is relevant to content
            if (
              mutation.type === "childList" ||
              mutation.type === "characterData"
            ) {
              const target = mutation.target;

              // Skip if it's just status updates or system-generated changes
              if (
                target.id === "autoSaveStatus" ||
                target.classList?.contains("auto-save-status") ||
                target.closest("#autoSaveStatus")
              ) {
                return;
              }

              hasRelevantChanges = true;
            }
          });

          if (hasRelevantChanges) {
            markUnsavedChanges();
          }
        });

        // Observe the sidebar content for dynamic changes
        const sidebarContent = document.querySelector(".sidebar-content");
        if (sidebarContent) {
          observer.observe(sidebarContent, {
            childList: true,
            subtree: true,
            characterData: true,
          });
        }

        // Monitor grid item changes
        if (typeof currentGridItems !== "undefined") {
          // Set up a periodic check for grid items changes
          let lastGridItemsHash = JSON.stringify(currentGridItems);

          setInterval(() => {
            const currentHash = JSON.stringify(currentGridItems);
            if (currentHash !== lastGridItemsHash) {
              markUnsavedChanges();
              lastGridItemsHash = currentHash;
            }
          }, 5000); // Check every 5 seconds
        }
      }

      // Manual save function
      async function saveProject() {
        if (!projectDB) {
          alert(
            "Database not initialized. Please refresh the page and try again."
          );
          return;
        }

        const saveBtn = document.getElementById("saveProject");
        const originalText = saveBtn.innerHTML;

        try {
          // Disable button and show loading
          saveBtn.disabled = true;
          saveBtn.innerHTML = '<span class="spinner"></span> Saving...';

          const projectName = prompt(
            "Enter a name for your project:",
            "My Welcome Guide"
          );
          if (!projectName) {
            return; // User cancelled
          }

          const projectData = getCompleteProjectData(projectName);
          await projectDB.saveProject(projectData);

          alert("Project saved successfully!");
          hasUnsavedChanges = false;
          const timeString = new Date().toLocaleTimeString([], {
            hour: "2-digit",
            minute: "2-digit",
          });
          updateAutoSaveStatus("saved", "🕒 Autosaved: " + timeString);
        } catch (error) {
          console.error("Save failed:", error);
          alert("Failed to save project: " + error.message);
        } finally {
          // Restore button
          saveBtn.disabled = false;
          saveBtn.innerHTML = originalText;
        }
      }
    </script>

    <!-- Mobile Preview Notice -->
    <div class="mobile-preview-notice" id="mobileNotice">
      <div class="notice-content">
        <div class="notice-icon">📱</div>
        <div class="notice-title">Live Preview Unavailable</div>
        <div class="notice-text">
          Live preview is optimized for laptop and desktop screens. For the best
          editing experience with real-time preview capabilities, we recommend
          using a larger screen device.
        </div>
      </div>
      <button class="notice-dismiss-btn" onclick="dismissMobileNotice()">
        I Understand
      </button>
    </div>

    <!-- Tablet Preview Overlay Toggle -->
    <button
      class="tablet-preview-toggle"
      id="tabletPreviewToggle"
      onclick="togglePreviewOverlay()"
    >
      <i class="fas fa-expand"></i> Full Preview
    </button>

    <!-- Mobile Preview Overlay Toggle -->
    <button
      class="mobile-preview-toggle"
      id="mobilePreviewToggle"
      onclick="toggleMobilePreviewOverlay()"
    >
      <i class="fas fa-mobile-alt"></i> Mobile Preview
    </button>

    <!-- Preview Overlay for Tablets -->
    <div class="preview-overlay" id="previewOverlay">
      <div class="preview-overlay-content">
        <div class="preview-overlay-header">
          <div class="preview-overlay-title">
            <i class="fas fa-eye"></i> Live Preview
          </div>
          <button class="preview-overlay-close" onclick="closePreviewOverlay()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <iframe
          class="preview-overlay-iframe"
          id="previewOverlayIframe"
          src="about:blank"
        ></iframe>
      </div>
    </div>

    <!-- Mobile Preview Overlay -->
    <div class="mobile-preview-overlay" id="mobilePreviewOverlay">
      <div class="mobile-preview-overlay-content">
        <div class="mobile-preview-overlay-header">
          <div class="mobile-preview-overlay-title">
            <i class="fas fa-mobile-alt"></i> Mobile Preview
          </div>
          <button
            class="mobile-preview-overlay-close"
            onclick="closeMobilePreviewOverlay()"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
        <iframe
          class="mobile-preview-overlay-iframe"
          id="mobilePreviewOverlayIframe"
          src="about:blank"
        ></iframe>
      </div>
    </div>

    <script src="./_internal/core.js"></script>
    <!-- Project Management Modal -->
    <div
      id="projectManagementModal"
      class="modal project-modal"
      style="display: none"
    >
      <div class="modal-overlay" onclick="closeProjectModal()"></div>
      <div class="modal-content project-modal-content">
        <div class="modal-header">
          <h3><i class="fas fa-folder-open"></i> Load Project</h3>
          <button class="modal-close-btn" onclick="closeProjectModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div class="modal-body">
          <div class="project-tabs">
            <button
              class="project-tab active"
              onclick="switchProjectTab('saved')"
              data-tab="saved"
            >
              <i class="fas fa-save"></i> Saved Projects
              <span id="savedProjectsCount" class="project-count">(0)</span>
            </button>
            <button
              class="project-tab"
              onclick="switchProjectTab('drafts')"
              data-tab="drafts"
            >
              <i class="fas fa-clock"></i> Auto-saved Drafts
            </button>
            <button
              class="project-tab"
              onclick="switchProjectTab('backup')"
              data-tab="backup"
            >
              <i class="fas fa-exchange-alt"></i> Backup & Restore
            </button>
          </div>

          <div class="project-list-container">
            <div id="savedProjectsList" class="project-list active">
              <div class="loading-message">
                <i class="fas fa-spinner fa-spin"></i> Loading saved projects...
              </div>
            </div>

            <div id="draftsProjectsList" class="project-list">
              <div class="loading-message">
                <i class="fas fa-spinner fa-spin"></i> Loading drafts...
              </div>
            </div>

            <div
              id="backupProjectsList"
              class="project-list backup-restore-content"
            >
              <!-- Storage Notice -->
              <div class="storage-notice">
                <div class="storage-notice-content">
                  <i class="fas fa-info-circle"></i>
                  <div>
                    <strong>Local Storage Notice:</strong> Your projects are
                    saved in this browser profile only. For long-term backup or
                    to share across devices, use the download/import options
                    below.
                  </div>
                </div>
              </div>

              <!-- Export/Import Actions -->
              <div class="backup-actions">
                <div class="backup-action-card export-card">
                  <div class="backup-card-icon">
                    <i class="fas fa-download"></i>
                  </div>
                  <div class="backup-card-content">
                    <h4>Download My Progress</h4>
                    <p>
                      Export all your projects and drafts to a backup file. This
                      creates a complete backup that you can save or share.
                    </p>
                    <button
                      class="backup-action-btn export-btn"
                      onclick="downloadAllProgress()"
                    >
                      <i class="fas fa-download"></i>
                      Download Backup
                    </button>
                  </div>
                </div>

                <div class="backup-action-card import-card">
                  <div class="backup-card-icon">
                    <i class="fas fa-upload"></i>
                  </div>
                  <div class="backup-card-content">
                    <h4>Import My Progress</h4>
                    <p>
                      Restore projects and drafts from a backup file. This will
                      add to your existing projects.
                    </p>
                    <button
                      class="backup-action-btn import-btn"
                      onclick="triggerImportProgress()"
                    >
                      <i class="fas fa-upload"></i>
                      Import Backup
                    </button>
                  </div>
                </div>
              </div>

              <input
                type="file"
                id="importProgressFile"
                accept=".json"
                style="display: none"
                onchange="importProgress(event)"
              />
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="closeProjectModal()">
            Cancel
          </button>
          <button
            id="loadSelectedBtn"
            class="btn btn-primary"
            onclick="loadSelectedProjectFromFooter()"
            disabled
          >
            <i class="fas fa-folder-open"></i> Load Selected Project
          </button>
        </div>
      </div>
    </div>

    <!-- Project Management Styles -->
    <style>
      .project-modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 99999;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
      }

      .project-modal-content {
        width: 90%;
        max-width: 600px;
        max-height: 96vh;
        margin: 2vh auto;
        background: white;
        border-radius: 1rem;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      .modal-body {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .modal-header {
        padding: 1.5rem;
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: var(--gray-50);
        flex-shrink: 0;
      }

      .modal-header h3 {
        margin: 0;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--gray-800);
        font-size: 1.25rem;
      }

      .modal-close-btn {
        background: none;
        border: none;
        font-size: 1.25rem;
        cursor: pointer;
        color: var(--gray-500);
        padding: 0.5rem;
        border-radius: 0.5rem;
        transition: all 0.2s ease;
      }

      .modal-close-btn:hover {
        background: var(--gray-200);
        color: var(--gray-700);
      }

      .project-tabs {
        display: flex;
        border-bottom: 1px solid var(--border);
        flex-shrink: 0;
        margin-top: -0.5rem;
      }

      .project-tab {
        flex: 1;
        padding: 1rem;
        border: none;
        background: white;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-weight: 500;
        color: var(--gray-600);
      }

      .project-tab:hover {
        background: var(--gray-50);
      }

      .project-tab.active {
        background: var(--primary);
        color: white;
      }

      .project-count {
        font-size: 0.875rem;
        opacity: 0.8;
        font-weight: 400;
      }

      /* Backup & Restore Tab Styles */
      .backup-restore-content {
        padding: 1.5rem;
      }

      .storage-notice {
        margin-bottom: 2rem;
        padding: 1rem;
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 0.5rem;
        border-left: 4px solid #f39c12;
      }
      .storage-notice-content {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        font-size: 0.9rem;
        color: #856404;
      }
      .storage-notice i {
        color: #f39c12;
        margin-top: 0.125rem;
        flex-shrink: 0;
      }

      .backup-actions {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
      }

      .backup-action-card {
        background: var(--white);
        border: 1px solid var(--border);
        border-radius: 0.75rem;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        transition: all 0.2s ease;
      }

      .backup-action-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      }

      .backup-card-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
        font-size: 1.5rem;
      }

      .export-card .backup-card-icon {
        background: rgba(64, 113, 244, 0.1);
        color: var(--primary);
      }

      .import-card .backup-card-icon {
        background: rgba(5, 150, 105, 0.1);
        color: var(--success);
      }

      .backup-card-content h4 {
        margin: 0 0 0.5rem 0;
        font-size: 1.125rem;
        color: var(--gray-800);
      }

      .backup-card-content p {
        margin: 0 0 1.5rem 0;
        color: var(--gray-600);
        font-size: 0.9rem;
        line-height: 1.5;
      }

      .backup-action-btn {
        width: 100%;
        padding: 0.875rem 1.25rem;
        border: none;
        border-radius: 0.5rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-size: 0.9rem;
      }

      .backup-action-btn.export-btn {
        background: var(--primary);
        color: white;
        box-shadow: 0 2px 4px rgba(64, 113, 244, 0.2);
      }

      .backup-action-btn.export-btn:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(64, 113, 244, 0.3);
      }

      .backup-action-btn.import-btn {
        background: var(--success);
        color: white;
        box-shadow: 0 2px 4px rgba(5, 150, 105, 0.2);
      }

      .backup-action-btn.import-btn:hover {
        background: #047857;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(5, 150, 105, 0.3);
      }

      /* Responsive backup actions */
      @media (max-width: 640px) {
        .backup-actions {
          grid-template-columns: 1fr;
        }
      }

      .project-list-container {
        flex: 1;
        overflow: hidden;
        position: relative;
        min-height: 300px;
      }

      .project-list {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        overflow-y: auto;
        padding: 1rem;
        display: none;
      }

      .project-list.active {
        display: block;
      }

      .project-item {
        padding: 1rem;
        border: 2px solid var(--border);
        border-radius: 0.75rem;
        margin-bottom: 1rem;
        cursor: pointer;
        transition: all 0.2s ease;
        background: white;
      }

      .project-item:hover {
        border-color: var(--primary);
        box-shadow: var(--shadow-md);
        transform: translateY(-1px);
      }

      .project-item.selected {
        border-color: var(--primary);
        background: rgba(64, 113, 244, 0.05);
      }

      .project-item-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 0.5rem;
      }

      .project-name {
        font-weight: 600;
        color: var(--gray-800);
        font-size: 1rem;
      }

      .project-date {
        font-size: 0.875rem;
        color: var(--gray-500);
      }

      .project-actions {
        display: flex;
        gap: 0.5rem;
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      .project-item:hover .project-actions {
        opacity: 1;
      }

      .project-action-btn {
        padding: 0.25rem 0.5rem;
        border: none;
        border-radius: 0.25rem;
        cursor: pointer;
        font-size: 0.75rem;
        transition: all 0.2s ease;
      }

      .load-project-btn {
        background: var(--primary);
        color: white;
      }

      .load-project-btn:hover {
        background: var(--primary-dark);
      }

      .delete-project-btn {
        background: var(--danger);
        color: white;
      }

      .delete-project-btn:hover {
        background: #b91c1c;
      }

      .loading-message,
      .empty-message {
        text-align: center;
        padding: 3rem 1rem;
        color: var(--gray-500);
      }

      .empty-message {
        background: var(--gray-50);
        border-radius: 0.75rem;
        margin: 1rem 0;
      }

      .modal-footer {
        padding: 1rem 1.5rem;
        border-top: 1px solid var(--border);
        display: flex;
        gap: 0.75rem;
        justify-content: flex-end;
      }

      .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 0.5rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .btn-secondary {
        background: var(--gray-200);
        color: var(--gray-700);
      }

      .btn-secondary:hover {
        background: var(--gray-300);
      }

      .btn-danger {
        background: var(--danger);
        color: white;
      }

      .btn-danger:hover {
        background: #b91c1c;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
    </style>

    <!-- Project Management JavaScript -->
    <script>
      let selectedProjectId = null;
      let selectedProjectIsDraft = false;
      let currentProjectTab = "saved";

      // Open project management modal
      async function openProjectModal() {
        const modal = document.getElementById("projectManagementModal");

        if (!modal) {
          console.error("Project management modal not found");
          return;
        }

        modal.style.display = "block";

        // Load projects
        await loadProjectsList();
      }

      // Close project management modal
      function closeProjectModal() {
        const modal = document.getElementById("projectManagementModal");
        modal.style.display = "none";
        selectedProjectId = null;
        selectedProjectIsDraft = false;
        document.getElementById("loadSelectedBtn").disabled = true;
      }

      // Switch between project tabs
      function switchProjectTab(tab) {
        currentProjectTab = tab;

        // Update tab buttons
        document.querySelectorAll(".project-tab").forEach((btn) => {
          btn.classList.toggle("active", btn.dataset.tab === tab);
        });

        // Update project lists - handle the new backup tab
        document.querySelectorAll(".project-list").forEach((list) => {
          if (tab === "backup") {
            list.classList.toggle("active", list.id === "backupProjectsList");
          } else {
            list.classList.toggle("active", list.id === `${tab}ProjectsList`);
          }
        });

        // Clear selection when switching away from project tabs
        if (tab === "backup") {
          selectedProjectId = null;
          document.getElementById("deleteSelectedBtn").disabled = true;
        }
      }

      // Load projects list
      async function loadProjectsList() {
        if (!projectDB) {
          console.error("ProjectDB not initialized");
          return;
        }

        try {
          const [savedProjects, draftProjects] = await Promise.all([
            projectDB.listProjects(false),
            projectDB.listProjects(true),
          ]);

          renderProjectsList("savedProjectsList", savedProjects, false);
          renderProjectsList("draftsProjectsList", draftProjects, true);
        } catch (error) {
          console.error("Failed to load projects:", error);
          document.getElementById("savedProjectsList").innerHTML =
            '<div class="empty-message">Failed to load projects: ' +
            error.message +
            "</div>";
          document.getElementById("draftsProjectsList").innerHTML =
            '<div class="empty-message">Failed to load drafts: ' +
            error.message +
            "</div>";
        }
      }

      // Render projects list
      function renderProjectsList(containerId, projects, isDrafts) {
        const container = document.getElementById(containerId);

        if (!container) {
          console.error(`Container ${containerId} not found`);
          return;
        }

        if (!projects || projects.length === 0) {
          container.innerHTML = `
            <div class="empty-message">
              <i class="fas fa-folder-open" style="font-size: 2rem; margin-bottom: 0.5rem; opacity: 0.5;"></i>
              <div>No ${isDrafts ? "drafts" : "saved projects"} found</div>
              <div style="font-size: 0.875rem; margin-top: 0.25rem;">
                ${
                  isDrafts
                    ? "Auto-saved drafts will appear here"
                    : "Your saved projects will appear here"
                }
              </div>
            </div>
          `;

          // Update the project count in the tab for empty state
          if (containerId === "savedProjectsList") {
            const countElement = document.getElementById("savedProjectsCount");
            if (countElement) {
              countElement.textContent = "(0)";
            }
          }

          return;
        }

        const projectsHTML = projects
          .map((project) => {
            return `
            <div class="project-item" onclick="selectProject('${
              project.id
            }', ${isDrafts})">
              <div class="project-item-header">
                <div class="project-name">${escapeHtml(
                  project.projectName || "Untitled Project"
                )}</div>
                <div class="project-actions">
                  <button class="project-action-btn load-project-btn" onclick="event.stopPropagation(); loadSelectedProject('${
                    project.id
                  }', ${isDrafts})">
                    <i class="fas fa-folder-open"></i> Load
                  </button>
                  <button class="project-action-btn delete-project-btn" onclick="event.stopPropagation(); deleteProject('${
                    project.id
                  }', ${isDrafts})">
                    <i class="fas fa-trash"></i> Delete
                  </button>
                </div>
              </div>
              <div class="project-date">
                ${isDrafts ? "Auto-saved" : "Saved"}: ${new Date(
              project.lastModified
            ).toLocaleString()}
              </div>
            </div>
          `;
          })
          .join("");

        container.innerHTML = projectsHTML;

        // Update the project count in the tab
        if (containerId === "savedProjectsList") {
          const countElement = document.getElementById("savedProjectsCount");
          if (countElement) {
            countElement.textContent = `(${projects.length})`;
          }
        }
      }

      // Select project
      function selectProject(projectId, isDraft) {
        // Clear previous selection
        document.querySelectorAll(".project-item").forEach((item) => {
          item.classList.remove("selected");
        });

        // Select current item
        event.currentTarget.classList.add("selected");

        selectedProjectId = projectId;
        selectedProjectIsDraft = isDraft;
        document.getElementById("loadSelectedBtn").disabled = false;
      }

      // Load selected project
      async function loadSelectedProject(projectId, isDraft) {
        if (!projectDB) return;

        try {
          const projectData = await projectDB.loadProject(projectId, isDraft);
          if (projectData) {
            await restoreCompleteProjectData(projectData);
            closeProjectModal();
            alert(
              "The project is about to load. If it had a lot of images then it may take some time. Please be patient."
            );
          } else {
            alert("Project not found");
          }
        } catch (error) {
          console.error("Failed to load project:", error);
          alert("Failed to load project: " + error.message);
        }
      }

      // Delete project
      async function deleteProject(projectId, isDraft) {
        if (!projectDB) return;

        const projectType = isDraft ? "draft" : "project";
        if (
          !confirm(
            `Are you sure you want to delete this ${projectType}? This action cannot be undone.`
          )
        ) {
          return;
        }

        try {
          await projectDB.deleteProject(projectId, isDraft);
          await loadProjectsList(); // Refresh list

          // Clear selection if deleted project was selected
          if (selectedProjectId === projectId) {
            selectedProjectId = null;
            document.getElementById("loadSelectedBtn").disabled = true;
          }
        } catch (error) {
          console.error("Failed to delete project:", error);
          alert("Failed to delete project: " + error.message);
        }
      }

      // Load selected project from footer button
      async function loadSelectedProjectFromFooter() {
        if (selectedProjectId) {
          await loadSelectedProject(selectedProjectId, selectedProjectIsDraft);
        }
      }

      // Delete selected project
      async function deleteSelectedProject() {
        if (selectedProjectId) {
          await deleteProject(selectedProjectId, selectedProjectIsDraft);
        }
      }

      // Utility function to escape HTML
      function escapeHtml(text) {
        const div = document.createElement("div");
        div.textContent = text;
        return div.innerHTML;
      }

      // Load project button handler
      async function loadProject() {
        await openProjectModal();
      }

      // Export/Import Functions
      async function downloadAllProgress() {
        try {
          if (!projectDB) {
            throw new Error("Database not initialized");
          }

          // Get all projects and drafts using the correct method names
          const [projects, drafts] = await Promise.all([
            projectDB.listProjects(false), // saved projects
            projectDB.listProjects(true), // drafts
          ]);

          // Create export data
          const exportData = {
            version: "1.0",
            exportDate: new Date().toISOString(),
            exportedFrom: "Digital Welcome Guide Creator",
            data: {
              projects: projects,
              drafts: drafts,
            },
          };

          // Convert to JSON string
          const jsonString = JSON.stringify(exportData, null, 2);

          // Create and trigger download
          const blob = new Blob([jsonString], { type: "application/json" });
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = `welcome-guide-progress-${new Date()
            .toISOString()
            .slice(0, 10)}.json`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);

          alert(
            `Successfully exported ${projects.length} projects and ${drafts.length} drafts!`
          );
        } catch (error) {
          console.error("Export failed:", error);
          alert("Failed to export progress: " + error.message);
        }
      }

      function triggerImportProgress() {
        document.getElementById("importProgressFile").click();
      }

      async function importProgress(event) {
        const file = event.target.files[0];
        if (!file) return;

        try {
          // Read file content
          const text = await file.text();
          const importData = JSON.parse(text);

          // Validate import data structure
          if (
            !importData.data ||
            !importData.data.projects ||
            !importData.data.drafts
          ) {
            throw new Error(
              "Invalid file format. Please select a valid progress file."
            );
          }

          const { projects, drafts } = importData.data;

          // Confirm import with user
          const confirmMessage = `Import Confirmation

This will import:
• ${projects.length} projects
• ${drafts.length} drafts

⚠️ Warning: Existing projects with the same names will be overwritten.

Do you want to proceed with the import?`;

          if (!confirm(confirmMessage)) {
            // Reset file input
            event.target.value = "";
            return;
          }

          if (!projectDB) {
            throw new Error("Database not initialized");
          }

          // Import projects
          let importedProjects = 0;
          for (const project of projects) {
            try {
              await projectDB.saveProject(project, false); // false = not a draft
              importedProjects++;
            } catch (error) {
              console.warn(
                `Failed to import project "${project.projectName}":`,
                error
              );
            }
          }

          // Import drafts
          let importedDrafts = 0;
          for (const draft of drafts) {
            try {
              await projectDB.saveProject(draft, true); // true = is a draft
              importedDrafts++;
            } catch (error) {
              console.warn(`Failed to import draft:`, error);
            }
          }

          // Refresh the project lists
          await loadProjectsList();

          // Show success message
          const successMessage = `✅ Import Completed Successfully

Results:
• ${importedProjects} of ${projects.length} projects imported
• ${importedDrafts} of ${drafts.length} drafts imported`;
          alert(successMessage);
        } catch (error) {
          console.error("Import failed:", error);
          alert(`❌ Import Failed

Error: ${error.message}

Please check your file and try again.`);
        } finally {
          // Reset file input
          event.target.value = "";
        }
      }

      // Debug function to check database contents
      async function debugDatabase() {
        if (!projectDB) {
          return;
        }

        try {
          const savedProjects = await projectDB.listProjects(false);
          const draftProjects = await projectDB.listProjects(true);

          if (savedProjects.length > 0) {
          }

          if (draftProjects.length > 0) {
          }
        } catch (error) {
          console.error("Debug database error:", error);
        }
      }

      // Add debug function to window for manual testing
      window.debugDatabase = debugDatabase;
    </script>

    <!-- Initialization and Event Handlers -->
    <script>
      // Initialize everything when DOM is loaded
      document.addEventListener("DOMContentLoaded", async function () {
        // Initialize project database
        await initializeProjectDB();

        // Setup change detection
        setupChangeDetection();

        // Add event listeners to save/load buttons
        const saveButton = document.getElementById("saveProject");
        const loadButton = document.getElementById("loadProject");

        if (saveButton) {
          saveButton.addEventListener("click", saveProject);
        }

        if (loadButton) {
          loadButton.addEventListener("click", loadProject);
        }

        // Add keyboard shortcuts
        document.addEventListener("keydown", function (e) {
          // Ctrl+S to save
          if (e.ctrlKey && e.key === "s") {
            e.preventDefault();
            saveProject();
          }

          // Ctrl+O to load
          if (e.ctrlKey && e.key === "o") {
            e.preventDefault();
            loadProject();
          }

          // Escape to close modal
          if (e.key === "Escape") {
            const modal = document.getElementById("projectManagementModal");
            if (modal && modal.style.display === "block") {
              closeProjectModal();
            }
          }
        });

        // Add beforeunload handler to warn about unsaved changes
        window.addEventListener("beforeunload", function (e) {
          if (hasUnsavedChanges) {
            const message =
              "You have unsaved changes. Are you sure you want to leave?";
            e.returnValue = message;
            return message;
          }
        });
      });

      // Enhance existing initialization if present
      if (typeof initializeSetup === "function") {
        const originalInitializeSetup = initializeSetup;
        initializeSetup = async function () {
          await originalInitializeSetup();

          // Initialize our save/load functionality after core setup
          setTimeout(async () => {
            await initializeProjectDB();
            setupChangeDetection();
          }, 1000);
        };
      }
    </script>
  </body>
</html>
