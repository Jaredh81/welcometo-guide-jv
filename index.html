<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Digital Welcome Guide Setup</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <div class="container">
    <h1>Digital Welcome Guide Setup</h1>

    <!-- Guide ID -->
    <label>Guide ID</label>
    <input id="guideId" type="text" value="host1">

    <!-- Host Name -->
    <label>Host Name</label>
    <input id="hostName" type="text" placeholder="Enter host name">

    <!-- City -->
    <label>City</label>
    <input id="city" type="text" placeholder="Enter city">

    <button onclick="saveGuide()">üíæ Save Guide</button>
    <button onclick="loadGuide()">üìÇ Load Guide</button>

    <pre id="output">No data yet‚Ä¶</pre>
  </div>

  <script>
    const API_SAVE = "/.netlify/functions/save";
    const API_LOAD = "/.netlify/functions/load";

    async function saveGuide() {
      const id = document.getElementById("guideId").value.trim();
      const data = {
        host: { name: document.getElementById("hostName").value.trim() },
        property: { city: document.getElementById("city").value.trim() }
      };

      try {
        const res = await fetch(`${API_SAVE}?id=${encodeURIComponent(id)}`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });
        const json = await res.json();
        document.getElementById("output").textContent = JSON.stringify(json, null, 2);
      } catch (err) {
        document.getElementById("output").textContent = "‚ùå Error: " + err.message;
      }
    }

    async function loadGuide() {
      const id = document.getElementById("guideId").value.trim();

      try {
        const res = await fetch(`${API_LOAD}?id=${encodeURIComponent(id)}`);
        const json = await res.json();
        document.getElementById("output").textContent = JSON.stringify(json, null, 2);
      } catch (err) {
        document.getElementById("output").textContent = "‚ùå Error: " + err.message;
      }
    }
  </script>
</body>
</html>
